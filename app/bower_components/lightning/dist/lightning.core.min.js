/*! lightning 2017-05-08 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return od.apply(null,arguments)}function b(a){od=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function e(a){var b;for(b in a)return!1;return!0}function f(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function g(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function h(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function i(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function j(a,b){for(var c in b)i(b,c)&&(a[c]=b[c]);return i(b,"toString")&&(a.toString=b.toString),i(b,"valueOf")&&(a.valueOf=b.valueOf),a}function k(a,b,c,d){return rb(a,b,c,d,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function m(a){return null==a._pf&&(a._pf=l()),a._pf}function n(a){if(null==a._isValid){var b=m(a),c=qd.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function o(a){var b=k(NaN);return null!=a?j(m(b),a):m(b).userInvalidated=!0,b}function p(a){return void 0===a}function q(a,b){var c,d,e;if(p(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),p(b._i)||(a._i=b._i),p(b._f)||(a._f=b._f),p(b._l)||(a._l=b._l),p(b._strict)||(a._strict=b._strict),p(b._tzm)||(a._tzm=b._tzm),p(b._isUTC)||(a._isUTC=b._isUTC),p(b._offset)||(a._offset=b._offset),p(b._pf)||(a._pf=m(b)),p(b._locale)||(a._locale=b._locale),rd.length>0)for(c in rd)d=rd[c],e=b[d],p(e)||(a[d]=e);return a}function r(b){q(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),sd===!1&&(sd=!0,a.updateOffset(this),sd=!1)}function s(a){return a instanceof r||null!=a&&null!=a._isAMomentObject}function t(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function u(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=t(b)),c}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&u(a[d])!==u(b[d]))&&g++;return g+f}function w(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function x(b,c){var d=!0;return j(function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,b),d){for(var e,f=[],g=0;g<arguments.length;g++){if(e="","object"==typeof arguments[g]){e+="\n["+g+"] ";for(var h in arguments[0])e+=h+": "+arguments[0][h]+", ";e=e.slice(0,-2)}else e=arguments[g];f.push(e)}w(b+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+(new Error).stack),d=!1}return c.apply(this,arguments)},c)}function y(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),td[b]||(w(c),td[b]=!0)}function z(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function A(a){var b,c;for(c in a)b=a[c],z(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function B(a,b){var c,e=j({},a);for(c in b)i(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},j(e[c],a[c]),j(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)i(a,c)&&!i(b,c)&&d(a[c])&&(e[c]=j({},e[c]));return e}function C(a){null!=a&&this.set(a)}function D(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return z(d)?d.call(b,c):d}function E(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function F(){return this._invalidDate}function G(a){return this._ordinal.replace("%d",a)}function H(a,b,c,d){var e=this._relativeTime[c];return z(e)?e(a,b,c,d):e.replace(/%d/i,a)}function I(a,b){var c=this._relativeTime[a>0?"future":"past"];return z(c)?c(b):c.replace(/%s/i,b)}function J(a,b){var c=a.toLowerCase();Dd[c]=Dd[c+"s"]=Dd[b]=a}function K(a){return"string"==typeof a?Dd[a]||Dd[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)i(a,c)&&(b=K(c),b&&(d[b]=a[c]));return d}function M(a,b){Ed[a]=b}function N(a){var b=[];for(var c in a)b.push({unit:c,priority:Ed[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function O(b,c){return function(d){return null!=d?(Q(this,b,d),a.updateOffset(this,c),this):P(this,b)}}function P(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Q(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function R(a){return a=K(a),z(this[a])?this[a]():this}function S(a,b){if("object"==typeof a){a=L(a);for(var c=N(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=K(a),z(this[a]))return this[a](b);return this}function T(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function U(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Id[a]=e),b&&(Id[b[0]]=function(){return T(e.apply(this,arguments),b[1],b[2])}),c&&(Id[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function V(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function W(a){var b,c,d=a.match(Fd);for(b=0,c=d.length;c>b;b++)Id[d[b]]?d[b]=Id[d[b]]:d[b]=V(d[b]);return function(b){var e,f="";for(e=0;c>e;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}function X(a,b){return a.isValid()?(b=Y(b,a.localeData()),Hd[b]=Hd[b]||W(b),Hd[b](a)):a.localeData().invalidDate()}function Y(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Gd.lastIndex=0;d>=0&&Gd.test(a);)a=a.replace(Gd,c),Gd.lastIndex=0,d-=1;return a}function Z(a,b,c){$d[a]=z(b)?b:function(a,d){return a&&c?c:b}}function $(a,b){return i($d,a)?$d[a](b._strict,b._locale):new RegExp(_(a))}function _(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ba(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),f(b)&&(d=function(a,c){c[b]=u(a)}),c=0;c<a.length;c++)_d[a[c]]=d}function ca(a,b){ba(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function da(a,b,c){null!=b&&i(_d,a)&&_d[a](b,c._a,c,a)}function ea(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function fa(a,b){return a?c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||ke).test(b)?"format":"standalone"][a.month()]:this._months}function ga(a,b){return a?c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ke.test(b)?"format":"standalone"][a.month()]:this._monthsShort}function ha(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=k([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=je.call(this._shortMonthsParse,g),-1!==e?e:null):(e=je.call(this._longMonthsParse,g),-1!==e?e:null):"MMM"===b?(e=je.call(this._shortMonthsParse,g),-1!==e?e:(e=je.call(this._longMonthsParse,g),-1!==e?e:null)):(e=je.call(this._longMonthsParse,g),-1!==e?e:(e=je.call(this._shortMonthsParse,g),-1!==e?e:null))}function ia(a,b,c){var d,e,f;if(this._monthsParseExact)return ha.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=k([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function ja(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=u(b);else if(b=a.localeData().monthsParse(b),!f(b))return a;return c=Math.min(a.date(),ea(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ka(b){return null!=b?(ja(this,b),a.updateOffset(this,!0),this):P(this,"Month")}function la(){return ea(this.year(),this.month())}function ma(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=ne),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function na(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=oe),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function oa(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=k([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=aa(d[b]),e[b]=aa(e[b]);for(b=0;24>b;b++)f[b]=aa(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function pa(a){return qa(a)?366:365}function qa(a){return a%4===0&&a%100!==0||a%400===0}function ra(){return qa(this.year())}function sa(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ta(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function ua(a,b,c){var d=7+b-c,e=(7+ta(a,0,d).getUTCDay()-b)%7;return-e+d-1}function va(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ua(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=pa(f)+j):j>pa(a)?(f=a+1,g=j-pa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function wa(a,b,c){var d,e,f=ua(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+xa(e,b,c)):g>xa(a.year(),b,c)?(d=g-xa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function xa(a,b,c){var d=ua(a,b,c),e=ua(a+1,b,c);return(pa(a)-d+e)/7}function ya(a){return wa(a,this._week.dow,this._week.doy).week}function za(){return this._week.dow}function Aa(){return this._week.doy}function Ba(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ca(a){var b=wa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Da(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Ea(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Fa(a,b){return a?c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:this._weekdays}function Ga(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort}function Ha(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin}function Ia(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=k([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=je.call(this._weekdaysParse,g),-1!==e?e:null):"ddd"===b?(e=je.call(this._shortWeekdaysParse,g),-1!==e?e:null):(e=je.call(this._minWeekdaysParse,g),-1!==e?e:null):"dddd"===b?(e=je.call(this._weekdaysParse,g),-1!==e?e:(e=je.call(this._shortWeekdaysParse,g),-1!==e?e:(e=je.call(this._minWeekdaysParse,g),-1!==e?e:null))):"ddd"===b?(e=je.call(this._shortWeekdaysParse,g),-1!==e?e:(e=je.call(this._weekdaysParse,g),-1!==e?e:(e=je.call(this._minWeekdaysParse,g),-1!==e?e:null))):(e=je.call(this._minWeekdaysParse,g),-1!==e?e:(e=je.call(this._weekdaysParse,g),-1!==e?e:(e=je.call(this._shortWeekdaysParse,g),-1!==e?e:null)))}function Ja(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ia.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=k([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function Ka(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Da(a,this.localeData()),this.add(a-b,"d")):b}function La(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Ma(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=Ea(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Na(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=ue),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Oa(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ve),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Pa(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=we),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Qa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;7>b;b++)c=k([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;7>b;b++)h[b]=aa(h[b]),i[b]=aa(i[b]),j[b]=aa(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Ra(){return this.hours()%12||12}function Sa(){return this.hours()||24}function Ta(a,b){U(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Ua(a,b){return b._meridiemParse}function Va(a){return"p"===(a+"").toLowerCase().charAt(0)}function Wa(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Xa(a){return a?a.toLowerCase().replace("_","-"):a}function Ya(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Xa(a[f]).split("-"),b=e.length,c=Xa(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=Za(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}function Za(a){var b=null;if(!Be[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=xe._abbr,require("./locale/"+a),$a(b)}catch(a){}return Be[a]}function $a(a,b){var c;return a&&(c=p(b)?bb(a):_a(a,b),c&&(xe=c)),xe._abbr}function _a(a,b){if(null!==b){var c=Ae;if(b.abbr=a,null!=Be[a])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=Be[a]._config;else if(null!=b.parentLocale){if(null==Be[b.parentLocale])return Ce[b.parentLocale]||(Ce[b.parentLocale]=[]),Ce[b.parentLocale].push({name:a,config:b}),null;c=Be[b.parentLocale]._config}return Be[a]=new C(B(c,b)),Ce[a]&&Ce[a].forEach(function(a){_a(a.name,a.config)}),$a(a),Be[a]}return delete Be[a],null}function ab(a,b){if(null!=b){var c,d=Ae;null!=Be[a]&&(d=Be[a]._config),b=B(d,b),c=new C(b),c.parentLocale=Be[a],Be[a]=c,$a(a)}else null!=Be[a]&&(null!=Be[a].parentLocale?Be[a]=Be[a].parentLocale:null!=Be[a]&&delete Be[a]);return Be[a]}function bb(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return xe;if(!c(a)){if(b=Za(a))return b;a=[a]}return Ya(a)}function cb(){return wd(Be)}function db(a){var b,c=a._a;return c&&-2===m(a).overflow&&(b=c[be]<0||c[be]>11?be:c[ce]<1||c[ce]>ea(c[ae],c[be])?ce:c[de]<0||c[de]>24||24===c[de]&&(0!==c[ee]||0!==c[fe]||0!==c[ge])?de:c[ee]<0||c[ee]>59?ee:c[fe]<0||c[fe]>59?fe:c[ge]<0||c[ge]>999?ge:-1,m(a)._overflowDayOfYear&&(ae>b||b>ce)&&(b=ce),m(a)._overflowWeeks&&-1===b&&(b=he),m(a)._overflowWeekday&&-1===b&&(b=ie),m(a).overflow=b),a}function eb(a){var b,c,d,e,f,g,h=a._i,i=De.exec(h)||Ee.exec(h);if(i){for(m(a).iso=!0,b=0,c=Ge.length;c>b;b++)if(Ge[b][1].exec(i[1])){e=Ge[b][0],d=Ge[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=He.length;c>b;b++)if(He[b][1].exec(i[3])){f=(i[2]||" ")+He[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Fe.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),kb(a)}else a._isValid=!1}function fb(b){var c=Ie.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(eb(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function gb(a,b,c){return null!=a?a:null!=b?b:c}function hb(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ib(a){var b,c,d,e,f=[];if(!a._d){for(d=hb(a),a._w&&null==a._a[ce]&&null==a._a[be]&&jb(a),a._dayOfYear&&(e=gb(a._a[ae],d[ae]),a._dayOfYear>pa(e)&&(m(a)._overflowDayOfYear=!0),c=ta(e,0,a._dayOfYear),a._a[be]=c.getUTCMonth(),a._a[ce]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[de]&&0===a._a[ee]&&0===a._a[fe]&&0===a._a[ge]&&(a._nextDay=!0,a._a[de]=0),a._d=(a._useUTC?ta:sa).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[de]=24)}}function jb(a){var b,c,d,e,f,g,h,i;if(b=a._w,null!=b.GG||null!=b.W||null!=b.E)f=1,g=4,c=gb(b.GG,a._a[ae],wa(sb(),1,4).year),d=gb(b.W,1),e=gb(b.E,1),(1>e||e>7)&&(i=!0);else{f=a._locale._week.dow,g=a._locale._week.doy;var j=wa(sb(),f,g);c=gb(b.gg,a._a[ae],j.year),d=gb(b.w,j.week),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f}1>d||d>xa(c,f,g)?m(a)._overflowWeeks=!0:null!=i?m(a)._overflowWeekday=!0:(h=va(c,d,e,f,g),a._a[ae]=h.year,a._dayOfYear=h.dayOfYear)}function kb(b){if(b._f===a.ISO_8601)return void eb(b);b._a=[],m(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=Y(b._f,b._locale).match(Fd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match($(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&m(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Id[f]?(d?m(b).empty=!1:m(b).unusedTokens.push(f),da(f,d,b)):b._strict&&!d&&m(b).unusedTokens.push(f);m(b).charsLeftOver=i-j,h.length>0&&m(b).unusedInput.push(h),b._a[de]<=12&&m(b).bigHour===!0&&b._a[de]>0&&(m(b).bigHour=void 0),m(b).parsedDateParts=b._a.slice(0),m(b).meridiem=b._meridiem,b._a[de]=lb(b._locale,b._a[de],b._meridiem),ib(b),db(b)}function lb(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function mb(a){var b,c,d,e,f;if(0===a._f.length)return m(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=q({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],kb(b),n(b)&&(f+=m(b).charsLeftOver,f+=10*m(b).unusedTokens.length,m(b).score=f,(null==d||d>f)&&(d=f,c=b));j(a,c||b)}function nb(a){if(!a._d){var b=L(a._i);a._a=h([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ib(a)}}function ob(a){var b=new r(db(pb(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function pb(a){var b=a._i,d=a._f;return a._locale=a._locale||bb(a._l),null===b||void 0===d&&""===b?o({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),s(b)?new r(db(b)):(g(b)?a._d=b:c(d)?mb(a):d?kb(a):qb(a),n(a)||(a._d=null),a))}function qb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):g(d)?b._d=new Date(d.valueOf()):"string"==typeof d?fb(b):c(d)?(b._a=h(d.slice(0),function(a){return parseInt(a,10)}),ib(b)):"object"==typeof d?nb(b):f(d)?b._d=new Date(d):a.createFromInputFallback(b)}function rb(a,b,f,g,h){var i={};return f!==!0&&f!==!1||(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,ob(i)}function sb(a,b,c,d){return rb(a,b,c,d,!1)}function tb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return sb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}function ub(){var a=[].slice.call(arguments,0);return tb("isBefore",a)}function vb(){var a=[].slice.call(arguments,0);return tb("isAfter",a)}function wb(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=bb(),this._bubble()}function xb(a){return a instanceof wb}function yb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function zb(a,b){U(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+T(~~(a/60),2)+b+T(~~a%60,2)})}function Ab(a,b){var c=(b||"").match(a);if(null===c)return null;var d=c[c.length-1]||[],e=(d+"").match(Me)||["-",0,0],f=+(60*e[1])+u(e[2]);return 0===f?0:"+"===e[0]?f:-f}function Bb(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(s(b)||g(b)?b.valueOf():sb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):sb(b).local()}function Cb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Db(b,c){var d,e=this._offset||0;if(!this.isValid())return null!=b?this:NaN;if(null!=b){if("string"==typeof b){if(b=Ab(Xd,b),null===b)return this}else Math.abs(b)<16&&(b=60*b);return!this._isUTC&&c&&(d=Cb(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?Tb(this,Ob(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?e:Cb(this)}function Eb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Fb(a){return this.utcOffset(0,a)}function Gb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Cb(this),"m")),this}function Hb(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var a=Ab(Wd,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this}function Ib(a){return!!this.isValid()&&(a=a?sb(a).utcOffset():0,(this.utcOffset()-a)%60===0)}function Jb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Kb(){if(!p(this._isDSTShifted))return this._isDSTShifted;var a={};if(q(a,this),a=pb(a),a._a){var b=a._isUTC?k(a._a):sb(a._a);this._isDSTShifted=this.isValid()&&v(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Lb(){return!!this.isValid()&&!this._isUTC}function Mb(){return!!this.isValid()&&this._isUTC}function Nb(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ob(a,b){var c,d,e,g=a,h=null;return xb(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:f(a)?(g={},b?g[b]=a:g.milliseconds=a):(h=Ne.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:u(h[ce])*c,h:u(h[de])*c,m:u(h[ee])*c,s:u(h[fe])*c,ms:u(yb(1e3*h[ge]))*c}):(h=Oe.exec(a))?(c="-"===h[1]?-1:1,g={y:Pb(h[2],c),M:Pb(h[3],c),w:Pb(h[4],c),d:Pb(h[5],c),h:Pb(h[6],c),m:Pb(h[7],c),s:Pb(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=Rb(sb(g.from),sb(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new wb(g),xb(a)&&i(a,"_locale")&&(d._locale=a._locale),d}function Pb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Qb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Rb(a,b){var c;return a.isValid()&&b.isValid()?(b=Bb(b,a),a.isBefore(b)?c=Qb(a,b):(c=Qb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Sb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(y(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ob(c,d),Tb(this,e,a),this}}function Tb(b,c,d,e){var f=c._milliseconds,g=yb(c._days),h=yb(c._months);b.isValid()&&(e=null==e||e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&Q(b,"Date",P(b,"Date")+g*d),h&&ja(b,P(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function Ub(a,b){var c=a.diff(b,"days",!0);return-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse"}function Vb(b,c){var d=b||sb(),e=Bb(d,this).startOf("day"),f=a.calendarFormat(this,e)||"sameElse",g=c&&(z(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,sb(d)))}function Wb(){return new r(this)}function Xb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf())}function Yb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf())}function Zb(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function $b(a,b){var c,d=s(a)?a:sb(a);return!(!this.isValid()||!d.isValid())&&(b=K(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()))}function _b(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function ac(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function bc(a,b,c){var d,e,f,g;return this.isValid()?(d=Bb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=K(b),"year"===b||"month"===b||"quarter"===b?(g=cc(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:t(g)):NaN):NaN}function cc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function dc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ec(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?z(Date.prototype.toISOString)?this.toDate().toISOString():X(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fc(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var c="["+a+'("]',d=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",e="-MM-DD[T]HH:mm:ss.SSS",f=b+'[")]';return this.format(c+d+e+f)}function gc(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=X(this,b);return this.localeData().postformat(c)}function hc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.from(sb(),a)}function jc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function kc(a){return this.to(sb(),a)}function lc(a){var b;return void 0===a?this._locale._abbr:(b=bb(a),null!=b&&(this._locale=b),this)}function mc(){return this._locale}function nc(a){switch(a=K(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function oc(a){return a=K(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function pc(){return this._d.valueOf()-6e4*(this._offset||0)}function qc(){return Math.floor(this.valueOf()/1e3)}function rc(){return new Date(this.valueOf())}function sc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function tc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function uc(){return this.isValid()?this.toISOString():null}function vc(){return n(this)}function wc(){return j({},m(this))}function xc(){return m(this).overflow}function yc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function zc(a,b){U(0,[a,a.length],0,b)}function Ac(a){return Ec.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bc(a){return Ec.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Cc(){return xa(this.year(),1,4)}function Dc(){var a=this.localeData()._week;return xa(this.year(),a.dow,a.doy)}function Ec(a,b,c,d,e){var f;return null==a?wa(this,d,e).year:(f=xa(a,d,e),b>f&&(b=f),Fc.call(this,a,b,c,d,e))}function Fc(a,b,c,d,e){var f=va(a,b,c,d,e),g=ta(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Gc(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Hc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Ic(a,b){b[ge]=u(1e3*("0."+a))}function Jc(){return this._isUTC?"UTC":""}function Kc(){return this._isUTC?"Coordinated Universal Time":""}function Lc(a){return sb(1e3*a)}function Mc(){return sb.apply(null,arguments).parseZone()}function Nc(a){return a}function Oc(a,b,c,d){var e=bb(),f=k().set(d,b);return e[c](f,a)}function Pc(a,b,c){if(f(a)&&(b=a,a=void 0),a=a||"",null!=b)return Oc(a,b,c,"month");var d,e=[];for(d=0;12>d;d++)e[d]=Oc(a,d,c,"month");return e}
function Qc(a,b,c,d){"boolean"==typeof a?(f(b)&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,f(b)&&(c=b,b=void 0),b=b||"");var e=bb(),g=a?e._week.dow:0;if(null!=c)return Oc(b,(c+g)%7,d,"day");var h,i=[];for(h=0;7>h;h++)i[h]=Oc(b,(h+g)%7,d,"day");return i}function Rc(a,b){return Pc(a,b,"months")}function Sc(a,b){return Pc(a,b,"monthsShort")}function Tc(a,b,c){return Qc(a,b,c,"weekdays")}function Uc(a,b,c){return Qc(a,b,c,"weekdaysShort")}function Vc(a,b,c){return Qc(a,b,c,"weekdaysMin")}function Wc(){var a=this._data;return this._milliseconds=Ze(this._milliseconds),this._days=Ze(this._days),this._months=Ze(this._months),a.milliseconds=Ze(a.milliseconds),a.seconds=Ze(a.seconds),a.minutes=Ze(a.minutes),a.hours=Ze(a.hours),a.months=Ze(a.months),a.years=Ze(a.years),this}function Xc(a,b,c,d){var e=Ob(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Yc(a,b){return Xc(this,a,b,1)}function Zc(a,b){return Xc(this,a,b,-1)}function $c(a){return 0>a?Math.floor(a):Math.ceil(a)}function _c(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*$c(bd(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=t(f/1e3),i.seconds=a%60,b=t(a/60),i.minutes=b%60,c=t(b/60),i.hours=c%24,g+=t(c/24),e=t(ad(g)),h+=e,g-=$c(bd(e)),d=t(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function ad(a){return 4800*a/146097}function bd(a){return 146097*a/4800}function cd(a){var b,c,d=this._milliseconds;if(a=K(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+ad(b),"month"===a?c:c/12;switch(b=this._days+Math.round(bd(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function dd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*u(this._months/12)}function ed(a){return function(){return this.as(a)}}function fd(a){return a=K(a),this[a+"s"]()}function gd(a){return function(){return this._data[a]}}function hd(){return t(this.days()/7)}function id(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function jd(a,b,c){var d=Ob(a).abs(),e=of(d.as("s")),f=of(d.as("m")),g=of(d.as("h")),h=of(d.as("d")),i=of(d.as("M")),j=of(d.as("y")),k=e<pf.s&&["s",e]||1>=f&&["m"]||f<pf.m&&["mm",f]||1>=g&&["h"]||g<pf.h&&["hh",g]||1>=h&&["d"]||h<pf.d&&["dd",h]||1>=i&&["M"]||i<pf.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,id.apply(null,k)}function kd(a){return void 0===a?of:"function"==typeof a&&(of=a,!0)}function ld(a,b){return void 0!==pf[a]&&(void 0===b?pf[a]:(pf[a]=b,!0))}function md(a){var b=this.localeData(),c=jd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function nd(){var a,b,c,d=qf(this._milliseconds)/1e3,e=qf(this._days),f=qf(this._months);a=t(d/60),b=t(a/60),d%=60,a%=60,c=t(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var od,pd;pd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;c>d;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var qd=pd,rd=a.momentProperties=[],sd=!1,td={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var ud;ud=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)i(a,b)&&c.push(b);return c};var vd,wd=ud,xd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},yd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},zd="Invalid date",Ad="%d",Bd=/\d{1,2}/,Cd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Dd={},Ed={},Fd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Gd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hd={},Id={},Jd=/\d/,Kd=/\d\d/,Ld=/\d{3}/,Md=/\d{4}/,Nd=/[+-]?\d{6}/,Od=/\d\d?/,Pd=/\d\d\d\d?/,Qd=/\d\d\d\d\d\d?/,Rd=/\d{1,3}/,Sd=/\d{1,4}/,Td=/[+-]?\d{1,6}/,Ud=/\d+/,Vd=/[+-]?\d+/,Wd=/Z|[+-]\d\d:?\d\d/gi,Xd=/Z|[+-]\d\d(?::?\d\d)?/gi,Yd=/[+-]?\d+(\.\d{1,3})?/,Zd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$d={},_d={},ae=0,be=1,ce=2,de=3,ee=4,fe=5,ge=6,he=7,ie=8;vd=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};var je=vd;U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),U("MMMM",0,0,function(a){return this.localeData().months(this,a)}),J("month","M"),M("month",8),Z("M",Od),Z("MM",Od,Kd),Z("MMM",function(a,b){return b.monthsShortRegex(a)}),Z("MMMM",function(a,b){return b.monthsRegex(a)}),ba(["M","MM"],function(a,b){b[be]=u(a)-1}),ba(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[be]=e:m(c).invalidMonth=a});var ke=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,le="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),me="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ne=Zd,oe=Zd;U("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),J("year","y"),M("year",1),Z("Y",Vd),Z("YY",Od,Kd),Z("YYYY",Sd,Md),Z("YYYYY",Td,Nd),Z("YYYYYY",Td,Nd),ba(["YYYYY","YYYYYY"],ae),ba("YYYY",function(b,c){c[ae]=2===b.length?a.parseTwoDigitYear(b):u(b)}),ba("YY",function(b,c){c[ae]=a.parseTwoDigitYear(b)}),ba("Y",function(a,b){b[ae]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return u(a)+(u(a)>68?1900:2e3)};var pe=O("FullYear",!0);U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),M("week",5),M("isoWeek",5),Z("w",Od),Z("ww",Od,Kd),Z("W",Od),Z("WW",Od,Kd),ca(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=u(a)});var qe={dow:0,doy:6};U("d",0,"do","day"),U("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),U("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),U("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),M("day",11),M("weekday",11),M("isoWeekday",11),Z("d",Od),Z("e",Od),Z("E",Od),Z("dd",function(a,b){return b.weekdaysMinRegex(a)}),Z("ddd",function(a,b){return b.weekdaysShortRegex(a)}),Z("dddd",function(a,b){return b.weekdaysRegex(a)}),ca(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:m(c).invalidWeekday=a}),ca(["d","e","E"],function(a,b,c,d){b[d]=u(a)});var re="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),se="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),te="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ue=Zd,ve=Zd,we=Zd;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Ra),U("k",["kk",2],0,Sa),U("hmm",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),Ta("a",!0),Ta("A",!1),J("hour","h"),M("hour",13),Z("a",Ua),Z("A",Ua),Z("H",Od),Z("h",Od),Z("HH",Od,Kd),Z("hh",Od,Kd),Z("hmm",Pd),Z("hmmss",Qd),Z("Hmm",Pd),Z("Hmmss",Qd),ba(["H","HH"],de),ba(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),ba(["h","hh"],function(a,b,c){b[de]=u(a),m(c).bigHour=!0}),ba("hmm",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d)),m(c).bigHour=!0}),ba("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e)),m(c).bigHour=!0}),ba("Hmm",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d))}),ba("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e))});var xe,ye=/[ap]\.?m?\.?/i,ze=O("Hours",!0),Ae={calendar:xd,longDateFormat:yd,invalidDate:zd,ordinal:Ad,ordinalParse:Bd,relativeTime:Cd,months:le,monthsShort:me,week:qe,weekdays:re,weekdaysMin:te,weekdaysShort:se,meridiemParse:ye},Be={},Ce={},De=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ee=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fe=/Z|[+-]\d\d(?::?\d\d)?/,Ge=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],He=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ie=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=x("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),a.ISO_8601=function(){};var Je=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:o()}),Ke=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:o()}),Le=function(){return Date.now?Date.now():+new Date};zb("Z",":"),zb("ZZ",""),Z("Z",Xd),Z("ZZ",Xd),ba(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ab(Xd,a)});var Me=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Ne=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Oe=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ob.fn=wb.prototype;var Pe=Sb(1,"add"),Qe=Sb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Re=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),zc("gggg","weekYear"),zc("ggggg","weekYear"),zc("GGGG","isoWeekYear"),zc("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),M("weekYear",1),M("isoWeekYear",1),Z("G",Vd),Z("g",Vd),Z("GG",Od,Kd),Z("gg",Od,Kd),Z("GGGG",Sd,Md),Z("gggg",Sd,Md),Z("GGGGG",Td,Nd),Z("ggggg",Td,Nd),ca(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=u(a)}),ca(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),U("Q",0,"Qo","quarter"),J("quarter","Q"),M("quarter",7),Z("Q",Jd),ba("Q",function(a,b){b[be]=3*(u(a)-1)}),U("D",["DD",2],"Do","date"),J("date","D"),M("date",9),Z("D",Od),Z("DD",Od,Kd),Z("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),ba(["D","DD"],ce),ba("Do",function(a,b){b[ce]=u(a.match(Od)[0],10)});var Se=O("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),M("dayOfYear",4),Z("DDD",Rd),Z("DDDD",Ld),ba(["DDD","DDDD"],function(a,b,c){c._dayOfYear=u(a)}),U("m",["mm",2],0,"minute"),J("minute","m"),M("minute",14),Z("m",Od),Z("mm",Od,Kd),ba(["m","mm"],ee);var Te=O("Minutes",!1);U("s",["ss",2],0,"second"),J("second","s"),M("second",15),Z("s",Od),Z("ss",Od,Kd),ba(["s","ss"],fe);var Ue=O("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),J("millisecond","ms"),M("millisecond",16),Z("S",Rd,Jd),Z("SS",Rd,Kd),Z("SSS",Rd,Ld);var Ve;for(Ve="SSSS";Ve.length<=9;Ve+="S")Z(Ve,Ud);for(Ve="S";Ve.length<=9;Ve+="S")ba(Ve,Ic);var We=O("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var Xe=r.prototype;Xe.add=Pe,Xe.calendar=Vb,Xe.clone=Wb,Xe.diff=bc,Xe.endOf=oc,Xe.format=gc,Xe.from=hc,Xe.fromNow=ic,Xe.to=jc,Xe.toNow=kc,Xe.get=R,Xe.invalidAt=xc,Xe.isAfter=Xb,Xe.isBefore=Yb,Xe.isBetween=Zb,Xe.isSame=$b,Xe.isSameOrAfter=_b,Xe.isSameOrBefore=ac,Xe.isValid=vc,Xe.lang=Re,Xe.locale=lc,Xe.localeData=mc,Xe.max=Ke,Xe.min=Je,Xe.parsingFlags=wc,Xe.set=S,Xe.startOf=nc,Xe.subtract=Qe,Xe.toArray=sc,Xe.toObject=tc,Xe.toDate=rc,Xe.toISOString=ec,Xe.inspect=fc,Xe.toJSON=uc,Xe.toString=dc,Xe.unix=qc,Xe.valueOf=pc,Xe.creationData=yc,Xe.year=pe,Xe.isLeapYear=ra,Xe.weekYear=Ac,Xe.isoWeekYear=Bc,Xe.quarter=Xe.quarters=Gc,Xe.month=ka,Xe.daysInMonth=la,Xe.week=Xe.weeks=Ba,Xe.isoWeek=Xe.isoWeeks=Ca,Xe.weeksInYear=Dc,Xe.isoWeeksInYear=Cc,Xe.date=Se,Xe.day=Xe.days=Ka,Xe.weekday=La,Xe.isoWeekday=Ma,Xe.dayOfYear=Hc,Xe.hour=Xe.hours=ze,Xe.minute=Xe.minutes=Te,Xe.second=Xe.seconds=Ue,Xe.millisecond=Xe.milliseconds=We,Xe.utcOffset=Db,Xe.utc=Fb,Xe.local=Gb,Xe.parseZone=Hb,Xe.hasAlignedHourOffset=Ib,Xe.isDST=Jb,Xe.isLocal=Lb,Xe.isUtcOffset=Mb,Xe.isUtc=Nb,Xe.isUTC=Nb,Xe.zoneAbbr=Jc,Xe.zoneName=Kc,Xe.dates=x("dates accessor is deprecated. Use date instead.",Se),Xe.months=x("months accessor is deprecated. Use month instead",ka),Xe.years=x("years accessor is deprecated. Use year instead",pe),Xe.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Eb),Xe.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Kb);var Ye=C.prototype;Ye.calendar=D,Ye.longDateFormat=E,Ye.invalidDate=F,Ye.ordinal=G,Ye.preparse=Nc,Ye.postformat=Nc,Ye.relativeTime=H,Ye.pastFuture=I,Ye.set=A,Ye.months=fa,Ye.monthsShort=ga,Ye.monthsParse=ia,Ye.monthsRegex=na,Ye.monthsShortRegex=ma,Ye.week=ya,Ye.firstDayOfYear=Aa,Ye.firstDayOfWeek=za,Ye.weekdays=Fa,Ye.weekdaysMin=Ha,Ye.weekdaysShort=Ga,Ye.weekdaysParse=Ja,Ye.weekdaysRegex=Na,Ye.weekdaysShortRegex=Oa,Ye.weekdaysMinRegex=Pa,Ye.isPM=Va,Ye.meridiem=Wa,$a("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=x("moment.lang is deprecated. Use moment.locale instead.",$a),a.langData=x("moment.langData is deprecated. Use moment.localeData instead.",bb);var Ze=Math.abs,$e=ed("ms"),_e=ed("s"),af=ed("m"),bf=ed("h"),cf=ed("d"),df=ed("w"),ef=ed("M"),ff=ed("y"),gf=gd("milliseconds"),hf=gd("seconds"),jf=gd("minutes"),kf=gd("hours"),lf=gd("days"),mf=gd("months"),nf=gd("years"),of=Math.round,pf={s:45,m:45,h:22,d:26,M:11},qf=Math.abs,rf=wb.prototype;return rf.abs=Wc,rf.add=Yc,rf.subtract=Zc,rf.as=cd,rf.asMilliseconds=$e,rf.asSeconds=_e,rf.asMinutes=af,rf.asHours=bf,rf.asDays=cf,rf.asWeeks=df,rf.asMonths=ef,rf.asYears=ff,rf.valueOf=dd,rf._bubble=_c,rf.get=fd,rf.milliseconds=gf,rf.seconds=hf,rf.minutes=jf,rf.hours=kf,rf.days=lf,rf.weeks=hd,rf.months=mf,rf.years=nf,rf.humanize=md,rf.toISOString=nd,rf.toString=nd,rf.toJSON=nd,rf.locale=lc,rf.localeData=mc,rf.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nd),rf.lang=Re,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Z("x",Vd),Z("X",Yd),ba("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),ba("x",function(a,b,c){c._d=new Date(u(a))}),a.version="2.17.1",b(sb),a.fn=Xe,a.min=ub,a.max=vb,a.now=Le,a.utc=k,a.unix=Lc,a.months=Rc,a.isDate=g,a.locale=$a,a.invalid=o,a.duration=Ob,a.isMoment=s,a.weekdays=Tc,a.parseZone=Mc,a.localeData=bb,a.isDuration=xb,a.monthsShort=Sc,a.weekdaysMin=Vc,a.defineLocale=_a,a.updateLocale=ab,a.locales=cb,a.weekdaysShort=Uc,a.normalizeUnits=K,a.relativeTimeRounding=kd,a.relativeTimeThreshold=ld,a.calendarFormat=Ub,a.prototype=Xe,a}),!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):a.hasOwnProperty("angular")?b(a.angular):"object"==typeof exports&&(module.exports=b(require("angular")))}(this,function(a){"use strict";function b(a,b){var c;try{c=a[b]}catch(d){c=!1}if(c){var e="__"+Math.round(1e7*Math.random());try{a[b].setItem(e,e),a[b].removeItem(e,e)}catch(d){c=!1}}return c}function c(c){var d=b(window,c);return function(){var e="ngStorage-";this.setKeyPrefix=function(a){if("string"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setKeyPrefix() expects a String.");e=a};var f=a.toJson,g=a.fromJson;this.setSerializer=function(a){if("function"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setSerializer expects a function.");f=a},this.setDeserializer=function(a){if("function"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setDeserializer expects a function.");g=a},this.supported=function(){return!!d},this.get=function(a){return d&&g(d.getItem(e+a))},this.set=function(a,b){return d&&d.setItem(e+a,f(b))},this.remove=function(a){d&&d.removeItem(e+a)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(d,h,i,j,k){var l,m,n=e.length,o=b(h,c),p=o||(i.warn("This browser does not support Web Storage!"),{setItem:a.noop,getItem:a.noop,removeItem:a.noop}),q={$default:function(b){for(var c in b)a.isDefined(q[c])||(q[c]=a.copy(b[c]));return q.$sync(),q},$reset:function(a){for(var b in q)"$"===b[0]||delete q[b]&&p.removeItem(e+b);return q.$default(a)},$sync:function(){for(var a,b=0,c=p.length;c>b;b++)(a=p.key(b))&&e===a.slice(0,n)&&(q[a.slice(n)]=g(p.getItem(a)))},$apply:function(){var b;if(m=null,!a.equals(q,l)){b=a.copy(l),a.forEach(q,function(c,d){a.isDefined(c)&&"$"!==d[0]&&(p.setItem(e+d,f(c)),delete b[d])});for(var c in b)p.removeItem(e+c);l=a.copy(q)}},$supported:function(){return!!o}};return q.$sync(),l=a.copy(q),d.$watch(function(){m||(m=j(q.$apply,100,!1))}),h.addEventListener&&h.addEventListener("storage",function(b){if(b.key){var c=k[0];c.hasFocus&&c.hasFocus()||e!==b.key.slice(0,n)||(b.newValue?q[b.key.slice(n)]=g(b.newValue):delete q[b.key.slice(n)],l=a.copy(q),d.$apply())}}),h.addEventListener&&h.addEventListener("beforeunload",function(){q.$apply()}),q}]}}return a=a&&a.module?a:window.angular,a.module("ngStorage",[]).provider("$localStorage",c("localStorage")).provider("$sessionStorage",c("sessionStorage"))}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.relativeDate=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b,c){var d=e(a,c);return function(a){var c=b||new Date;a instanceof Date||(a=new Date(a));var e=null,g=60,h=60*g,i=24*h,j=7*i,k=30*i,l=365*i;e=f(c,a),e>i&&j>e&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),e=f(c,a));var m=function(b,e){var f;return f="just_now"===b?b:c>=a?b+"_ago":b+"_from_now",d.instant(f,{time:e})};switch(!1){case!(30>e):return m("just_now");case!(g>e):return m("seconds",e);case!(2*g>e):return m("a_minute");case!(h>e):return m("minutes",Math.floor(e/g));case 1!==Math.floor(e/h):return m("an_hour");case!(i>e):return m("hours",Math.floor(e/h));case!(2*i>e):return m("a_day");case!(j>e):return m("days",Math.floor(e/i));case 1!==Math.floor(e/j):return m("a_week");case!(k>e):return m("weeks",Math.floor(e/j));case 1!==Math.floor(e/k):return m("a_month");case!(l>e):return m("months",Math.floor(e/k));case 1!==Math.floor(e/l):return m("a_year");case Math.floor(e/l)<=1:return m("years",Math.floor(e/l));default:return m("over_a_year")}}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var e=function(a,b){return a.has("$translate")?a.get("$translate"):{instant:function(a,c){return b[a].replace("{{time}}",c.time)}}},f=function(a,b){return Math.round(Math.abs(a-b)/1e3)}},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./translations"),f=d(e),g=a("./filter"),h=d(g),i=angular.module("relativeDate",[]);i.value("now",null),i.value("relativeDateTranslations",f["default"]),i.filter("relativeDate",["$injector","now","relativeDateTranslations",h["default"]]),c["default"]=i},{"./filter":1,"./translations":3}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={just_now:"just now",seconds_ago:"{{time}} seconds ago",a_minute_ago:"a minute ago",minutes_ago:"{{time}} minutes ago",an_hour_ago:"an hour ago",hours_ago:"{{time}} hours ago",a_day_ago:"yesterday",days_ago:"{{time}} days ago",a_week_ago:"a week ago",weeks_ago:"{{time}} weeks ago",a_month_ago:"a month ago",months_ago:"{{time}} months ago",a_year_ago:"a year ago",years_ago:"{{time}} years ago",over_a_year_ago:"over a year ago",seconds_from_now:"{{time}} seconds from now",a_minute_from_now:"a minute from now",minutes_from_now:"{{time}} minutes from now",an_hour_from_now:"an hour from now",hours_from_now:"{{time}} hours from now",a_day_from_now:"tomorrow",days_from_now:"{{time}} days from now",a_week_from_now:"a week from now",weeks_from_now:"{{time}} weeks from now",a_month_from_now:"a month from now",months_from_now:"{{time}} months from now",a_year_from_now:"a year from now",years_from_now:"{{time}} years from now",over_a_year_from_now:"over a year from now"}},{}]},{},[2])(2)}),!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},
init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.7",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer"),function(){function a(a,b){return a.set(b[0],b[1]),a}function b(a,b){return a.add(b),a}function c(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function d(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function e(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function f(a,b){for(var c=null==a?0:a.length;c--&&!1!==b(a[c],c,a););return a}function g(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function h(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function i(a,b){return!(null==a||!a.length)&&-1<r(a,b,0)}function j(a,b,c){for(var d=-1,e=null==a?0:a.length;++d<e;)if(c(b,a[d]))return!0;return!1}function k(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function l(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function m(a,b,c,d){var e=-1,f=null==a?0:a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function n(a,b,c,d){var e=null==a?0:a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function o(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function p(a,b,c){var d;return c(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function q(a,b,c,d){var e=a.length;for(c+=d?1:-1;d?c--:++c<e;)if(b(a[c],c,a))return c;return-1}function r(a,b,c){if(b===b)a:{--c;for(var d=a.length;++c<d;)if(a[c]===b){a=c;break a}a=-1}else a=q(a,t,c);return a}function s(a,b,c,d){--c;for(var e=a.length;++c<e;)if(d(a[c],b))return c;return-1}function t(a){return a!==a}function u(a,b){var c=null==a?0:a.length;return c?z(a,b)/c:R}function v(a){return function(b){return null==b?P:b[a]}}function w(a){return function(b){return null==a?P:a[b]}}function x(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function y(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].c;return a}function z(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==P&&(c=c===P?f:c+f)}return c}function A(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function B(a,b){return k(b,function(b){return[b,a[b]]})}function C(a){return function(b){return a(b)}}function D(a,b){return k(b,function(b){return a[b]})}function E(a,b){return a.has(b)}function F(a,b){for(var c=-1,d=a.length;++c<d&&-1<r(b,a[c],0););return c}function G(a,b){for(var c=a.length;c--&&-1<r(b,a[c],0););return c}function H(a){return"\\"+Ma[a]}function I(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function J(a,b){return function(c){return a(b(c))}}function K(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];g!==b&&"__lodash_placeholder__"!==g||(a[c]="__lodash_placeholder__",f[e++]=c)}return f}function L(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function M(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function N(a){if(Ga.test(a)){for(var b=Ea.lastIndex=0;Ea.test(a);)++b;a=b}else a=ab(a);return a}function O(a){return Ga.test(a)?a.match(Ea)||[]:a.split("")}var P,Q=1/0,R=NaN,S=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],T=/\b__p\+='';/g,U=/\b(__p\+=)''\+/g,V=/(__e\(.*?\)|\b__t\))\+'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,Y=RegExp(W.source),Z=RegExp(X.source),$=/<%-([\s\S]+?)%>/g,_=/<%([\s\S]+?)%>/g,aa=/<%=([\s\S]+?)%>/g,ba=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ca=/^\w*$/,da=/^\./,ea=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fa=/[\\^$.*+?()[\]{}|]/g,ga=RegExp(fa.source),ha=/^\s+|\s+$/g,ia=/^\s+/,ja=/\s+$/,ka=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,la=/\{\n\/\* \[wrapped with (.+)\] \*/,ma=/,? & /,na=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oa=/\\(\\)?/g,pa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qa=/\w*$/,ra=/^[-+]0x[0-9a-f]+$/i,sa=/^0b[01]+$/i,ta=/^\[object .+?Constructor\]$/,ua=/^0o[0-7]+$/i,va=/^(?:0|[1-9]\d*)$/,wa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xa=/($^)/,ya=/['\n\r\u2028\u2029\\]/g,za="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",Aa="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+za,Ba="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",Ca=RegExp("['’]","g"),Da=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Ea=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+Ba+za,"g"),Fa=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+",Aa].join("|"),"g"),Ga=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ha=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ia="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Ja={};Ja["[object Float32Array]"]=Ja["[object Float64Array]"]=Ja["[object Int8Array]"]=Ja["[object Int16Array]"]=Ja["[object Int32Array]"]=Ja["[object Uint8Array]"]=Ja["[object Uint8ClampedArray]"]=Ja["[object Uint16Array]"]=Ja["[object Uint32Array]"]=!0,Ja["[object Arguments]"]=Ja["[object Array]"]=Ja["[object ArrayBuffer]"]=Ja["[object Boolean]"]=Ja["[object DataView]"]=Ja["[object Date]"]=Ja["[object Error]"]=Ja["[object Function]"]=Ja["[object Map]"]=Ja["[object Number]"]=Ja["[object Object]"]=Ja["[object RegExp]"]=Ja["[object Set]"]=Ja["[object String]"]=Ja["[object WeakMap]"]=!1;var Ka={};Ka["[object Arguments]"]=Ka["[object Array]"]=Ka["[object ArrayBuffer]"]=Ka["[object DataView]"]=Ka["[object Boolean]"]=Ka["[object Date]"]=Ka["[object Float32Array]"]=Ka["[object Float64Array]"]=Ka["[object Int8Array]"]=Ka["[object Int16Array]"]=Ka["[object Int32Array]"]=Ka["[object Map]"]=Ka["[object Number]"]=Ka["[object Object]"]=Ka["[object RegExp]"]=Ka["[object Set]"]=Ka["[object String]"]=Ka["[object Symbol]"]=Ka["[object Uint8Array]"]=Ka["[object Uint8ClampedArray]"]=Ka["[object Uint16Array]"]=Ka["[object Uint32Array]"]=!0,Ka["[object Error]"]=Ka["[object Function]"]=Ka["[object WeakMap]"]=!1;var La,Ma={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Na=parseFloat,Oa=parseInt,Pa="object"==typeof global&&global&&global.Object===Object&&global,Qa="object"==typeof self&&self&&self.Object===Object&&self,Ra=Pa||Qa||Function("return this")(),Sa="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ta=Sa&&"object"==typeof module&&module&&!module.nodeType&&module,Ua=Ta&&Ta.exports===Sa,Va=Ua&&Pa.process;a:{try{La=Va&&Va.binding&&Va.binding("util");break a}catch(a){}La=void 0}var Wa=La&&La.isArrayBuffer,Xa=La&&La.isDate,Ya=La&&La.isMap,Za=La&&La.isRegExp,$a=La&&La.isSet,_a=La&&La.isTypedArray,ab=v("length"),bb=w({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),cb=w({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),db=w({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),eb=function fb(w){function za(a){if(te(a)&&!hh(a)&&!(a instanceof Ea)){if(a instanceof Ba)return a;if(hf.call(a,"__wrapped__"))return Qd(a)}return new Ba(a)}function Aa(){}function Ba(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=P}function Ea(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function La(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Ma(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Pa(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Qa(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new Pa;++b<c;)this.add(a[b])}function Sa(a){this.size=(this.__data__=new Ma(a)).size}function Ta(a,b){var c,d=hh(a),e=!d&&gh(a),f=!d&&!e&&jh(a),g=!d&&!e&&!f&&oh(a),e=(d=d||e||f||g)?A(a.length,bf):[],h=e.length;for(c in a)!b&&!hf.call(a,c)||d&&("length"==c||f&&("offset"==c||"parent"==c)||g&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Dd(c,h))||e.push(c);return e}function Va(a){var b=a.length;return b?a[hc(0,b-1)]:P}function ab(a,b){return Md(Lc(a),pb(b,0,a.length))}function gb(a){return Md(Lc(a))}function hb(a,b,c){(c===P||le(a[b],c))&&(c!==P||b in a)||nb(a,b,c)}function ib(a,b,c){var d=a[b];hf.call(a,b)&&le(d,c)&&(c!==P||b in a)||nb(a,b,c)}function jb(a,b){for(var c=a.length;c--;)if(le(a[c][0],b))return c;return-1}function kb(a,b,c,d){return gg(a,function(a,e,f){b(d,a,c(a),f)}),d}function lb(a,b){return a&&Mc(b,He(b),a)}function mb(a,b){return a&&Mc(b,Ie(b),a)}function nb(a,b,c){"__proto__"==b&&Af?Af(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function ob(a,b){for(var c=-1,d=b.length,e=We(d),f=null==a;++c<d;)e[c]=f?P:Fe(a,b[c]);return e}function pb(a,b,c){return a===a&&(c!==P&&(a=c>=a?a:c),b!==P&&(a=a>=b?a:b)),a}function qb(a,b,c,d,f,g){var h,i=1&b,j=2&b,k=4&b;if(c&&(h=f?c(a,d,f,g):c(a)),h!==P)return h;if(!se(a))return a;if(d=hh(a)){if(h=zd(a),!i)return Lc(a,h)}else{var l=rg(a),m="[object Function]"==l||"[object GeneratorFunction]"==l;if(jh(a))return Fc(a,i);if("[object Object]"==l||"[object Arguments]"==l||m&&!f){if(h=j||m?{}:Ad(a),!i)return j?Oc(a,mb(h,a)):Nc(a,lb(h,a))}else{if(!Ka[l])return f?a:{};h=Bd(a,l,qb,i)}}if(g||(g=new Sa),f=g.get(a))return f;g.set(a,h);var j=k?j?rd:qd:j?Ie:He,n=d?P:j(a);return e(n||a,function(d,e){n&&(e=d,d=a[e]),ib(h,e,qb(d,b,c,e,a,g))}),h}function rb(a){var b=He(a);return function(c){return sb(c,a,b)}}function sb(a,b,c){var d=c.length;if(null==a)return!d;for(a=_e(a);d--;){var e=c[d],f=b[e],g=a[e];if(g===P&&!(e in a)||!f(g))return!1}return!0}function tb(a,b,c){if("function"!=typeof a)throw new cf("Expected a function");return ug(function(){a.apply(P,c)},b)}function ub(a,b,c,d){var e=-1,f=i,g=!0,h=a.length,l=[],m=b.length;if(!h)return l;c&&(b=k(b,C(c))),d?(f=j,g=!1):200<=b.length&&(f=E,g=!1,b=new Qa(b));a:for(;++e<h;){var n=a[e],o=null==c?n:c(n),n=d||0!==n?n:0;if(g&&o===o){for(var p=m;p--;)if(b[p]===o)continue a;l.push(n)}else f(b,o,d)||l.push(n)}return l}function vb(a,b){var c=!0;return gg(a,function(a,d,e){return c=!!b(a,d,e)}),c}function wb(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===P?g===g&&!xe(g):c(g,h)))var h=g,i=f}return i}function xb(a,b){var c=[];return gg(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function yb(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=Cd),e||(e=[]);++f<g;){var h=a[f];b>0&&c(h)?b>1?yb(h,b-1,c,d,e):l(e,h):d||(e[e.length]=h)}return e}function zb(a,b){return a&&ig(a,b,He)}function Ab(a,b){return a&&jg(a,b,He)}function Bb(a,b){return h(b,function(b){return pe(a[b])})}function Cb(a,b){b=Dc(b,a);for(var c=0,d=b.length;null!=a&&d>c;)a=a[Nd(b[c++])];return c&&c==d?a:P}function Db(a,b,c){return b=b(a),hh(a)?b:l(b,c(a))}function Eb(a){if(null==a)a=a===P?"[object Undefined]":"[object Null]";else if(zf&&zf in _e(a)){var b=hf.call(a,zf),c=a[zf];try{a[zf]=P;var d=!0}catch(a){}var e=lf.call(a);d&&(b?a[zf]=c:delete a[zf]),a=e}else a=lf.call(a);return a}function Fb(a,b){return a>b}function Gb(a,b){return null!=a&&hf.call(a,b)}function Hb(a,b){return null!=a&&b in _e(a)}function Ib(a,b,c){for(var d=c?j:i,e=a[0].length,f=a.length,g=f,h=We(f),l=1/0,m=[];g--;){var n=a[g];g&&b&&(n=k(n,C(b))),l=Mf(n.length,l),h[g]=!c&&(b||e>=120&&120<=n.length)?new Qa(g&&n):P}var n=a[0],o=-1,p=h[0];a:for(;++o<e&&m.length<l;){var q=n[o],r=b?b(q):q,q=c||0!==q?q:0;if(p?!E(p,r):!d(m,r,c)){for(g=f;--g;){var s=h[g];if(s?!E(s,r):!d(a[g],r,c))continue a}p&&p.push(r),m.push(q)}}return m}function Jb(a,b,c){var d={};return zb(a,function(a,e,f){b(d,c(a),e,f)}),d}function Kb(a,b,d){return b=Dc(b,a),a=2>b.length?a:Cb(a,oc(b,0,-1)),b=null==a?a:a[Nd(Vd(b))],null==b?P:c(b,a,d)}function Lb(a){return te(a)&&"[object Arguments]"==Eb(a)}function Mb(a){return te(a)&&"[object ArrayBuffer]"==Eb(a)}function Nb(a){return te(a)&&"[object Date]"==Eb(a)}function Ob(a,b,c,d,e){if(a===b)b=!0;else if(null==a||null==b||!te(a)&&!te(b))b=a!==a&&b!==b;else a:{var f=hh(a),g=hh(b),h=f?"[object Array]":rg(a),i=g?"[object Array]":rg(b),h="[object Arguments]"==h?"[object Object]":h,i="[object Arguments]"==i?"[object Object]":i,j="[object Object]"==h,g="[object Object]"==i;if((i=h==i)&&jh(a)){if(!jh(b)){b=!1;break a}f=!0,j=!1}if(i&&!j)e||(e=new Sa),b=f||oh(a)?nd(a,b,c,d,Ob,e):od(a,b,h,c,d,Ob,e);else{if(!(1&c)&&(f=j&&hf.call(a,"__wrapped__"),h=g&&hf.call(b,"__wrapped__"),f||h)){a=f?a.value():a,b=h?b.value():b,e||(e=new Sa),b=Ob(a,b,c,d,e);break a}if(i)b:if(e||(e=new Sa),f=1&c,h=qd(a),g=h.length,i=qd(b).length,g==i||f){for(j=g;j--;){var k=h[j];if(!(f?k in b:hf.call(b,k))){b=!1;break b}}if((i=e.get(a))&&e.get(b))b=i==b;else{i=!0,e.set(a,b),e.set(b,a);for(var l=f;++j<g;){var k=h[j],m=a[k],n=b[k];if(d)var o=f?d(n,m,k,b,a,e):d(m,n,k,a,b,e);if(o===P?m!==n&&!Ob(m,n,c,d,e):!o){i=!1;break}l||(l="constructor"==k)}i&&!l&&(c=a.constructor,d=b.constructor,c!=d&&"constructor"in a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)&&(i=!1)),e["delete"](a),e["delete"](b),b=i}}else b=!1;else b=!1}}return b}function Pb(a){return te(a)&&"[object Map]"==rg(a)}function Qb(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=_e(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){var h=c[e],i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===P&&!(i in a))return!1}else{if(h=new Sa,d)var l=d(j,k,i,a,b,h);if(l===P?!Ob(k,j,3,d,h):!l)return!1}}return!0}function Rb(a){return!(!se(a)||kf&&kf in a)&&(pe(a)?of:ta).test(Od(a))}function Sb(a){return te(a)&&"[object RegExp]"==Eb(a)}function Tb(a){return te(a)&&"[object Set]"==rg(a)}function Ub(a){return te(a)&&re(a.length)&&!!Ja[Eb(a)]}function Vb(a){return"function"==typeof a?a:null==a?Pe:"object"==typeof a?hh(a)?$b(a[0],a[1]):Zb(a):Te(a)}function Wb(a){if(!Hd(a))return Kf(a);var b,c=[];for(b in _e(a))hf.call(a,b)&&"constructor"!=b&&c.push(b);return c}function Xb(a,b){return b>a}function Yb(a,b){var c=-1,d=me(a)?We(a.length):[];return gg(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Zb(a){var b=wd(a);return 1==b.length&&b[0][2]?Id(b[0][0],b[0][1]):function(c){return c===a||Qb(c,a,b)}}function $b(a,b){return Fd(a)&&b===b&&!se(b)?Id(Nd(a),b):function(c){var d=Fe(c,a);return d===P&&d===b?Ge(c,a):Ob(b,d,3)}}function _b(a,b,c,d,e){a!==b&&ig(b,function(f,g){if(se(f)){e||(e=new Sa);var h=e,i=a[g],j=b[g],k=h.get(j);if(k)hb(a,g,k);else{var k=d?d(i,j,g+"",a,b,h):P,l=k===P;if(l){var m=hh(j),n=!m&&jh(j),o=!m&&!n&&oh(j),k=j;m||n||o?hh(i)?k=i:ne(i)?k=Lc(i):n?(l=!1,k=Fc(j,!0)):o?(l=!1,k=Hc(j,!0)):k=[]:ve(j)||gh(j)?(k=i,gh(i)?k=De(i):(!se(i)||c&&pe(i))&&(k=Ad(j))):l=!1}l&&(h.set(j,k),_b(k,j,c,d,h),h["delete"](j)),hb(a,g,k)}}else h=d?d(a[g],f,g+"",a,b,e):P,h===P&&(h=f),hb(a,g,h)},Ie)}function ac(a,b){var c=a.length;return c?(b+=0>b?c:0,Dd(b,c)?a[b]:P):void 0}function bc(a,b,c){var d=-1;return b=k(b.length?b:[Pe],C(ud())),a=Yb(a,function(a){return{a:k(b,function(b){return b(a)}),b:++d,c:a}}),y(a,function(a,b){var d;a:{d=-1;for(var e=a.a,f=b.a,g=e.length,h=c.length;++d<g;){var i=Ic(e[d],f[d]);if(i){d=d>=h?i:i*("desc"==c[d]?-1:1);break a}}d=a.b-b.b}return d})}function cc(a,b){return dc(a,b,function(b,c){return Ge(a,c)})}function dc(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=Cb(a,g);c(h,g)&&mc(f,Dc(g,a),h)}return f}function ec(a){return function(b){return Cb(b,a)}}function fc(a,b,c,d){var e=d?s:r,f=-1,g=b.length,h=a;for(a===b&&(b=Lc(b)),c&&(h=k(a,C(c)));++f<g;)for(var i=0,j=b[f],j=c?c(j):j;-1<(i=e(h,j,i,d));)h!==a&&wf.call(h,i,1),wf.call(a,i,1);return a}function gc(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;Dd(e)?wf.call(a,e,1):wc(a,e)}}}function hc(a,b){return a+Ff(Pf()*(b-a+1))}function ic(a,b){var c="";if(!a||1>b||b>9007199254740991)return c;do b%2&&(c+=a),(b=Ff(b/2))&&(a+=a);while(b);return c}function jc(a,b){return vg(Jd(a,b,Pe),a+"")}function kc(a){return Va(Ke(a))}function lc(a,b){var c=Ke(a);return Md(c,pb(b,0,c.length))}function mc(a,b,c,d){if(!se(a))return a;b=Dc(b,a);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=Nd(b[e]),j=c;if(e!=g){var k=h[i],j=d?d(k,i,h):P;j===P&&(j=se(k)?k:Dd(b[e+1])?[]:{})}ib(h,i,j),h=h[i]}return a}function nc(a){return Md(Ke(a))}function oc(a,b,c){var d=-1,e=a.length;for(0>b&&(b=-b>e?0:e+b),c=c>e?e:c,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0,c=We(e);++d<e;)c[d]=a[d+b];return c}function pc(a,b){var c;return gg(a,function(a,d,e){return c=b(a,d,e),
!c}),!!c}function qc(a,b,c){var d=0,e=null==a?d:a.length;if("number"==typeof b&&b===b&&2147483647>=e){for(;e>d;){var f=d+e>>>1,g=a[f];null!==g&&!xe(g)&&(c?b>=g:b>g)?d=f+1:e=f}return e}return rc(a,b,Pe,c)}function rc(a,b,c,d){b=c(b);for(var e=0,f=null==a?0:a.length,g=b!==b,h=null===b,i=xe(b),j=b===P;f>e;){var k=Ff((e+f)/2),l=c(a[k]),m=l!==P,n=null===l,o=l===l,p=xe(l);(g?d||o:j?o&&(d||m):h?o&&m&&(d||!n):i?o&&m&&!n&&(d||!p):n||p?0:d?b>=l:b>l)?e=k+1:f=k}return Mf(f,4294967294)}function sc(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!le(h,i)){var i=h;f[e++]=0===g?0:g}}return f}function tc(a){return"number"==typeof a?a:xe(a)?R:+a}function uc(a){if("string"==typeof a)return a;if(hh(a))return k(a,uc)+"";if(xe(a))return eg?eg.call(a):"";var b=a+"";return"0"==b&&1/a==-Q?"-0":b}function vc(a,b,c){var d=-1,e=i,f=a.length,g=!0,h=[],k=h;if(c)g=!1,e=j;else if(f>=200){if(e=b?null:ng(a))return L(e);g=!1,e=E,k=new Qa}else k=b?[]:h;a:for(;++d<f;){var l=a[d],m=b?b(l):l,l=c||0!==l?l:0;if(g&&m===m){for(var n=k.length;n--;)if(k[n]===m)continue a;b&&k.push(m),h.push(l)}else e(k,m,c)||(k!==h&&k.push(m),h.push(l))}return h}function wc(a,b){return b=Dc(b,a),a=2>b.length?a:Cb(a,oc(b,0,-1)),null==a||delete a[Nd(Vd(b))]}function xc(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?oc(a,d?0:f,d?f+1:e):oc(a,d?f+1:0,d?e:f)}function yc(a,b){var c=a;return c instanceof Ea&&(c=c.value()),m(b,function(a,b){return b.func.apply(b.thisArg,l([a],b.args))},c)}function zc(a,b,c){var d=a.length;if(2>d)return d?vc(a[0]):[];for(var e=-1,f=We(d);++e<d;)for(var g=a[e],h=-1;++h<d;)h!=e&&(f[e]=ub(f[e]||g,a[h],b,c));return vc(yb(f,1),b,c)}function Ac(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;)c(g,a[d],f>d?b[d]:P);return g}function Bc(a){return ne(a)?a:[]}function Cc(a){return"function"==typeof a?a:Pe}function Dc(a,b){return hh(a)?a:Fd(a,b)?[a]:wg(Ee(a))}function Ec(a,b,c){var d=a.length;return c=c===P?d:c,!b&&c>=d?a:oc(a,b,c)}function Fc(a,b){if(b)return a.slice();var c=a.length,c=sf?sf(c):new a.constructor(c);return a.copy(c),c}function Gc(a){var b=new a.constructor(a.byteLength);return new rf(b).set(new rf(a)),b}function Hc(a,b){return new a.constructor(b?Gc(a.buffer):a.buffer,a.byteOffset,a.length)}function Ic(a,b){if(a!==b){var c=a!==P,d=null===a,e=a===a,f=xe(a),g=b!==P,h=null===b,i=b===b,j=xe(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&b>a||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function Jc(a,b,c,d){var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=Lf(f-g,0),k=We(i+j);for(d=!d;++h<i;)k[h]=b[h];for(;++e<g;)(d||f>e)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function Kc(a,b,c,d){var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=Lf(f-h,0),l=We(k+j);for(d=!d;++e<k;)l[e]=a[e];for(k=e;++i<j;)l[k+i]=b[i];for(;++g<h;)(d||f>e)&&(l[k+c[g]]=a[e++]);return l}function Lc(a,b){var c=-1,d=a.length;for(b||(b=We(d));++c<d;)b[c]=a[c];return b}function Mc(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=d?d(c[h],a[h],h,c,a):P;i===P&&(i=a[h]),e?nb(c,h,i):ib(c,h,i)}return c}function Nc(a,b){return Mc(a,pg(a),b)}function Oc(a,b){return Mc(a,qg(a),b)}function Pc(a,b){return function(c,e){var f=hh(c)?d:kb,g=b?b():{};return f(c,a,ud(e,2),g)}}function Qc(a){return jc(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:P,g=e>2?c[2]:P,f=3<a.length&&"function"==typeof f?(e--,f):P;for(g&&Ed(c[0],c[1],g)&&(f=3>e?P:f,e=1),b=_e(b);++d<e;)(g=c[d])&&a(b,g,d,f);return b})}function Rc(a,b){return function(c,d){if(null==c)return c;if(!me(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=_e(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function Sc(a){return function(b,c,d){var e=-1,f=_e(b);d=d(b);for(var g=d.length;g--;){var h=d[a?g:++e];if(!1===c(f[h],h,f))break}return b}}function Tc(a,b,c){function d(){return(this&&this!==Ra&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=1&b,f=Wc(a);return d}function Uc(a){return function(b){b=Ee(b);var c=Ga.test(b)?O(b):P,d=c?c[0]:b.charAt(0);return b=c?Ec(c,1).join(""):b.slice(1),d[a]()+b}}function Vc(a){return function(b){return m(Ne(Me(b).replace(Ca,"")),a,"")}}function Wc(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=fg(a.prototype),b=a.apply(c,b);return se(b)?b:c}}function Xc(a,b,d){function e(){for(var g=arguments.length,h=We(g),i=g,j=td(e);i--;)h[i]=arguments[i];return i=3>g&&h[0]!==j&&h[g-1]!==j?[]:K(h,j),g-=i.length,d>g?gd(a,b,$c,e.placeholder,P,h,i,P,P,d-g):c(this&&this!==Ra&&this instanceof e?f:a,this,h)}var f=Wc(a);return e}function Yc(a){return function(b,c,d){var e=_e(b);if(!me(b)){var f=ud(c,3);b=He(b),c=function(a){return f(e[a],a,e)}}return c=a(b,c,d),c>-1?e[f?b[c]:c]:P}}function Zc(a){return pd(function(b){var c=b.length,d=c,e=Ba.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new cf("Expected a function");if(e&&!g&&"wrapper"==sd(f))var g=new Ba([],!0)}for(d=g?d:c;++d<c;)var f=b[d],e=sd(f),h="wrapper"==e?og(f):P,g=h&&Gd(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?g[sd(h[0])].apply(g,h[3]):1==f.length&&Gd(f)?g[e]():g.thru(f);return function(){var a=arguments,d=a[0];if(g&&1==a.length&&hh(d))return g.plant(d).value();for(var e=0,a=c?b[e].apply(this,a):d;++e<c;)a=b[e].call(this,a);return a}})}function $c(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=We(r),t=r;t--;)s[t]=arguments[t];if(o){var u,v=td(k),t=s.length;for(u=0;t--;)s[t]===v&&++u}if(d&&(s=Jc(s,d,e,o)),f&&(s=Kc(s,f,g,o)),r-=u,o&&j>r)return v=K(s,v),gd(a,b,$c,k.placeholder,c,s,v,h,i,j-r);if(v=m?c:this,t=n?v[a]:a,r=s.length,h){u=s.length;for(var w=Mf(h.length,u),x=Lc(s);w--;){var y=h[w];s[w]=Dd(y,u)?x[y]:P}}else p&&r>1&&s.reverse();return l&&r>i&&(s.length=i),this&&this!==Ra&&this instanceof k&&(t=q||Wc(t)),t.apply(v,s)}var l=128&b,m=1&b,n=2&b,o=24&b,p=512&b,q=n?P:Wc(a);return k}function _c(a,b){return function(c,d){return Jb(c,a,b(d))}}function ad(a,b){return function(c,d){var e;if(c===P&&d===P)return b;if(c!==P&&(e=c),d!==P){if(e===P)return d;"string"==typeof c||"string"==typeof d?(c=uc(c),d=uc(d)):(c=tc(c),d=tc(d)),e=a(c,d)}return e}}function bd(a){return pd(function(b){return b=k(b,C(ud())),jc(function(d){var e=this;return a(b,function(a){return c(a,e,d)})})})}function cd(a,b){b=b===P?" ":uc(b);var c=b.length;return 2>c?c?ic(b,a):b:(c=ic(b,Ef(a/N(b))),Ga.test(b)?Ec(O(c),0,a).join(""):c.slice(0,a))}function dd(a,b,d,e){function f(){for(var b=-1,i=arguments.length,j=-1,k=e.length,l=We(k+i),m=this&&this!==Ra&&this instanceof f?h:a;++j<k;)l[j]=e[j];for(;i--;)l[j++]=arguments[++b];return c(m,g?d:this,l)}var g=1&b,h=Wc(a);return f}function ed(a){return function(b,c,d){d&&"number"!=typeof d&&Ed(b,c,d)&&(c=d=P),b=ze(b),c===P?(c=b,b=0):c=ze(c),d=d===P?c>b?1:-1:ze(d);var e=-1;c=Lf(Ef((c-b)/(d||1)),0);for(var f=We(c);c--;)f[a?c:++e]=b,b+=d;return f}}function fd(a){return function(b,c){return"string"==typeof b&&"string"==typeof c||(b=Ce(b),c=Ce(c)),a(b,c)}}function gd(a,b,c,d,e,f,g,h,i,j){var k=8&b,l=k?g:P;g=k?P:g;var m=k?f:P;return f=k?P:f,b=(b|(k?32:64))&~(k?64:32),4&b||(b&=-4),e=[a,b,e,m,l,f,g,h,i,j],c=c.apply(P,e),Gd(a)&&tg(c,e),c.placeholder=d,Kd(c,a,b)}function hd(a){var b=$e[a];return function(a,c){if(a=Ce(a),c=null==c?0:Mf(Ae(c),292)){var d=(Ee(a)+"e").split("e"),d=b(d[0]+"e"+(+d[1]+c)),d=(Ee(d)+"e").split("e");return+(d[0]+"e"+(+d[1]-c))}return b(a)}}function id(a){return function(b){var c=rg(b);return"[object Map]"==c?I(b):"[object Set]"==c?M(b):B(b,a(b))}}function jd(a,b,c,d,e,f,g,h){var i=2&b;if(!i&&"function"!=typeof a)throw new cf("Expected a function");var j=d?d.length:0;if(j||(b&=-97,d=e=P),g=g===P?g:Lf(Ae(g),0),h=h===P?h:Ae(h),j-=e?e.length:0,64&b){var k=d,l=e;d=e=P}var m=i?P:og(a);return f=[a,b,c,d,e,k,l,f,g,h],m&&(c=f[1],a=m[1],b=c|a,d=128==a&&8==c||128==a&&256==c&&f[7].length<=m[8]||384==a&&m[7].length<=m[8]&&8==c,131>b||d)&&(1&a&&(f[2]=m[2],b|=1&c?0:4),(c=m[3])&&(d=f[3],f[3]=d?Jc(d,c,m[4]):c,f[4]=d?K(f[3],"__lodash_placeholder__"):m[4]),(c=m[5])&&(d=f[5],f[5]=d?Kc(d,c,m[6]):c,f[6]=d?K(f[5],"__lodash_placeholder__"):m[6]),(c=m[7])&&(f[7]=c),128&a&&(f[8]=null==f[8]?m[8]:Mf(f[8],m[8])),null==f[9]&&(f[9]=m[9]),f[0]=m[0],f[1]=b),a=f[0],b=f[1],c=f[2],d=f[3],e=f[4],h=f[9]=f[9]===P?i?0:a.length:Lf(f[9]-j,0),!h&&24&b&&(b&=-25),Kd((m?kg:tg)(b&&1!=b?8==b||16==b?Xc(a,b,h):32!=b&&33!=b||e.length?$c.apply(P,f):dd(a,b,c,d):Tc(a,b,c),f),a,b)}function kd(a,b,c,d){return a===P||le(a,ef[c])&&!hf.call(d,c)?b:a}function ld(a,b,c,d,e,f){return se(a)&&se(b)&&(f.set(b,a),_b(a,b,P,ld,f),f["delete"](b)),a}function md(a){return ve(a)?P:a}function nd(a,b,c,d,e,f){var g=1&c,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;if((i=f.get(a))&&f.get(b))return i==b;var i=-1,j=!0,k=2&c?new Qa:P;for(f.set(a,b),f.set(b,a);++i<h;){var l=a[i],m=b[i];if(d)var n=g?d(m,l,i,b,a,f):d(l,m,i,a,b,f);if(n!==P){if(n)continue;j=!1;break}if(k){if(!o(b,function(a,b){return E(k,b)||l!==a&&!e(l,a,c,d,f)?void 0:k.push(b)})){j=!1;break}}else if(l!==m&&!e(l,m,c,d,f)){j=!1;break}}return f["delete"](a),f["delete"](b),j}function od(a,b,c,d,e,f,g){switch(c){case"[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer,b=b.buffer;case"[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!f(new rf(a),new rf(b)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return le(+a,+b);case"[object Error]":return a.name==b.name&&a.message==b.message;case"[object RegExp]":case"[object String]":return a==b+"";case"[object Map]":var h=I;case"[object Set]":if(h||(h=L),a.size!=b.size&&!(1&d))break;return(c=g.get(a))?c==b:(d|=2,g.set(a,b),b=nd(h(a),h(b),d,e,f,g),g["delete"](a),b);case"[object Symbol]":if(dg)return dg.call(a)==dg.call(b)}return!1}function pd(a){return vg(Jd(a,P,Td),a+"")}function qd(a){return Db(a,He,pg)}function rd(a){return Db(a,Ie,qg)}function sd(a){for(var b=a.name+"",c=Yf[b],d=hf.call(Yf,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function td(a){return(hf.call(za,"placeholder")?za:a).placeholder}function ud(){var a=za.iteratee||Qe,a=a===Qe?Vb:a;return arguments.length?a(arguments[0],arguments[1]):a}function vd(a,b){var c=a.__data__,d=typeof b;return("string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==b:null===b)?c["string"==typeof b?"string":"hash"]:c.map}function wd(a){for(var b=He(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,e===e&&!se(e)]}return b}function xd(a,b){var c=null==a?P:a[b];return Rb(c)?c:P}function yd(a,b,c){b=Dc(b,a);for(var d=-1,e=b.length,f=!1;++d<e;){var g=Nd(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}return f||++d!=e?f:(e=null==a?0:a.length,!!e&&re(e)&&Dd(g,e)&&(hh(a)||gh(a)))}function zd(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&hf.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Ad(a){return"function"!=typeof a.constructor||Hd(a)?{}:fg(tf(a))}function Bd(c,d,e,f){var g=c.constructor;switch(d){case"[object ArrayBuffer]":return Gc(c);case"[object Boolean]":case"[object Date]":return new g(+c);case"[object DataView]":return d=f?Gc(c.buffer):c.buffer,new c.constructor(d,c.byteOffset,c.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Hc(c,f);case"[object Map]":return d=f?e(I(c),1):I(c),m(d,a,new c.constructor);case"[object Number]":case"[object String]":return new g(c);case"[object RegExp]":return d=new c.constructor(c.source,qa.exec(c)),d.lastIndex=c.lastIndex,d;case"[object Set]":return d=f?e(L(c),1):L(c),m(d,b,new c.constructor);case"[object Symbol]":return dg?_e(dg.call(c)):{}}}function Cd(a){return hh(a)||gh(a)||!!(xf&&a&&a[xf])}function Dd(a,b){return b=null==b?9007199254740991:b,!!b&&("number"==typeof a||va.test(a))&&a>-1&&0==a%1&&b>a}function Ed(a,b,c){if(!se(c))return!1;var d=typeof b;return!!("number"==d?me(c)&&Dd(b,c.length):"string"==d&&b in c)&&le(c[b],a)}function Fd(a,b){if(hh(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!xe(a))||ca.test(a)||!ba.test(a)||null!=b&&a in _e(b)}function Gd(a){var b=sd(a),c=za[b];return"function"==typeof c&&b in Ea.prototype&&(a===c||(b=og(c),!!b&&a===b[0]))}function Hd(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||ef)}function Id(a,b){return function(c){return null!=c&&c[a]===b&&(b!==P||a in _e(c))}}function Jd(a,b,d){return b=Lf(b===P?a.length-1:b,0),function(){for(var e=arguments,f=-1,g=Lf(e.length-b,0),h=We(g);++f<g;)h[f]=e[b+f];for(f=-1,g=We(b+1);++f<b;)g[f]=e[f];return g[b]=d(h),c(a,this,g)}}function Kd(a,b,c){var d=b+"";b=vg;var e,f=Pd;return e=(e=d.match(la))?e[1].split(ma):[],c=f(e,c),(f=c.length)&&(e=f-1,c[e]=(f>1?"& ":"")+c[e],c=c.join(f>2?", ":" "),d=d.replace(ka,"{\n/* [wrapped with "+c+"] */\n")),b(a,d)}function Ld(a){var b=0,c=0;return function(){var d=Nf(),e=16-(d-c);if(c=d,e>0){if(800<=++b)return arguments[0]}else b=0;return a.apply(P,arguments)}}function Md(a,b){var c=-1,d=a.length,e=d-1;for(b=b===P?d:b;++c<b;){var d=hc(c,e),f=a[d];a[d]=a[c],a[c]=f}return a.length=b,a}function Nd(a){if("string"==typeof a||xe(a))return a;var b=a+"";return"0"==b&&1/a==-Q?"-0":b}function Od(a){if(null!=a){try{return gf.call(a)}catch(a){}return a+""}return""}function Pd(a,b){return e(S,function(c){var d="_."+c[0];b&c[1]&&!i(a,d)&&a.push(d)}),a.sort()}function Qd(a){if(a instanceof Ea)return a.clone();var b=new Ba(a.__wrapped__,a.__chain__);return b.__actions__=Lc(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function Rd(a,b,c){var d=null==a?0:a.length;return d?(c=null==c?0:Ae(c),0>c&&(c=Lf(d+c,0)),q(a,ud(b,3),c)):-1}function Sd(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d-1;return c!==P&&(e=Ae(c),e=0>c?Lf(d+e,0):Mf(e,d-1)),q(a,ud(b,3),e,!0)}function Td(a){return(null==a?0:a.length)?yb(a,1):[]}function Ud(a){return a&&a.length?a[0]:P}function Vd(a){var b=null==a?0:a.length;return b?a[b-1]:P}function Wd(a,b){return a&&a.length&&b&&b.length?fc(a,b):a}function Xd(a){return null==a?a:Qf.call(a)}function Yd(a){if(!a||!a.length)return[];var b=0;return a=h(a,function(a){return ne(a)?(b=Lf(a.length,b),!0):void 0}),A(b,function(b){return k(a,v(b))})}function Zd(a,b){if(!a||!a.length)return[];var d=Yd(a);return null==b?d:k(d,function(a){return c(b,P,a)})}function $d(a){return a=za(a),a.__chain__=!0,a}function _d(a,b){return b(a)}function ae(){return this}function be(a,b){return(hh(a)?e:gg)(a,ud(b,3))}function ce(a,b){return(hh(a)?f:hg)(a,ud(b,3))}function de(a,b){return(hh(a)?k:Yb)(a,ud(b,3))}function ee(a,b,c){return b=c?P:b,b=a&&null==b?a.length:b,jd(a,128,P,P,P,P,b)}function fe(a,b){var c;if("function"!=typeof b)throw new cf("Expected a function");return a=Ae(a),function(){return 0<--a&&(c=b.apply(this,arguments)),1>=a&&(b=P),c}}function ge(a,b,c){return b=c?P:b,a=jd(a,8,P,P,P,P,P,b),a.placeholder=ge.placeholder,a}function he(a,b,c){return b=c?P:b,a=jd(a,16,P,P,P,P,P,b),a.placeholder=he.placeholder,a}function ie(a,b,c){function d(b){var c=i,d=j;return i=j=P,o=b,l=a.apply(d,c)}function e(a){var c=a-n;return a-=o,n===P||c>=b||0>c||q&&a>=k}function f(){var a=Xg();if(e(a))return g(a);var c,d=ug;c=a-o,a=b-(a-n),c=q?Mf(a,k-c):a,m=d(f,c)}function g(a){return m=P,r&&i?d(a):(i=j=P,l)}function h(){var a=Xg(),c=e(a);if(i=arguments,j=this,n=a,c){if(m===P)return o=a=n,m=ug(f,b),p?d(a):l;if(q)return m=ug(f,b),d(n)}return m===P&&(m=ug(f,b)),l}var i,j,k,l,m,n,o=0,p=!1,q=!1,r=!0;if("function"!=typeof a)throw new cf("Expected a function");return b=Ce(b)||0,se(c)&&(p=!!c.leading,k=(q="maxWait"in c)?Lf(Ce(c.maxWait)||0,b):k,r="trailing"in c?!!c.trailing:r),h.cancel=function(){m!==P&&mg(m),o=0,i=n=j=m=P},h.flush=function(){return m===P?l:g(Xg())},h}function je(a,b){function c(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;return f.has(e)?f.get(e):(d=a.apply(this,d),c.cache=f.set(e,d)||f,d)}if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new cf("Expected a function");return c.cache=new(je.Cache||Pa),c}function ke(a){if("function"!=typeof a)throw new cf("Expected a function");return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function le(a,b){return a===b||a!==a&&b!==b}function me(a){return null!=a&&re(a.length)&&!pe(a)}function ne(a){return te(a)&&me(a)}function oe(a){if(!te(a))return!1;var b=Eb(a);return"[object Error]"==b||"[object DOMException]"==b||"string"==typeof a.message&&"string"==typeof a.name&&!ve(a)}function pe(a){return!!se(a)&&(a=Eb(a),"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a)}function qe(a){return"number"==typeof a&&a==Ae(a)}function re(a){return"number"==typeof a&&a>-1&&0==a%1&&9007199254740991>=a}function se(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}function te(a){return null!=a&&"object"==typeof a}function ue(a){return"number"==typeof a||te(a)&&"[object Number]"==Eb(a)}function ve(a){return!(!te(a)||"[object Object]"!=Eb(a))&&(a=tf(a),null===a||(a=hf.call(a,"constructor")&&a.constructor,"function"==typeof a&&a instanceof a&&gf.call(a)==mf))}function we(a){return"string"==typeof a||!hh(a)&&te(a)&&"[object String]"==Eb(a)}function xe(a){return"symbol"==typeof a||te(a)&&"[object Symbol]"==Eb(a)}function ye(a){if(!a)return[];if(me(a))return we(a)?O(a):Lc(a);if(yf&&a[yf]){a=a[yf]();for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}return b=rg(a),("[object Map]"==b?I:"[object Set]"==b?L:Ke)(a)}function ze(a){return a?(a=Ce(a),a===Q||a===-Q?1.7976931348623157e308*(0>a?-1:1):a===a?a:0):0===a?a:0}function Ae(a){a=ze(a);var b=a%1;return a===a?b?a-b:a:0}function Be(a){return a?pb(Ae(a),0,4294967295):0}function Ce(a){if("number"==typeof a)return a;if(xe(a))return R;if(se(a)&&(a="function"==typeof a.valueOf?a.valueOf():a,a=se(a)?a+"":a),"string"!=typeof a)return 0===a?a:+a;a=a.replace(ha,"");var b=sa.test(a);return b||ua.test(a)?Oa(a.slice(2),b?2:8):ra.test(a)?R:+a}function De(a){return Mc(a,Ie(a))}function Ee(a){return null==a?"":uc(a)}function Fe(a,b,c){return a=null==a?P:Cb(a,b),a===P?c:a}function Ge(a,b){return null!=a&&yd(a,b,Hb)}function He(a){return me(a)?Ta(a):Wb(a)}function Ie(a){if(me(a))a=Ta(a,!0);else if(se(a)){var b,c=Hd(a),d=[];for(b in a)("constructor"!=b||!c&&hf.call(a,b))&&d.push(b);a=d}else{if(b=[],null!=a)for(c in _e(a))b.push(c);a=b}return a}function Je(a,b){if(null==a)return{};var c=k(rd(a),function(a){return[a]});return b=ud(b),dc(a,c,function(a,c){return b(a,c[0])})}function Ke(a){return null==a?[]:D(a,He(a))}function Le(a){return Oh(Ee(a).toLowerCase())}function Me(a){return(a=Ee(a))&&a.replace(wa,bb).replace(Da,"")}function Ne(a,b,c){return a=Ee(a),b=c?P:b,b===P?Ha.test(a)?a.match(Fa)||[]:a.match(na)||[]:a.match(b)||[]}function Oe(a){return function(){return a}}function Pe(a){return a}function Qe(a){return Vb("function"==typeof a?a:qb(a,1))}function Re(a,b,c){var d=He(b),f=Bb(b,d);null!=c||se(b)&&(f.length||!d.length)||(c=b,b=a,a=this,f=Bb(b,He(b)));var g=!(se(c)&&"chain"in c&&!c.chain),h=pe(a);return e(f,function(c){var d=b[c];a[c]=d,h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__);return(c.__actions__=Lc(this.__actions__)).push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,l([this.value()],arguments))})}),a}function Se(){}function Te(a){return Fd(a)?v(Nd(a)):ec(a)}function Ue(){return[]}function Ve(){return!1}w=null==w?Ra:eb.defaults(Ra.Object(),w,eb.pick(Ra,Ia));var We=w.Array,Xe=w.Date,Ye=w.Error,Ze=w.Function,$e=w.Math,_e=w.Object,af=w.RegExp,bf=w.String,cf=w.TypeError,df=We.prototype,ef=_e.prototype,ff=w["__core-js_shared__"],gf=Ze.prototype.toString,hf=ef.hasOwnProperty,jf=0,kf=function(){var a=/[^.]+$/.exec(ff&&ff.keys&&ff.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),lf=ef.toString,mf=gf.call(_e),nf=Ra._,of=af("^"+gf.call(hf).replace(fa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pf=Ua?w.Buffer:P,qf=w.Symbol,rf=w.Uint8Array,sf=pf?pf.f:P,tf=J(_e.getPrototypeOf,_e),uf=_e.create,vf=ef.propertyIsEnumerable,wf=df.splice,xf=qf?qf.isConcatSpreadable:P,yf=qf?qf.iterator:P,zf=qf?qf.toStringTag:P,Af=function(){try{var a=xd(_e,"defineProperty");return a({},"",{}),a}catch(a){}}(),Bf=w.clearTimeout!==Ra.clearTimeout&&w.clearTimeout,Cf=Xe&&Xe.now!==Ra.Date.now&&Xe.now,Df=w.setTimeout!==Ra.setTimeout&&w.setTimeout,Ef=$e.ceil,Ff=$e.floor,Gf=_e.getOwnPropertySymbols,Hf=pf?pf.isBuffer:P,If=w.isFinite,Jf=df.join,Kf=J(_e.keys,_e),Lf=$e.max,Mf=$e.min,Nf=Xe.now,Of=w.parseInt,Pf=$e.random,Qf=df.reverse,Rf=xd(w,"DataView"),Sf=xd(w,"Map"),Tf=xd(w,"Promise"),Uf=xd(w,"Set"),Vf=xd(w,"WeakMap"),Wf=xd(_e,"create"),Xf=Vf&&new Vf,Yf={},Zf=Od(Rf),$f=Od(Sf),_f=Od(Tf),ag=Od(Uf),bg=Od(Vf),cg=qf?qf.prototype:P,dg=cg?cg.valueOf:P,eg=cg?cg.toString:P,fg=function(){function a(){}return function(b){return se(b)?uf?uf(b):(a.prototype=b,b=new a,a.prototype=P,b):{}}}();za.templateSettings={escape:$,evaluate:_,interpolate:aa,variable:"",imports:{_:za}},za.prototype=Aa.prototype,za.prototype.constructor=za,Ba.prototype=fg(Aa.prototype),Ba.prototype.constructor=Ba,Ea.prototype=fg(Aa.prototype),Ea.prototype.constructor=Ea,La.prototype.clear=function(){this.__data__=Wf?Wf(null):{},this.size=0},La.prototype["delete"]=function(a){return a=this.has(a)&&delete this.__data__[a],this.size-=a?1:0,a},La.prototype.get=function(a){var b=this.__data__;return Wf?(a=b[a],"__lodash_hash_undefined__"===a?P:a):hf.call(b,a)?b[a]:P},La.prototype.has=function(a){var b=this.__data__;return Wf?b[a]!==P:hf.call(b,a)},La.prototype.set=function(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=Wf&&b===P?"__lodash_hash_undefined__":b,this},Ma.prototype.clear=function(){this.__data__=[],this.size=0},Ma.prototype["delete"]=function(a){var b=this.__data__;return a=jb(b,a),!(0>a||(a==b.length-1?b.pop():wf.call(b,a,1),--this.size,0))},Ma.prototype.get=function(a){var b=this.__data__;return a=jb(b,a),0>a?P:b[a][1]},Ma.prototype.has=function(a){return-1<jb(this.__data__,a)},Ma.prototype.set=function(a,b){var c=this.__data__,d=jb(c,a);return 0>d?(++this.size,c.push([a,b])):c[d][1]=b,this},Pa.prototype.clear=function(){this.size=0,this.__data__={hash:new La,map:new(Sf||Ma),string:new La}},Pa.prototype["delete"]=function(a){return a=vd(this,a)["delete"](a),this.size-=a?1:0,a},Pa.prototype.get=function(a){return vd(this,a).get(a)},Pa.prototype.has=function(a){return vd(this,a).has(a)},Pa.prototype.set=function(a,b){var c=vd(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this},Qa.prototype.add=Qa.prototype.push=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},Qa.prototype.has=function(a){return this.__data__.has(a)},Sa.prototype.clear=function(){this.__data__=new Ma,this.size=0},Sa.prototype["delete"]=function(a){var b=this.__data__;return a=b["delete"](a),this.size=b.size,a},Sa.prototype.get=function(a){return this.__data__.get(a)},Sa.prototype.has=function(a){return this.__data__.has(a)},Sa.prototype.set=function(a,b){var c=this.__data__;if(c instanceof Ma){var d=c.__data__;if(!Sf||199>d.length)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new Pa(d)}return c.set(a,b),this.size=c.size,this};var gg=Rc(zb),hg=Rc(Ab,!0),ig=Sc(),jg=Sc(!0),kg=Xf?function(a,b){return Xf.set(a,b),a}:Pe,lg=Af?function(a,b){return Af(a,"toString",{configurable:!0,enumerable:!1,value:Oe(b),writable:!0})}:Pe,mg=Bf||function(a){return Ra.clearTimeout(a)},ng=Uf&&1/L(new Uf([,-0]))[1]==Q?function(a){return new Uf(a)}:Se,og=Xf?function(a){return Xf.get(a)}:Se,pg=Gf?function(a){return null==a?[]:(a=_e(a),h(Gf(a),function(b){return vf.call(a,b)}))}:Ue,qg=Gf?function(a){for(var b=[];a;)l(b,pg(a)),a=tf(a);return b}:Ue,rg=Eb;(Rf&&"[object DataView]"!=rg(new Rf(new ArrayBuffer(1)))||Sf&&"[object Map]"!=rg(new Sf)||Tf&&"[object Promise]"!=rg(Tf.resolve())||Uf&&"[object Set]"!=rg(new Uf)||Vf&&"[object WeakMap]"!=rg(new Vf))&&(rg=function(a){var b=Eb(a);if(a=(a="[object Object]"==b?a.constructor:P)?Od(a):"")switch(a){case Zf:return"[object DataView]";case $f:return"[object Map]";case _f:return"[object Promise]";case ag:return"[object Set]";case bg:return"[object WeakMap]"}return b});var sg=ff?pe:Ve,tg=Ld(kg),ug=Df||function(a,b){return Ra.setTimeout(a,b)},vg=Ld(lg),wg=function(a){a=je(a,function(a){return 500===b.size&&b.clear(),a});var b=a.cache;return a}(function(a){var b=[];return da.test(a)&&b.push(""),a.replace(ea,function(a,c,d,e){b.push(d?e.replace(oa,"$1"):c||a)}),b}),xg=jc(function(a,b){return ne(a)?ub(a,yb(b,1,ne,!0)):[]}),yg=jc(function(a,b){var c=Vd(b);return ne(c)&&(c=P),ne(a)?ub(a,yb(b,1,ne,!0),ud(c,2)):[]}),zg=jc(function(a,b){var c=Vd(b);return ne(c)&&(c=P),ne(a)?ub(a,yb(b,1,ne,!0),P,c):[]}),Ag=jc(function(a){var b=k(a,Bc);return b.length&&b[0]===a[0]?Ib(b):[]}),Bg=jc(function(a){var b=Vd(a),c=k(a,Bc);return b===Vd(c)?b=P:c.pop(),c.length&&c[0]===a[0]?Ib(c,ud(b,2)):[]}),Cg=jc(function(a){var b=Vd(a),c=k(a,Bc);return(b="function"==typeof b?b:P)&&c.pop(),c.length&&c[0]===a[0]?Ib(c,P,b):[]}),Dg=jc(Wd),Eg=pd(function(a,b){var c=null==a?0:a.length,d=ob(a,b);return gc(a,k(b,function(a){return Dd(a,c)?+a:a}).sort(Ic)),d}),Fg=jc(function(a){return vc(yb(a,1,ne,!0))}),Gg=jc(function(a){var b=Vd(a);return ne(b)&&(b=P),vc(yb(a,1,ne,!0),ud(b,2))}),Hg=jc(function(a){var b=Vd(a),b="function"==typeof b?b:P;return vc(yb(a,1,ne,!0),P,b)}),Ig=jc(function(a,b){return ne(a)?ub(a,b):[]}),Jg=jc(function(a){return zc(h(a,ne))}),Kg=jc(function(a){var b=Vd(a);return ne(b)&&(b=P),zc(h(a,ne),ud(b,2))}),Lg=jc(function(a){var b=Vd(a),b="function"==typeof b?b:P;return zc(h(a,ne),P,b)}),Mg=jc(Yd),Ng=jc(function(a){var b=a.length,b=b>1?a[b-1]:P,b="function"==typeof b?(a.pop(),b):P;return Zd(a,b)}),Og=pd(function(a){function b(b){return ob(b,a)}var c=a.length,d=c?a[0]:0,e=this.__wrapped__;return!(c>1||this.__actions__.length)&&e instanceof Ea&&Dd(d)?(e=e.slice(d,+d+(c?1:0)),e.__actions__.push({func:_d,args:[b],thisArg:P}),new Ba(e,this.__chain__).thru(function(a){return c&&!a.length&&a.push(P),a})):this.thru(b)}),Pg=Pc(function(a,b,c){hf.call(a,c)?++a[c]:nb(a,c,1)}),Qg=Yc(Rd),Rg=Yc(Sd),Sg=Pc(function(a,b,c){hf.call(a,c)?a[c].push(b):nb(a,c,[b])}),Tg=jc(function(a,b,d){var e=-1,f="function"==typeof b,g=me(a)?We(a.length):[];return gg(a,function(a){g[++e]=f?c(b,a,d):Kb(a,b,d)}),g}),Ug=Pc(function(a,b,c){nb(a,c,b)}),Vg=Pc(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Wg=jc(function(a,b){if(null==a)return[];var c=b.length;return c>1&&Ed(a,b[0],b[1])?b=[]:c>2&&Ed(b[0],b[1],b[2])&&(b=[b[0]]),bc(a,yb(b,1),[])}),Xg=Cf||function(){return Ra.Date.now()},Yg=jc(function(a,b,c){var d=1;if(c.length)var e=K(c,td(Yg)),d=32|d;return jd(a,d,b,c,e)}),Zg=jc(function(a,b,c){var d=3;if(c.length)var e=K(c,td(Zg)),d=32|d;return jd(b,d,a,c,e)}),$g=jc(function(a,b){return tb(a,1,b)}),_g=jc(function(a,b,c){return tb(a,Ce(b)||0,c)});je.Cache=Pa;var ah=jc(function(a,b){b=1==b.length&&hh(b[0])?k(b[0],C(ud())):k(yb(b,1),C(ud()));var d=b.length;return jc(function(e){for(var f=-1,g=Mf(e.length,d);++f<g;)e[f]=b[f].call(this,e[f]);return c(a,this,e)})}),bh=jc(function(a,b){return jd(a,32,P,b,K(b,td(bh)))}),ch=jc(function(a,b){return jd(a,64,P,b,K(b,td(ch)))}),dh=pd(function(a,b){return jd(a,256,P,P,P,b)}),eh=fd(Fb),fh=fd(function(a,b){return a>=b}),gh=Lb(function(){return arguments}())?Lb:function(a){return te(a)&&hf.call(a,"callee")&&!vf.call(a,"callee")},hh=We.isArray,ih=Wa?C(Wa):Mb,jh=Hf||Ve,kh=Xa?C(Xa):Nb,lh=Ya?C(Ya):Pb,mh=Za?C(Za):Sb,nh=$a?C($a):Tb,oh=_a?C(_a):Ub,ph=fd(Xb),qh=fd(function(a,b){return b>=a}),rh=Qc(function(a,b){if(Hd(b)||me(b))Mc(b,He(b),a);else for(var c in b)hf.call(b,c)&&ib(a,c,b[c])}),sh=Qc(function(a,b){Mc(b,Ie(b),a)}),th=Qc(function(a,b,c,d){Mc(b,Ie(b),a,d)}),uh=Qc(function(a,b,c,d){Mc(b,He(b),a,d)}),vh=pd(ob),wh=jc(function(a){return a.push(P,kd),c(th,P,a)}),xh=jc(function(a){return a.push(P,ld),c(Ch,P,a)}),yh=_c(function(a,b,c){a[b]=c},Oe(Pe)),zh=_c(function(a,b,c){hf.call(a,b)?a[b].push(c):a[b]=[c]},ud),Ah=jc(Kb),Bh=Qc(function(a,b,c){_b(a,b,c)}),Ch=Qc(function(a,b,c,d){_b(a,b,c,d)}),Dh=pd(function(a,b){var c={};if(null==a)return c;var d=!1;b=k(b,function(b){return b=Dc(b,a),d||(d=1<b.length),b}),Mc(a,rd(a),c),d&&(c=qb(c,7,md));for(var e=b.length;e--;)wc(c,b[e]);return c}),Eh=pd(function(a,b){return null==a?{}:cc(a,b)}),Fh=id(He),Gh=id(Ie),Hh=Vc(function(a,b,c){return b=b.toLowerCase(),a+(c?Le(b):b)}),Ih=Vc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Jh=Vc(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),Kh=Uc("toLowerCase"),Lh=Vc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Mh=Vc(function(a,b,c){return a+(c?" ":"")+Oh(b)}),Nh=Vc(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),Oh=Uc("toUpperCase"),Ph=jc(function(a,b){try{return c(a,P,b)}catch(a){return oe(a)?a:new Ye(a)}}),Qh=pd(function(a,b){return e(b,function(b){b=Nd(b),nb(a,b,Yg(a[b],a))}),a}),Rh=Zc(),Sh=Zc(!0),Th=jc(function(a,b){return function(c){return Kb(c,a,b)}}),Uh=jc(function(a,b){return function(c){return Kb(a,c,b)}}),Vh=bd(k),Wh=bd(g),Xh=bd(o),Yh=ed(),Zh=ed(!0),$h=ad(function(a,b){return a+b},0),_h=hd("ceil"),ai=ad(function(a,b){return a/b},1),bi=hd("floor"),ci=ad(function(a,b){return a*b},1),di=hd("round"),ei=ad(function(a,b){return a-b},0);return za.after=function(a,b){if("function"!=typeof b)throw new cf("Expected a function");return a=Ae(a),function(){return 1>--a?b.apply(this,arguments):void 0}},za.ary=ee,za.assign=rh,za.assignIn=sh,za.assignInWith=th,za.assignWith=uh,za.at=vh,za.before=fe,za.bind=Yg,za.bindAll=Qh,za.bindKey=Zg,za.castArray=function(){if(!arguments.length)return[];var a=arguments[0];return hh(a)?a:[a]},za.chain=$d,za.chunk=function(a,b,c){if(b=(c?Ed(a,b,c):b===P)?1:Lf(Ae(b),0),c=null==a?0:a.length,!c||1>b)return[];for(var d=0,e=0,f=We(Ef(c/b));c>d;)f[e++]=oc(a,d,d+=b);return f},za.compact=function(a){for(var b=-1,c=null==a?0:a.length,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e},za.concat=function(){var a=arguments.length;if(!a)return[];for(var b=We(a-1),c=arguments[0];a--;)b[a-1]=arguments[a];return l(hh(c)?Lc(c):[c],yb(b,1))},za.cond=function(a){var b=null==a?0:a.length,d=ud();return a=b?k(a,function(a){if("function"!=typeof a[1])throw new cf("Expected a function");return[d(a[0]),a[1]]}):[],jc(function(d){for(var e=-1;++e<b;){var f=a[e];if(c(f[0],this,d))return c(f[1],this,d)}})},za.conforms=function(a){return rb(qb(a,1))},za.constant=Oe,za.countBy=Pg,za.create=function(a,b){var c=fg(a);return null==b?c:lb(c,b)},za.curry=ge,za.curryRight=he,za.debounce=ie,za.defaults=wh,za.defaultsDeep=xh,za.defer=$g,za.delay=_g,za.difference=xg,za.differenceBy=yg,za.differenceWith=zg,za.drop=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===P?1:Ae(b),oc(a,0>b?0:b,d)):[]},za.dropRight=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===P?1:Ae(b),b=d-b,oc(a,0,0>b?0:b)):[]},za.dropRightWhile=function(a,b){return a&&a.length?xc(a,ud(b,3),!0,!0):[]},za.dropWhile=function(a,b){return a&&a.length?xc(a,ud(b,3),!0):[]},za.fill=function(a,b,c,d){var e=null==a?0:a.length;if(!e)return[];for(c&&"number"!=typeof c&&Ed(a,b,c)&&(c=0,d=e),e=a.length,c=Ae(c),0>c&&(c=-c>e?0:e+c),d=d===P||d>e?e:Ae(d),0>d&&(d+=e),d=c>d?0:Be(d);d>c;)a[c++]=b;return a},za.filter=function(a,b){return(hh(a)?h:xb)(a,ud(b,3))},za.flatMap=function(a,b){return yb(de(a,b),1)},za.flatMapDeep=function(a,b){return yb(de(a,b),Q)},za.flatMapDepth=function(a,b,c){return c=c===P?1:Ae(c),yb(de(a,b),c)},za.flatten=Td,za.flattenDeep=function(a){return(null==a?0:a.length)?yb(a,Q):[]},za.flattenDepth=function(a,b){return null!=a&&a.length?(b=b===P?1:Ae(b),yb(a,b)):[]},za.flip=function(a){
return jd(a,512)},za.flow=Rh,za.flowRight=Sh,za.fromPairs=function(a){for(var b=-1,c=null==a?0:a.length,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d},za.functions=function(a){return null==a?[]:Bb(a,He(a))},za.functionsIn=function(a){return null==a?[]:Bb(a,Ie(a))},za.groupBy=Sg,za.initial=function(a){return(null==a?0:a.length)?oc(a,0,-1):[]},za.intersection=Ag,za.intersectionBy=Bg,za.intersectionWith=Cg,za.invert=yh,za.invertBy=zh,za.invokeMap=Tg,za.iteratee=Qe,za.keyBy=Ug,za.keys=He,za.keysIn=Ie,za.map=de,za.mapKeys=function(a,b){var c={};return b=ud(b,3),zb(a,function(a,d,e){nb(c,b(a,d,e),a)}),c},za.mapValues=function(a,b){var c={};return b=ud(b,3),zb(a,function(a,d,e){nb(c,d,b(a,d,e))}),c},za.matches=function(a){return Zb(qb(a,1))},za.matchesProperty=function(a,b){return $b(a,qb(b,1))},za.memoize=je,za.merge=Bh,za.mergeWith=Ch,za.method=Th,za.methodOf=Uh,za.mixin=Re,za.negate=ke,za.nthArg=function(a){return a=Ae(a),jc(function(b){return ac(b,a)})},za.omit=Dh,za.omitBy=function(a,b){return Je(a,ke(ud(b)))},za.once=function(a){return fe(2,a)},za.orderBy=function(a,b,c,d){return null==a?[]:(hh(b)||(b=null==b?[]:[b]),c=d?P:c,hh(c)||(c=null==c?[]:[c]),bc(a,b,c))},za.over=Vh,za.overArgs=ah,za.overEvery=Wh,za.overSome=Xh,za.partial=bh,za.partialRight=ch,za.partition=Vg,za.pick=Eh,za.pickBy=Je,za.property=Te,za.propertyOf=function(a){return function(b){return null==a?P:Cb(a,b)}},za.pull=Dg,za.pullAll=Wd,za.pullAllBy=function(a,b,c){return a&&a.length&&b&&b.length?fc(a,b,ud(c,2)):a},za.pullAllWith=function(a,b,c){return a&&a.length&&b&&b.length?fc(a,b,P,c):a},za.pullAt=Eg,za.range=Yh,za.rangeRight=Zh,za.rearg=dh,za.reject=function(a,b){return(hh(a)?h:xb)(a,ke(ud(b,3)))},za.remove=function(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=ud(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return gc(a,e),c},za.rest=function(a,b){if("function"!=typeof a)throw new cf("Expected a function");return b=b===P?b:Ae(b),jc(a,b)},za.reverse=Xd,za.sampleSize=function(a,b,c){return b=(c?Ed(a,b,c):b===P)?1:Ae(b),(hh(a)?ab:lc)(a,b)},za.set=function(a,b,c){return null==a?a:mc(a,b,c)},za.setWith=function(a,b,c,d){return d="function"==typeof d?d:P,null==a?a:mc(a,b,c,d)},za.shuffle=function(a){return(hh(a)?gb:nc)(a)},za.slice=function(a,b,c){var d=null==a?0:a.length;return d?(c&&"number"!=typeof c&&Ed(a,b,c)?(b=0,c=d):(b=null==b?0:Ae(b),c=c===P?d:Ae(c)),oc(a,b,c)):[]},za.sortBy=Wg,za.sortedUniq=function(a){return a&&a.length?sc(a):[]},za.sortedUniqBy=function(a,b){return a&&a.length?sc(a,ud(b,2)):[]},za.split=function(a,b,c){return c&&"number"!=typeof c&&Ed(a,b,c)&&(b=c=P),c=c===P?4294967295:c>>>0,c?(a=Ee(a))&&("string"==typeof b||null!=b&&!mh(b))&&(b=uc(b),!b&&Ga.test(a))?Ec(O(a),0,c):a.split(b,c):[]},za.spread=function(a,b){if("function"!=typeof a)throw new cf("Expected a function");return b=null==b?0:Lf(Ae(b),0),jc(function(d){var e=d[b];return d=Ec(d,0,b),e&&l(d,e),c(a,this,d)})},za.tail=function(a){var b=null==a?0:a.length;return b?oc(a,1,b):[]},za.take=function(a,b,c){return a&&a.length?(b=c||b===P?1:Ae(b),oc(a,0,0>b?0:b)):[]},za.takeRight=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===P?1:Ae(b),b=d-b,oc(a,0>b?0:b,d)):[]},za.takeRightWhile=function(a,b){return a&&a.length?xc(a,ud(b,3),!1,!0):[]},za.takeWhile=function(a,b){return a&&a.length?xc(a,ud(b,3)):[]},za.tap=function(a,b){return b(a),a},za.throttle=function(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new cf("Expected a function");return se(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),ie(a,b,{leading:d,maxWait:b,trailing:e})},za.thru=_d,za.toArray=ye,za.toPairs=Fh,za.toPairsIn=Gh,za.toPath=function(a){return hh(a)?k(a,Nd):xe(a)?[a]:Lc(wg(Ee(a)))},za.toPlainObject=De,za.transform=function(a,b,c){var d=hh(a),f=d||jh(a)||oh(a);if(b=ud(b,4),null==c){var g=a&&a.constructor;c=f?d?new g:[]:se(a)&&pe(g)?fg(tf(a)):{}}return(f?e:zb)(a,function(a,d,e){return b(c,a,d,e)}),c},za.unary=function(a){return ee(a,1)},za.union=Fg,za.unionBy=Gg,za.unionWith=Hg,za.uniq=function(a){return a&&a.length?vc(a):[]},za.uniqBy=function(a,b){return a&&a.length?vc(a,ud(b,2)):[]},za.uniqWith=function(a,b){return b="function"==typeof b?b:P,a&&a.length?vc(a,P,b):[]},za.unset=function(a,b){return null==a||wc(a,b)},za.unzip=Yd,za.unzipWith=Zd,za.update=function(a,b,c){return null==a?a:mc(a,b,Cc(c)(Cb(a,b)),void 0)},za.updateWith=function(a,b,c,d){return d="function"==typeof d?d:P,null!=a&&(a=mc(a,b,Cc(c)(Cb(a,b)),d)),a},za.values=Ke,za.valuesIn=function(a){return null==a?[]:D(a,Ie(a))},za.without=Ig,za.words=Ne,za.wrap=function(a,b){return bh(Cc(b),a)},za.xor=Jg,za.xorBy=Kg,za.xorWith=Lg,za.zip=Mg,za.zipObject=function(a,b){return Ac(a||[],b||[],ib)},za.zipObjectDeep=function(a,b){return Ac(a||[],b||[],mc)},za.zipWith=Ng,za.entries=Fh,za.entriesIn=Gh,za.extend=sh,za.extendWith=th,Re(za,za),za.add=$h,za.attempt=Ph,za.camelCase=Hh,za.capitalize=Le,za.ceil=_h,za.clamp=function(a,b,c){return c===P&&(c=b,b=P),c!==P&&(c=Ce(c),c=c===c?c:0),b!==P&&(b=Ce(b),b=b===b?b:0),pb(Ce(a),b,c)},za.clone=function(a){return qb(a,4)},za.cloneDeep=function(a){return qb(a,5)},za.cloneDeepWith=function(a,b){return b="function"==typeof b?b:P,qb(a,5,b)},za.cloneWith=function(a,b){return b="function"==typeof b?b:P,qb(a,4,b)},za.conformsTo=function(a,b){return null==b||sb(a,b,He(b))},za.deburr=Me,za.defaultTo=function(a,b){return null==a||a!==a?b:a},za.divide=ai,za.endsWith=function(a,b,c){a=Ee(a),b=uc(b);var d=a.length,d=c=c===P?d:pb(Ae(c),0,d);return c-=b.length,c>=0&&a.slice(c,d)==b},za.eq=le,za.escape=function(a){return(a=Ee(a))&&Z.test(a)?a.replace(X,cb):a},za.escapeRegExp=function(a){return(a=Ee(a))&&ga.test(a)?a.replace(fa,"\\$&"):a},za.every=function(a,b,c){var d=hh(a)?g:vb;return c&&Ed(a,b,c)&&(b=P),d(a,ud(b,3))},za.find=Qg,za.findIndex=Rd,za.findKey=function(a,b){return p(a,ud(b,3),zb)},za.findLast=Rg,za.findLastIndex=Sd,za.findLastKey=function(a,b){return p(a,ud(b,3),Ab)},za.floor=bi,za.forEach=be,za.forEachRight=ce,za.forIn=function(a,b){return null==a?a:ig(a,ud(b,3),Ie)},za.forInRight=function(a,b){return null==a?a:jg(a,ud(b,3),Ie)},za.forOwn=function(a,b){return a&&zb(a,ud(b,3))},za.forOwnRight=function(a,b){return a&&Ab(a,ud(b,3))},za.get=Fe,za.gt=eh,za.gte=fh,za.has=function(a,b){return null!=a&&yd(a,b,Gb)},za.hasIn=Ge,za.head=Ud,za.identity=Pe,za.includes=function(a,b,c,d){return a=me(a)?a:Ke(a),c=c&&!d?Ae(c):0,d=a.length,0>c&&(c=Lf(d+c,0)),we(a)?d>=c&&-1<a.indexOf(b,c):!!d&&-1<r(a,b,c)},za.indexOf=function(a,b,c){var d=null==a?0:a.length;return d?(c=null==c?0:Ae(c),0>c&&(c=Lf(d+c,0)),r(a,b,c)):-1},za.inRange=function(a,b,c){return b=ze(b),c===P?(c=b,b=0):c=ze(c),a=Ce(a),a>=Mf(b,c)&&a<Lf(b,c)},za.invoke=Ah,za.isArguments=gh,za.isArray=hh,za.isArrayBuffer=ih,za.isArrayLike=me,za.isArrayLikeObject=ne,za.isBoolean=function(a){return!0===a||!1===a||te(a)&&"[object Boolean]"==Eb(a)},za.isBuffer=jh,za.isDate=kh,za.isElement=function(a){return te(a)&&1===a.nodeType&&!ve(a)},za.isEmpty=function(a){if(null==a)return!0;if(me(a)&&(hh(a)||"string"==typeof a||"function"==typeof a.splice||jh(a)||oh(a)||gh(a)))return!a.length;var b=rg(a);if("[object Map]"==b||"[object Set]"==b)return!a.size;if(Hd(a))return!Wb(a).length;for(var c in a)if(hf.call(a,c))return!1;return!0},za.isEqual=function(a,b){return Ob(a,b)},za.isEqualWith=function(a,b,c){var d=(c="function"==typeof c?c:P)?c(a,b):P;return d===P?Ob(a,b,P,c):!!d},za.isError=oe,za.isFinite=function(a){return"number"==typeof a&&If(a)},za.isFunction=pe,za.isInteger=qe,za.isLength=re,za.isMap=lh,za.isMatch=function(a,b){return a===b||Qb(a,b,wd(b))},za.isMatchWith=function(a,b,c){return c="function"==typeof c?c:P,Qb(a,b,wd(b),c)},za.isNaN=function(a){return ue(a)&&a!=+a},za.isNative=function(a){if(sg(a))throw new Ye("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rb(a)},za.isNil=function(a){return null==a},za.isNull=function(a){return null===a},za.isNumber=ue,za.isObject=se,za.isObjectLike=te,za.isPlainObject=ve,za.isRegExp=mh,za.isSafeInteger=function(a){return qe(a)&&a>=-9007199254740991&&9007199254740991>=a},za.isSet=nh,za.isString=we,za.isSymbol=xe,za.isTypedArray=oh,za.isUndefined=function(a){return a===P},za.isWeakMap=function(a){return te(a)&&"[object WeakMap]"==rg(a)},za.isWeakSet=function(a){return te(a)&&"[object WeakSet]"==Eb(a)},za.join=function(a,b){return null==a?"":Jf.call(a,b)},za.kebabCase=Ih,za.last=Vd,za.lastIndexOf=function(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d;if(c!==P&&(e=Ae(c),e=0>e?Lf(d+e,0):Mf(e,d-1)),b===b){for(c=e+1;c--&&a[c]!==b;);a=c}else a=q(a,t,e,!0);return a},za.lowerCase=Jh,za.lowerFirst=Kh,za.lt=ph,za.lte=qh,za.max=function(a){return a&&a.length?wb(a,Pe,Fb):P},za.maxBy=function(a,b){return a&&a.length?wb(a,ud(b,2),Fb):P},za.mean=function(a){return u(a,Pe)},za.meanBy=function(a,b){return u(a,ud(b,2))},za.min=function(a){return a&&a.length?wb(a,Pe,Xb):P},za.minBy=function(a,b){return a&&a.length?wb(a,ud(b,2),Xb):P},za.stubArray=Ue,za.stubFalse=Ve,za.stubObject=function(){return{}},za.stubString=function(){return""},za.stubTrue=function(){return!0},za.multiply=ci,za.nth=function(a,b){return a&&a.length?ac(a,Ae(b)):P},za.noConflict=function(){return Ra._===this&&(Ra._=nf),this},za.noop=Se,za.now=Xg,za.pad=function(a,b,c){a=Ee(a);var d=(b=Ae(b))?N(a):0;return!b||d>=b?a:(b=(b-d)/2,cd(Ff(b),c)+a+cd(Ef(b),c))},za.padEnd=function(a,b,c){a=Ee(a);var d=(b=Ae(b))?N(a):0;return b&&b>d?a+cd(b-d,c):a},za.padStart=function(a,b,c){a=Ee(a);var d=(b=Ae(b))?N(a):0;return b&&b>d?cd(b-d,c)+a:a},za.parseInt=function(a,b,c){return c||null==b?b=0:b&&(b=+b),Of(Ee(a).replace(ia,""),b||0)},za.random=function(a,b,c){if(c&&"boolean"!=typeof c&&Ed(a,b,c)&&(b=c=P),c===P&&("boolean"==typeof b?(c=b,b=P):"boolean"==typeof a&&(c=a,a=P)),a===P&&b===P?(a=0,b=1):(a=ze(a),b===P?(b=a,a=0):b=ze(b)),a>b){var d=a;a=b,b=d}return c||a%1||b%1?(c=Pf(),Mf(a+c*(b-a+Na("1e-"+((c+"").length-1))),b)):hc(a,b)},za.reduce=function(a,b,c){var d=hh(a)?m:x,e=3>arguments.length;return d(a,ud(b,4),c,e,gg)},za.reduceRight=function(a,b,c){var d=hh(a)?n:x,e=3>arguments.length;return d(a,ud(b,4),c,e,hg)},za.repeat=function(a,b,c){return b=(c?Ed(a,b,c):b===P)?1:Ae(b),ic(Ee(a),b)},za.replace=function(){var a=arguments,b=Ee(a[0]);return 3>a.length?b:b.replace(a[1],a[2])},za.result=function(a,b,c){b=Dc(b,a);var d=-1,e=b.length;for(e||(e=1,a=P);++d<e;){var f=null==a?P:a[Nd(b[d])];f===P&&(d=e,f=c),a=pe(f)?f.call(a):f}return a},za.round=di,za.runInContext=fb,za.sample=function(a){return(hh(a)?Va:kc)(a)},za.size=function(a){if(null==a)return 0;if(me(a))return we(a)?N(a):a.length;var b=rg(a);return"[object Map]"==b||"[object Set]"==b?a.size:Wb(a).length},za.snakeCase=Lh,za.some=function(a,b,c){var d=hh(a)?o:pc;return c&&Ed(a,b,c)&&(b=P),d(a,ud(b,3))},za.sortedIndex=function(a,b){return qc(a,b)},za.sortedIndexBy=function(a,b,c){return rc(a,b,ud(c,2))},za.sortedIndexOf=function(a,b){var c=null==a?0:a.length;if(c){var d=qc(a,b);if(c>d&&le(a[d],b))return d}return-1},za.sortedLastIndex=function(a,b){return qc(a,b,!0)},za.sortedLastIndexBy=function(a,b,c){return rc(a,b,ud(c,2),!0)},za.sortedLastIndexOf=function(a,b){if(null==a?0:a.length){var c=qc(a,b,!0)-1;if(le(a[c],b))return c}return-1},za.startCase=Mh,za.startsWith=function(a,b,c){return a=Ee(a),c=null==c?0:pb(Ae(c),0,a.length),b=uc(b),a.slice(c,c+b.length)==b},za.subtract=ei,za.sum=function(a){return a&&a.length?z(a,Pe):0},za.sumBy=function(a,b){return a&&a.length?z(a,ud(b,2)):0},za.template=function(a,b,c){var d=za.templateSettings;c&&Ed(a,b,c)&&(b=P),a=Ee(a),b=th({},b,d,kd),c=th({},b.imports,d.imports,kd);var e,f,g=He(c),h=D(c,g),i=0;c=b.interpolate||xa;var j="__p+='";c=af((b.escape||xa).source+"|"+c.source+"|"+(c===aa?pa:xa).source+"|"+(b.evaluate||xa).source+"|$","g");var k="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":"";if(a.replace(c,function(b,c,d,g,h,k){return d||(d=g),j+=a.slice(i,k).replace(ya,H),c&&(e=!0,j+="'+__e("+c+")+'"),h&&(f=!0,j+="';"+h+";\n__p+='"),d&&(j+="'+((__t=("+d+"))==null?'':__t)+'"),i=k+b.length,b}),j+="';",(b=b.variable)||(j="with(obj){"+j+"}"),j=(f?j.replace(T,""):j).replace(U,"$1").replace(V,"$1;"),j="function("+(b||"obj")+"){"+(b?"":"obj||(obj={});")+"var __t,__p=''"+(e?",__e=_.escape":"")+(f?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+j+"return __p}",b=Ph(function(){return Ze(g,k+"return "+j).apply(P,h)}),b.source=j,oe(b))throw b;return b},za.times=function(a,b){if(a=Ae(a),1>a||a>9007199254740991)return[];var c=4294967295,d=Mf(a,4294967295);for(b=ud(b),a-=4294967295,d=A(d,b);++c<a;)b(c);return d},za.toFinite=ze,za.toInteger=Ae,za.toLength=Be,za.toLower=function(a){return Ee(a).toLowerCase()},za.toNumber=Ce,za.toSafeInteger=function(a){return a?pb(Ae(a),-9007199254740991,9007199254740991):0===a?a:0},za.toString=Ee,za.toUpper=function(a){return Ee(a).toUpperCase()},za.trim=function(a,b,c){return(a=Ee(a))&&(c||b===P)?a.replace(ha,""):a&&(b=uc(b))?(a=O(a),c=O(b),b=F(a,c),c=G(a,c)+1,Ec(a,b,c).join("")):a},za.trimEnd=function(a,b,c){return(a=Ee(a))&&(c||b===P)?a.replace(ja,""):a&&(b=uc(b))?(a=O(a),b=G(a,O(b))+1,Ec(a,0,b).join("")):a},za.trimStart=function(a,b,c){return(a=Ee(a))&&(c||b===P)?a.replace(ia,""):a&&(b=uc(b))?(a=O(a),b=F(a,O(b)),Ec(a,b).join("")):a},za.truncate=function(a,b){var c=30,d="...";if(se(b))var e="separator"in b?b.separator:e,c="length"in b?Ae(b.length):c,d="omission"in b?uc(b.omission):d;a=Ee(a);var f=a.length;if(Ga.test(a))var g=O(a),f=g.length;if(c>=f)return a;if(f=c-N(d),1>f)return d;if(c=g?Ec(g,0,f).join(""):a.slice(0,f),e===P)return c+d;if(g&&(f+=c.length-f),mh(e)){if(a.slice(f).search(e)){var h=c;for(e.global||(e=af(e.source,Ee(qa.exec(e))+"g")),e.lastIndex=0;g=e.exec(h);)var i=g.index;c=c.slice(0,i===P?f:i)}}else a.indexOf(uc(e),f)!=f&&(e=c.lastIndexOf(e),e>-1&&(c=c.slice(0,e)));return c+d},za.unescape=function(a){return(a=Ee(a))&&Y.test(a)?a.replace(W,db):a},za.uniqueId=function(a){var b=++jf;return Ee(a)+b},za.upperCase=Nh,za.upperFirst=Oh,za.each=be,za.eachRight=ce,za.first=Ud,Re(za,function(){var a={};return zb(za,function(b,c){hf.call(za.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),za.VERSION="4.17.4",e("bind bindKey curry curryRight partial partialRight".split(" "),function(a){za[a].placeholder=za}),e(["drop","take"],function(a,b){Ea.prototype[a]=function(c){c=c===P?1:Lf(Ae(c),0);var d=this.__filtered__&&!b?new Ea(this):this.clone();return d.__filtered__?d.__takeCount__=Mf(c,d.__takeCount__):d.__views__.push({size:Mf(c,4294967295),type:a+(0>d.__dir__?"Right":"")}),d},Ea.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),e(["filter","map","takeWhile"],function(a,b){var c=b+1,d=1==c||3==c;Ea.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:ud(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),e(["head","last"],function(a,b){var c="take"+(b?"Right":"");Ea.prototype[a]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");Ea.prototype[a]=function(){return this.__filtered__?new Ea(this):this[c](1)}}),Ea.prototype.compact=function(){return this.filter(Pe)},Ea.prototype.find=function(a){return this.filter(a).head()},Ea.prototype.findLast=function(a){return this.reverse().find(a)},Ea.prototype.invokeMap=jc(function(a,b){return"function"==typeof a?new Ea(this):this.map(function(c){return Kb(c,a,b)})}),Ea.prototype.reject=function(a){return this.filter(ke(ud(a)))},Ea.prototype.slice=function(a,b){a=Ae(a);var c=this;return c.__filtered__&&(a>0||0>b)?new Ea(c):(0>a?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==P&&(b=Ae(b),c=0>b?c.dropRight(-b):c.take(b-a)),c)},Ea.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ea.prototype.toArray=function(){return this.take(4294967295)},zb(Ea.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=za[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);e&&(za.prototype[b]=function(){function b(a){return a=e.apply(za,l([a],h)),d&&m?a[0]:a}var g=this.__wrapped__,h=d?[1]:arguments,i=g instanceof Ea,j=h[0],k=i||hh(g);k&&c&&"function"==typeof j&&1!=j.length&&(i=k=!1);var m=this.__chain__,n=!!this.__actions__.length,j=f&&!m,i=i&&!n;return!f&&k?(g=i?g:new Ea(this),g=a.apply(g,h),g.__actions__.push({func:_d,args:[b],thisArg:P}),new Ba(g,m)):j&&i?a.apply(this,h):(g=this.thru(b),j?d?g.value()[0]:g.value():g)})}),e("pop push shift sort splice unshift".split(" "),function(a){var b=df[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);za.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(hh(e)?e:[],a)}return this[c](function(c){return b.apply(hh(c)?c:[],a)})}}),zb(Ea.prototype,function(a,b){var c=za[b];if(c){var d=c.name+"";(Yf[d]||(Yf[d]=[])).push({name:b,func:c})}}),Yf[$c(P,2).name]=[{name:"wrapper",func:P}],Ea.prototype.clone=function(){var a=new Ea(this.__wrapped__);return a.__actions__=Lc(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Lc(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Lc(this.__views__),a},Ea.prototype.reverse=function(){if(this.__filtered__){var a=new Ea(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a},Ea.prototype.value=function(){var a,b=this.__wrapped__.value(),c=this.__dir__,d=hh(b),e=0>c,f=d?b.length:0;a=f;for(var g=this.__views__,h=0,i=-1,j=g.length;++i<j;){var k=g[i],l=k.size;switch(k.type){case"drop":h+=l;break;case"dropRight":a-=l;break;case"take":a=Mf(a,h+l);break;case"takeRight":h=Lf(h,a-l)}}if(a={start:h,end:a},g=a.start,h=a.end,a=h-g,g=e?h:g-1,h=this.__iteratees__,i=h.length,j=0,k=Mf(a,this.__takeCount__),!d||!e&&f==a&&k==a)return yc(b,this.__actions__);d=[];a:for(;a--&&k>j;){for(g+=c,e=-1,f=b[g];++e<i;){var m=h[e],l=m.type,m=(0,m.iteratee)(f);if(2==l)f=m;else if(!m){if(1==l)continue a;break a}}d[j++]=f}return d},za.prototype.at=Og,za.prototype.chain=function(){return $d(this)},za.prototype.commit=function(){return new Ba(this.value(),this.__chain__)},za.prototype.next=function(){this.__values__===P&&(this.__values__=ye(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?P:this.__values__[this.__index__++]}},za.prototype.plant=function(a){for(var b,c=this;c instanceof Aa;){var d=Qd(c);d.__index__=0,d.__values__=P,b?e.__wrapped__=d:b=d;var e=d,c=c.__wrapped__}return e.__wrapped__=a,b},za.prototype.reverse=function(){var a=this.__wrapped__;return a instanceof Ea?(this.__actions__.length&&(a=new Ea(this)),a=a.reverse(),a.__actions__.push({func:_d,args:[Xd],thisArg:P}),new Ba(a,this.__chain__)):this.thru(Xd)},za.prototype.toJSON=za.prototype.valueOf=za.prototype.value=function(){return yc(this.__wrapped__,this.__actions__)},za.prototype.first=za.prototype.head,yf&&(za.prototype[yf]=ae),za}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ra._=eb,define(function(){return eb})):Ta?((Ta.exports=eb)._=eb,Sa._=eb):Ra._=eb}.call(this),function(){"use strict";for(var a=["lightning-services","lightning-locations","ngAnimate","ngSanitize","ngCookies","ngStorage","relativeDate"],b=["angularBingMaps","highcharts-ng","uiGmapgoogle-maps","rzModule","esri.map","angular-websocket"],c=0;c<b.length;c++)try{angular.module(b[c]),a.push(b[c])}catch(d){}var e=angular.module("lightning",a);e.config(["$logProvider",function(a){a.debugEnabled(!1)}]),-1!=a.indexOf("uiGmapgoogle-maps")&&e.config(["uiGmapGoogleMapApiProvider",function(a){var b,c=angular.element(document.getElementById("constant-googleMapApi"));c.length>0?(c=c[0],null!=c.attributes["data-value"]&&(b=c.attributes["data-value"].value)):(c=document.getElementsByTagName("helper:constant"),angular.forEach(c,function(a){null!=a.attributes.name&&"googleMapApi"==a.attributes.name.value&&(b=a.attributes.value.value)})),null!=b?a.configure({key:b,libraries:"visualization"}):a.configure({libraries:"visualization"})}]),e.config(["$provide",function(a){var b=document.getElementsByTagName("helper:constant");angular.forEach(b,function(b){null!=b.attributes&&null!=b.attributes.name&&null!=b.attributes.value&&a.constant(b.attributes.name.value,b.attributes.value.value)})}]),e.config(["$httpProvider",function(a){a.interceptors.push("httpInterceptor")}]),e.run(["$rootScope","$location","ResponseService","PlatformService","QueryIdService","QueryService","$twigkit","$window",function(a,b,c,d,e,f,g,h){var i,j=!0,k=0;a.$on("reloadSearch",function(){k++}),a.$on("$locationChangeSuccess",function(){return i===b.path()?void(0==k?(a.$broadcast("reloadSearch"),k=0):k=0):(1!=j&&(k=0,c.clearResponses(),d.clearPlatforms(),e.clearQueries(),f.clearQueries()),i=b.path(),void(j=!1))}),a.$on("httpInterceptorError",function(c,d){var e=g.getContextPath("/"),f=g.getConstant("loginPage","login");"403"==d.status&&-1!=d.config.url.indexOf("twigkit/api")&&(a.$broadcast("twigkitApi403",{error:d,url:b.url()}),h.location.href=e+f)})}])}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{},controller:["$scope","$lightningUrl",function(a){a.model={filters:[],textInstances:[]};var b=this;b.getFilters=function(){return a.model.filters},b.getAdvancedTextInstances=function(){return a.model.textInstances}}],template:function(){return'<div class="tk-advanced-search" ng-submit="search()" ng-transclude></div>'}};return a}angular.module("lightning").directive("searchAdvanced",a)}(),function(){"use strict";function a(a,b,c){var d={restrict:"E",require:"^^searchAdvanced",scope:{fields:"@"},link:function(d,e,f,g){if(d.fields){var h=function(){return Math.random().toString(36).substr(2,9)+Math.random().toString(36).substr(2,9)},i=f.dateFormat||"medium";d.filters=g.getFilters(),d.instances=[{id:h(),displayFrom:"",displayTo:"",field:null,modifier:"exact"}];var j=function(a){for(var b={},c=a.split(","),d=0;d<c.length;d++){var e=c[d].split("=");2===e.length?b[e[1]]=e[0]:b[e[0]]=e[0]}return b};d.fieldOptions=j(d.fields),d.setRange=function(a,c,e){a&&c&&(e.displayFrom=b("dateFormat")(a,i),e.displayTo=b("dateFormat")(c,i),e.actualFrom=b("dateFormat")(a,"yyyy-MM-ddTHH:mm:ss"),e.actualTo=b("dateFormat")(c,"yyyy-MM-ddTHH:mm:ss"),d.createFilter(e))},d.createFilter=function(b){if(b.field&&b.actualFrom&&b.actualTo){b.id&&k(b.id);var c="none"==b.modifier,e=a.createRangeFilter(b.field,b.actualFrom,b.actualTo,b.displayFrom,b.displayTo,null,null,null,null,c);if(e){var f=a.stringToFilter(e);f.id=b.id,d.filters.push(f)}}},d.addInstance=function(){d.instances.push({id:h(),val:"",field:null,modifier:"exact",actualFrom:"",actualTo:"",displayFrom:"",displayTo:""})},d.removeInstance=function(a){k(a.id),d.instances.pop()};var k=function(a){for(var b=0;b<d.filters.length;b++){var c=d.filters[b];c.id==a&&(d.filters.splice(b,1),b--)}};d.$on("reloadSearch",function(){c(function(){for(var c=d.instances.length-1;c>=0;c--){var e=b("filter")(d.filters,{id:d.instances[c].id})[0];null==e||a.urlContainsFilterFromObject(e)||d.removeInstance(d.instances[c])}0==d.instances.length&&d.addInstance()})})}},template:function(a,b){var c=b.hasOwnProperty("label")?b.label:"",d='<div class="tk-stl-control-group tk-advanced-search-input" ng-repeat="instance in instances track by instance.id">',e=b.hasOwnProperty("multiple")&&"false"==b.multiple?!1:!0,f=b.minView||"";return d+='<div class="entry">',c.length>0&&(d+="<label>"+c+"</label>"),d+='<widget:date-range on-set="setRange(fromDate, toDate, instance)" min-view="'+f+'" ></widget:date-range>',d+="</div>",d+='<select class="field-select" ng-model="instance.field" ng-change="createFilter(instance)"><option value="">Select</option><option ng-repeat="(key, value) in fieldOptions track by $index" value="{{ value }}">{{ key }}</option></select>',d+='<select ng-model="instance.modifier" ng-change="createFilter(instance)"><option value="exact">Match</option><option value="none">Exclude</option></select>',e&&(d+='<span class="actions clickable">',d+='<span ng-if="instances.length > 1 && $last"><i class="icon-minus" ng-click="removeInstance(instance)"></i></span>',d+='<span ng-if="$last"><i class="icon-plus" ng-click="addInstance()"></i></span>',d+="</span>"),d+="</div>"}};return d}angular.module("lightning").directive("advancedDateRange",["$lightningUrl","$filter","$timeout",a])}(),function(){"use strict";function a(a,b){var c={restrict:"E",require:"^^searchAdvanced",scope:{fields:"@"},link:function(c,d,e,f){if(c.fields){c.textInstances=f.getAdvancedTextInstances(),c.textInstances.push({val:"",field:null,modifier:"exact"});var g=function(a){for(var b={},c=a.split(","),d=0;d<c.length;d++){var e=c[d].split("=");2===e.length?b[e[1]]=e[0]:b[e[0]]=e[0]}return b};c.fieldOptions=g(c.fields),c.addInstance=function(){c.textInstances.push({val:"",field:null,modifier:"exact"})},c.removeInstance=function(){c.textInstances.pop()},c.$on("reloadSearch",function(){a(function(){for(var a=c.textInstances.length-1;a>=0;a--){var d;switch(c.textInstances[a].modifier){case"all":d=c.textInstances[a].val.split(" ");for(var e=0;e<d.length;e++)if(!b.urlContainsFilter(c.textInstances[a].field,d[e],d[e])){c.textInstances.splice(a,1);break}break;case"none":d=c.textInstances[a].val.split(" ");for(var f=0;f<d.length;f++)if(!b.urlContainsFilter(c.textInstances[a].field,d[f],d[f],null,!0)){c.textInstances.splice(a,1);break}break;case"any":d=c.textInstances[a].val.split(" ");for(var g=0;g<d.length;g++)if(!b.urlContainsFilter(c.textInstances[a].field,d[g],d[g],"value")){c.textInstances.splice(a,1);break}break;default:b.urlContainsFilter(c.textInstances[a].field,c.textInstances[a].val,c.textInstances[a].val)||c.textInstances.splice(a,1)}}0==c.textInstances.length&&c.addInstance()},0)})}},template:function(a,b){var c=b.hasOwnProperty("label")?b.label:"",d=b.hasOwnProperty("placeholder")?b.placeholder:"Search terms",e=b.hasOwnProperty("multiple")&&"false"==b.multiple?!1:!0,f='<div class="tk-stl-control-group tk-advanced-search-input" ng-repeat="instance in textInstances track by $index">';return f+='<div class="entry">',c.length>0&&(f+="<label>"+c+"</label>"),f+='<input type="text" placeholder="'+d+'" ng-model="instance.val" ng-change="updateFilterForInstance(instance)" style="display: inline-block;">',f+="</div>",f+='<select class="field-select" ng-model="instance.field" ng-change="updateFilterForInstance(instance)"><option value="">Select</option><option ng-repeat="(key, value) in fieldOptions track by $index" value="{{ value }}">{{ key }}</option></select>',f+='<select ng-model="instance.modifier" ng-change="updateFilterForInstance(instance)"><option value="exact">Exact match</option><option value="all">All words</option><option value="all">Any word</option><option value="none">None of the words</option></select>',e&&(f+='<span class="actions clickable">',f+='<span ng-if="textInstances.length > 1 && $last"><i class="icon-minus" ng-click="removeInstance()"></i></span>',f+='<span ng-if="$last"><i class="icon-plus" ng-click="addInstance()"></i></span>',f+="</span>"),f+="</div>"}};return c}angular.module("lightning").directive("advancedText",a),a.$inject=["$timeout","$lightningUrl"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,template:function(){return'<div class="tk-stl-interruptor"><div ng-transclude></div></div>'}};return a}angular.module("lightning").directive("blockInterruptor",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,controller:["$scope","$localStorage","$attrs",function(a,b,c){a.savePreference=function(a,c,d){if(a&&"undefined"!=d){var e=b.tkClassToggles||{};e[a]={"class":c,on:d},b.tkClassToggles=e}},a.applyPreferences=function(){var a=b.tkClassToggles;if(a&&a[c.name]){var d=a[c.name];if(1==d.on){var e=angular.element(document.querySelector(c.target));e.addClass(c.toggleClass)}}}}],link:function(a,b,c,d,e){e(a,function(a){b.append(a)}),a.applyPreferences(),c.target&&c.toggleClass&&b.bind("click",function(){var b=angular.element(document.querySelector(c.target));b.hasClass(c.toggleClass)?(b.removeClass(c.toggleClass),a.savePreference(c.name,c.toggleClass,!1)):(b.addClass(c.toggleClass),a.savePreference(c.name,c.toggleClass,!0))})}};return a}angular.module("lightning").directive("searchClassToggle",a)}(),function(){"use strict";function a(a,b){return{restrict:"A",link:function(c,d,e){var f=void 0!==e.outsideIfNot?e.outsideIfNot.replace(", ",",").split(","):[],g=b(e.clickOutside);void 0!==e.id&&f.push(e.id);var h=function(a){if(!angular.element(d).hasClass("ng-hide")){var b,e=0;if(a&&a.target){for(b=a.target;b;b=b.parentNode){var h=b.id,i=b.className,j=f.length;for(i&&void 0!==i.baseVal&&(i=i.baseVal),e=0;j>e;e++)if(void 0!==h&&"function"==typeof h.indexOf&&h.indexOf(f[e])>-1||i&&"function"==typeof i.indexOf&&i.indexOf(f[e])>-1)return}return c.$apply(function(){return g(c)})}}};a.on("click",h),c.$on("$destroy",function(){a.off("click",h)})}}}angular.module("lightning").directive("clickOutside",["$document","$parse",a])}(),function(){"use strict";function a(a,b,c,d){var e={restrict:"E",transclude:!0,scope:{result:"=?"},link:{post:function(e,f,g){function h(){1==e.bookmarkVm.active?j():i()}function i(){var f={target:g.target,title:g.title,id:0};null==g.topic||isNaN(g.topic)?f.topic=0:f.topic=parseFloat(g.topic),null!=g.collection&&(f.collection=g.collection),null!=g.url?f.url=g.url:f.url=b.absUrl()+"/"+f.target,a.postBookmark(f).then(function(a){c.$broadcast("bookmark_added"),e.bookmarkVm.bookmark=a.data,e.bookmarkVm.active=!0,e.bookmarkVm.count=e.bookmarkVm.count+1},function(a){d.error(a)})}function j(){null==e.bookmarkVm.bookmark&&(e.bookmarkVm.bookmark={}),a.deleteBookmark(e.bookmarkVm.bookmark.id).then(function(){c.$broadcast("bookmark_removed"),e.bookmarkVm.bookmark=null,e.bookmarkVm.active=null,null!=e.bookmarkVm.count&&e.bookmarkVm.count>0?e.bookmarkVm.count=e.bookmarkVm.count-1:e.bookmarkVm.count=null},function(a){d.error(a)})}function k(){var a=!1;if(null!=e.result.facts&&null!=e.result.facts.bookmarks&&e.result.facts.bookmarks.length>0){if(!g.hasOwnProperty("topic")&&!g.hasOwnProperty("collection")&&1==e.result.facts.bookmarks[0].bookmarked_by_user)return e.result.facts.bookmarks[0].count;g.hasOwnProperty("collection")&&e.result.facts.bookmarks[0].collections[g.collection]&&1==e.result.facts.bookmarks[0].collections[g.collection].bookmarked_by_user&&(a=e.result.facts.bookmarks[0].collections[g.collection].count),g.hasOwnProperty("topic")&&e.result.facts.bookmarks[0].topics[g.topic]&&1==e.result.facts.bookmarks[0].topics[g.topic].bookmarked_by_user&&(a=e.result.facts.bookmarks[0].topics[g.topic].count)}return a}if(e.bookmarkVm={},e.result=e.result||e.$parent.result,e.bookmarkVm.tooltip=null!=g.tooltip?g.tooltip:"Bookmark this?",e.bookmarkVm.activeTooltip=null!=g.activeTooltip?g.activeTooltip:"You have bookmarked this",e.bookmarkVm.singularTooltip=null!=g.singularTooltip?g.singularTooltip:" person has bookmarked this.",e.bookmarkVm.pluralTooltip=null!=g.pluralTooltip?g.pluralTooltip:" people have bookmarked this.",null==e.bookmarkVm.rendered)if(f.bind("click",h),e.bookmarkVm.rendered=!0,null!=e.result){var l=k();l&&(e.bookmarkVm.active=!0),e.bookmarkVm.count=l||0}else e.bookmarkVm.count=0;f.on("$destroy",function(){f.unbind("click",h)})}},template:function(a,b){var c='<div class="tk-bookmark" ng-class="{active: bookmarkVm.active}"><ng-transclude><a href="javascript:void(0);"';return"false"!=b.enableTooltip&&(c+='tooltip="{{!bookmarkVm.active ? bookmarkVm.tooltip : bookmarkVm.activeTooltip}}" styling="tooltip-top-right"'),c+='><i ng-class="{\'icon-bookmark-empty\': !hover && !bookmarkVm.active, \'icon-bookmark\': hover || bookmarkVm.active}" ng-mouseenter="hover = true" ng-mouseleave="hover = false"></i></a><span ng-show="bookmarkVm.count != 0 && bookmarkVm.count != null"',"false"!=b.enableTooltip&&(c+='tooltip = "{{bookmarkVm.count == 1 ? bookmarkVm.count + bookmarkVm.singularTooltip : bookmarkVm.count + bookmarkVm.pluralTooltip}}" styling = "tooltip-top-right"'),c+=">{{bookmarkVm.count}}</span></ng-transclude></div>"}};return e}angular.module("lightning").directive("collaborateBookmark",a),
a.$inject=["$twigkit","$location","$rootScope","$log"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:{user:"=",topic:"@",collection:"@"},controller:["$scope","$twigkit","$attrs","$log","$rootScope","PlatformService",function(a,b,c,d,e,f){function g(){var e={};null!=c.target&&(e.target=c.target),null!=a.topic&&(e.topic=a.topic),null!=a.collection&&(e.collection=a.collection),b.getBookmarks(a.user,e).then(function(b){a.bookmarks=b.data},function(a){d.error(a)})}var h=this;a.bookmarks=[],a.emptyText=void 0!=c.emptyText?c.emptyText:"You don't have any bookmarks yet",a.deleteLabel=null==c.deleteLabel?"&times;":c.deleteLabel,a.platform=f.getPlatform(c.platform),g(),h.getBookmarks=g,a.showMoreBookmarks=function(){a.limitTo+a.showMore>a.comments.length?a.limitTo=a.comments.length:a.limitTo+=a.showMore},a.showLessBookmarks=function(){a.limitTo-a.showMore<a.show?a.limitTo=a.show:a.limitTo=a.limitTo-a.showMore},a.deleteBookmark=function(a){b.deleteBookmark(a.id).then(function(){e.$broadcast("bookmark_removed")},function(a){console.log("Error"),console.log(a)})},a.$on("bookmark_added",function(){g()}),a.$on("bookmark_removed",function(){g()})}],template:function(a,b){var c="";return c+="<ng-transclude>",c+='<div class="tk-stl-bookmarks-list">',b.title&&(c+='<p class="title">'+b.title+"</p>"),c+="<ul>",c+='<li ng-repeat="bookmark in bookmarks track by bookmark.id" ng-if="topic != 0 || (topic == 0 && !bookmark.topic)">',c+='<div class="content">',c+='<p><a href="{{::bookmark.url}}">{{ ::bookmark.title }}</a></p>',c+='<span class="metadata">{{ ::bookmark.created | date:"dd/MM/yyyy h:mma"}}</span>',c+='<span class="delete" ng-click="deleteBookmark(bookmark)" ng-bind-html="deleteLabel"></span>',c+="</div>",c+="</li>",c+='<li class="empty-message" ng-show="bookmarks.length == 0 && emptyText.length > 0">',c+='<div class="content"><p class="empty">{{::emptyText}}</p></div>',c+="</li>",c+="</ul>",c+="</div>",c+="</ng-transclude>"}};return a}angular.module("lightning").directive("socialBookmarkList",a).directive("collaborateBookmarkList",a)}(),function(){"use strict";function a(a,b,c,d){var e={restrict:"E",transclude:!0,link:{post:function(e,f,g){function h(){1==e.likeVm.active?j():i()}function i(){a.postLike(k,g.target,g.topic,g.collection).then(function(a){b.$broadcast("like_added"),e.likeVm.like=a.data,e.likeVm.active=!0,e.likeVm.count=e.likeVm.count+1},function(a){c.error(a)})}function j(){null==e.likeVm.like&&(e.likeVm.like={}),a.deleteLike(k,e.likeVm.like.id).then(function(){b.$broadcast("like_removed"),e.likeVm.like=null,e.likeVm.active=null,null!=e.likeVm.count&&e.likeVm.count>0?e.likeVm.count=e.likeVm.count-1:e.likeVm.count=null},function(a){c.error(a)})}e.likeVm={},e.likeVm.label=null!=g.label?g.label:"Like",e.likeVm.tooltip=null!=g.tooltip?g.tooltip:"Do you like this?",e.likeVm.activeLabel=null!=g.activeLabel?g.activeLabel:"Unlike",e.likeVm.activeTooltip=null!=g.activeTooltip?g.activeTooltip:"You have liked this",e.likeVm.singularTooltip=null!=g.singularTooltip?g.singularTooltip:" person has liked this.",e.likeVm.pluralTooltip=null!=g.pluralTooltip?g.pluralTooltip:" people have liked this.";var k=d.getPlatform(g.platform);null==e.likeVm.rendered&&(f.bind("click",h),e.likeVm.rendered=!0,null!=e.result?(null!=e.result.facts&&null!=e.result.facts.likes&&null!=e.result.facts.likes[0]&&1==e.result.facts.likes[0].liked_by_user&&(e.likeVm.active=!0),null!=e.result.facts&&null!=e.result.facts.likes&&null!=e.result.facts.likes[0]&&null!=e.result.facts.likes[0].count?e.likeVm.count=e.result.facts.likes[0].count:e.likeVm.count=0):e.likeVm.count=0),f.on("$destroy",function(){f.unbind("click",h)})}},template:function(a,b){var c='<div><ng-transclude><a href="javascript:void(0);" ';return"false"!=b.enableTooltip&&(c+='tooltip="{{!likeVm.active ? likeVm.tooltip : likeVm.activeTooltip}}" styling="tooltip-top-right"'),c+='>{{!likeVm.active ? likeVm.label : likeVm.activeLabel}}</a><span ng-show="likeVm.count != 0 && likeVm.count != null"',"false"!=b.enableTooltip&&(c+='tooltip="{{likeVm.count == 1 ? likeVm.count + likeVm.singularTooltip : likeVm.count + likeVm.pluralTooltip}}" styling="tooltip-top-right"'),c+=">{{likeVm.count}}</span></ng-transclude></div>"}};return e}angular.module("lightning").directive("collaborateLike",a).directive("socialLike",a),a.$inject=["$twigkit","$rootScope","$log","PlatformService"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:{user:"="},controller:["$scope","$twigkit","$attrs","$log","PlatformService","$location","$rootScope",function(a,b,c,d,e,f,g){function h(){b.getSavedQueries(a.user).then(function(b){a.queries=b.data},function(a){d.error(a)})}a.queries=[],a.emptyText=c.emptyText||"You don't have any saved queries yet",a.allowSaving="false"!=c.allowSaving,a.platform=e.getPlatform(c.platform),h(),a.saveQuery=function(c){a.duplicateError=!1;var e={name:c,topic:0,query:f.absUrl(),"overwrite-existing":!1};b.saveQuery(e).then(function(b){"NAME_ALREADY_EXISTS"==b.data.status&&(a.duplicateError=!0),g.$broadcast("savedQueryAdded",e)},function(a){d.error(a)})},a.deleteQuery=function(a){b.deleteSavedQuery(a).then(function(){g.$broadcast("savedQueryDeleted")},function(a){d.error(a)})},a.closeError=function(b){b.preventDefault(),a.duplicateError=!1},a.$on("savedQueryAdded",function(){h()}),a.$on("savedQueryDeleted",function(){h()})}],template:function(a,b){var c='<div class="tk-stl-saved-searches">';return b.title&&(c+='<p class="title">'+b.title+"</p>"),c+='<form ng-if="::allowSaving">',c+='<div class="pl1em pr1em pt1em" ng-if="duplicateError"><div class="tk-stl-alertbox tk-stl-alertbox-negative">That name already exists <a href="#" class="close" ng-click="closeError($event)">×</a></div></div>',c+='<div class="tk-stl-labelled-input tk-stl-label-right tk-stl-input-1">',c+='<input type="text" placeholder="Search name" ng-model="saveName">',c+='<div class="label"> <button type="submit" class="tk-stl-button" ng-click="saveQuery(saveName)">Save</button> </div>',c+="</div>",c+="</form>",c+="<ul>",c+='<li ng-repeat="query in queries">',c+='<div class="content">',c+='<p><a ng-href="{{ ::query.query_url }}">{{ ::query.name }}</a></p>',c+='<span class="metadata">{{ ::query.created | date:"dd/MM/yyyy h:mma"}}</span>',c+='<span class="delete" ng-click="deleteQuery(query.id)">&times;</span>',c+="</div>",c+="</li>",c+='<li class="empty-message" ng-show="queries.length == 0">',c+='<div class="content"><p class="empty">{{::emptyText}}</p></div>',c+="</li>",c+="</ul>",c+="</div>"}};return a}angular.module("lightning").directive("socialSavedQueryList",a).directive("collaborateSavedQueryList",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{buttonLabel:"@"},controller:["$scope","$twigkit","$rootScope","$log","$attrs",function(a,b,c,d,e){function f(){a.topic={title:null==e.name?"":e.name,"private":"global"!=e.namespace,user:e.user}}a.buttonLabel=null!=a.buttonLabel?a.buttonLabel:"Save",f(),a.submitTopic=function(){b.postTopic(a.topic).then(function(){a.form.$setPristine(),f(),c.$broadcast("topic_added")},function(a){d.error(a)})}}],template:function(){var a='<form name="form" role="form" ng-submit="form.$valid && submitTopic()" novalidate="" class="tk-stl-comment-form">';return a+='<div class="tk-stl-labelled-input tk-stl-label-right"><input type="text" name="title" ng-model="topic.title" required=""/>',a+='<div class="label grey"><button type="submit" class="tk-stl-button" ng-disabled="!form.$valid">{{buttonLabel}}</button></div></div>',a+='<div><span ng-show="form.title.$dirty && form.title.$error.required">Please enter a topic name</span></div>',a+="</form>"}};return a}angular.module("lightning").directive("collaborateTopicForm",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:{},controller:["$scope","$twigkit","$attrs","$log","$rootScope",function(a,b,c,d,e){function f(){var e={};e.results=null!=c.show?c.show:10,b.getTopics(e).then(function(b){a.topics=b.data},function(a){d.error(a)})}a.topics=[],a.emptyText=void 0!=c.emptyText?c.emptyText:"You don't have any topics yet",a.deleteLabel=null==c.deleteLabel?"&times;":c.deleteLabel,f(),a.deleteTopic=function(a){b.deleteTopic(a.id).then(function(){e.$broadcast("topic_removed")},function(a){console.log("Error"),console.log(a)})},a.$on("topic_added",function(){f()}),a.$on("topic_removed",function(){f()})}],template:function(a,b){var c='<div class="tk-stl-bookmarks-list">';return b.title&&(c+='<p class="title">'+b.title+"</p>"),c+="<ul>",c+="<ng-transclude>",c+='<li ng-repeat="topic in topics track by $index">',c+='<div class="content">',c+="<p><a>{{ ::topic.title }}</a></p>",c+='<span class="metadata">{{ ::topic.created | date:"dd/MM/yyyy h:mma"}}</span>',c+='<span class="delete" ng-click="deleteTopic(topic)" ng-bind-html="deleteLabel"></span>',c+="</div>",c+="</li>",c+="</ng-transclude>",c+='<li class="empty-message" ng-show="topics.length == 0 && emptyText.length > 0">',c+='<div class="content"><p class="empty">{{::emptyText}}</p></div>',c+="</li>",c+="</ul>",c+="</div>"}};return a}angular.module("lightning").directive("collaborateTopicList",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",scope:{label:"@",field:"@",trueValue:"@",falseValue:"@",value:"@"},link:function(a,b,c,d){a.trueValue=null!=a.trueValue?a.trueValue:!0,a.falseValue=null!=a.falseValue?a.falseValue:!1,a.model=d.getModel(),null!=a.value&&(a.model[a.field]=1==a.value?!0:!1)},template:function(a,b){var c='<div class="tk-stl-controls">';return c+='<label class="tk-stl-checkbox">',c+=null!=b.trueValue&&null!=b.falseValue?'<input id="{{field}}" name="{{field}}" placeholder="{{label}}" ng-model="model[field]" type="checkbox" ng-true-value="{{trueValue}}" ng-false-value="{{falseValue}}">{{label}}</label>':'<input id="{{field}}" name="{{field}}" placeholder="{{label}}" ng-model="model[field]" type="checkbox" ng-checked="value == \'true\'">{{label}}</label>',c+="</div>"}};return a}angular.module("lightning").directive("contentBoolean",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{legend:"@",action:"@",content:"=?"},controller:["$scope","$attrs","$twigkit","$http","PlatformService","$httpParamSerializerJQLike","$timeout","$filter","$rootScope",function(a,b,c,d,e,f,g,h,i){function j(){var b=angular.copy(a.content);if(null!=b&&null!=b.result&&null!=b.result.fields&&(b=b.result),null==b||null==b.fields||angular.isString(b.fields)){if(null!=b&&angular.isObject(b))for(var c in b)a.model[c]=b[c]}else angular.forEach(b.fields,function(b,c){a.model[c]=h("actual")(b)})}function k(){return a.model}function l(){return a.form}a.model={},a.$watchCollection("content",function(){j()});var m=this;m.getModel=k,m.getForm=l,a.submit=function(){"update"!=a.action&&(a.action="store"),a.error=null;var h=null;if(null!=b.platform){var j=e.getPlatform(b.platform);null!=j&&null!=j.conf&&(h=c.getContextPath("/")+"twigkit/api/core/services/platform/"+a.action+"/"+j.conf+"/form")}null!=h&&(a.formClass="submitting",d({url:h,dataType:"json",method:"POST",data:f(a.model),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0}).then(function(){a.success=!0,i.$broadcast("contentFormPostSuccess",a.model),g(function(){a.success=!1},5e3)},function(b){i.$broadcast("contentFormPostError",b),a.error=b})["finally"](function(){a.formClass=!1}))}}],template:function(){return'<form name="form" class="tk-stl-form" novalidate ng-submit="form.$valid && submit()" ng-class="formClass"><fieldset><legend ng-show="legend != null">{{legend}}</legend><search:alert styling="alertbox-positive" ng-if="success">Form posted successfully.</search:alert><search:alert styling="alertbox-negative" ng-if="error != null">Error! {{error.status}} - {{error.statusText}}.</search:alert><ng-transclude></ng-transclude></fieldset></form>'}};return a}angular.module("lightning").directive("contentForm",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",scope:{label:"@",field:"@",required:"@",value:"@",placeholder:"@"},link:function(a,b,c,d){a.required=null==a.required?!1:a.required,a.model=d.getModel(),a.form=d.getForm(),null!=a.value&&(a.model[a.field]=a.value)},template:function(a,b){var c="true"==b.hidden?"hidden":"text";return'<div class="tk-stl-control-group"><label>{{label}} <strong ng-show="required == \'true\'">*</strong></label><input id="{{field}}" name="{{field}}"  type="'+c+'" placeholder="{{placeholder == null ? label : placeholder}}" ng-model="model[field]" ng-required="{{required}}"><span ng-show="(form[field].$touched || form.$submitted) && form[field].$error.required">This field is required.</span></div>'}};return a}angular.module("lightning").directive("contentInput",a).directive("contentTextbox",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",scope:{label:"@",field:"@",value:"@"},link:function(a,b,c,d){a.model=d.getModel()},template:function(){return'<div class="tk-stl-controls"><label class="tk-stl-radio"><input id="{{field}}" name="{{field}}" placeholder="{{label}}" ng-model="model[field]" type="radio" value="{{value}}">{{label}}</label></div>'}};return a}angular.module("lightning").directive("contentRadio",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",transclude:!0,scope:{},link:function(a,b,c,d){a.model=d.getModel(),a.form=d.getForm()},template:function(){return'<div class="tk-stl-controls"><button type="submit" class="tk-stl-button pure-button-primary"><ng-transclude>Submit</ng-transclude></button></div>'}};return a}angular.module("lightning").directive("contentSubmit",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",scope:{label:"@",field:"@",required:"@",value:"@",placeholder:"@"},link:function(a,b,c,d){a.required=null==a.required?!1:a.required,a.model=d.getModel(),a.form=d.getForm(),null!=a.value&&(a.model[a.field]=a.value)},template:function(){return'<div class="tk-stl-control-group"><label>{{label}} <strong ng-show="required == \'true\'">*</strong></label><textarea id="{{field}}"  name="{{field}}" placeholder="{{placeholder == null ? label : placeholder}}" ng-model="model[field]" ng-required="{{required}}"></textarea><span ng-show="(form[field].$touched || form.$submitted) && form[field].$error.required">This field is required.</span></div>'}};return a}angular.module("lightning").directive("contentTextarea",a)}(),function(){"use strict";function a(a){return{restrict:"A",replace:!0,link:function(b,c,d){b.$watch(d.ngCompile,function(d){c.html(d),a(c.contents())(b)})}}}angular.module("lightning").directive("ngCompile",a),a.$inject=["$compile"]}(),function(){"use strict";function a(){var a={restrict:"A",controller:"@",name:"controller"};return a}angular.module("lightning").directive("controller",a)}(),function(){"use strict";function a(a){var b={restrict:"A",link:function(b,c,d){var e="ng-hide",f="ng-hide-animate",g=d.hideWhen;b.$eval(g)&&c.addClass("ng-hide"),b.$watch(g,function(b,d){b!==d&&a[b?"addClass":"removeClass"](c,e,{tempClasses:f})})}};return b}angular.module("lightning").directive("hideWhen",a),a.$inject=["$animate"]}(),function(){"use strict";function a(){return{restrict:"EAC",link:function(a,b,c,d,e){if(!e)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag(b));var f=!1;if(e(function(a){a.length&&(f=!0)}),f){var g=a.$new();e(g,function(a){b.empty(),b.append(a),b.on("$destroy",function(){g.$destroy()})})}}}}angular.module("lightning").directive("ngInject",a)}(),function(){"use strict";function a(a){var b={restrict:"A",link:function(b,c,d){var e="ng-hide",f="ng-hide-animate",g=d.showWhen;b.$eval(g)||c.addClass("ng-hide"),b.$watch(g,function(b,d){b!==d&&a[b?"removeClass":"addClass"](c,e,{tempClasses:f})})}};return b}angular.module("lightning").directive("showWhen",a),a.$inject=["$animate"]}(),function(){"use strict";function a(a){return{restrict:"E",link:function(b,c){function d(){e++,c[0].innerHTML="$digests: "+e}var e=0;a.$watch(d)}}}angular.module("lightning").directive("devTrackDigests",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(){var a={restrict:"E",template:function(a,b){return'<span id="constant-'+b.name+'" data-value="'+b.value+'" style="display:none;"></span>'}};return a}angular.module("lightning").directive("helperConstant",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{"var":"@",value:"="},controller:["$scope",function(a){a.$watch("value",function(b){a.$parent[a["var"]]=b})}]};return a}angular.module("lightning").directive("helperSet",a)}(),function(){"use strict";function a(){var a={restrict:"E",link:function(a,b,c){window.document.title=c.title}};return a}angular.module("lightning").directive("helperTitle",a)}(),function(){"use strict";function a(a,b,c,d,e){var f=[],g={restrict:"E",scope:{},replace:!0,transclude:!0,require:["^?searchSearch","^?searchAdvanced"],link:{post:function(g,h,i,j,k){if(null!=j){var l=-1;e(function(){var a=angular.element(h.parent().parent().children()[0]),b={DOWN:40,UP:38,ENTER:13};a.bind("keydown",function(a){var c;if(a.which===b.DOWN)a.preventDefault(),angular.forEach(h.children(),function(a){angular.element(a).removeClass("selected")}),-1==l||l+1>h.children().length-1?l=0:l++,c=angular.element(h.children()[l]),c.addClass("selected");else if(a.which===b.UP)a.preventDefault(),angular.forEach(h.children(),function(a){angular.element(a).removeClass("selected")}),-1==l||0==l?l=h.children().length-1:l--,c=angular.element(h.children()[l]),c.addClass("selected");else if(a.which===b.ENTER&&l>-1){a.preventDefault();var d=angular.element(h.children()[l]).find("a")[0];null!=angular.element(d)[0].href&&(window.location=angular.element(d)[0].href)}})},0),g.$on("instant_search_changed",function(e,j){if(g.lastSearch==j||""==j.trim())g.$emit("instant_results_loaded",0);else{g.lastSearch=j,a.remove(f,function(){f=[]});var m=null==i.platform?"platform":i.platform;g.platform=c.getPlatform(m),null!=g.platform?b.search(j+"*",g.platform,{rpp:5}).then(function(b){return 0==b.data.results.length?void g.$emit("instant_results_loaded",b.data.results.length):(l=-1,angular.forEach(b.data.results,function(b){var c=g.$new(!0);c.result=b.result;var d=a.render(k,h,c);f.push({elem:d,scope:c})}),void g.$emit("instant_results_loaded",b.data.results.length))}):(g.$emit("instant_results_loaded",0),d.debug("InstantResultList","No platform was found, please add the platform attribute or check you are creating the platform."))}})}}},template:function(a,b){var c='<ul style="top:0;width: 100%;">';return b.hasOwnProperty("title")&&(c+='<li class="instant-results-title"><strong>'+b.title+"</strong></li>"),c+='<li ng-repeat="result in results"></li></ul>'}};return g}angular.module("lightning").directive("instantResultList",a),a.$inject=["$util","$twigkit","PlatformService","$lightningLog","$timeout"]}(),function(){"use strict";function a(){var a={scope:{on:"=?"},link:function(a,b,c){a.$watch("on",function(a){a?(b.removeClass("ng-hide"),b.addClass(c.animation)):(b.addClass("ng-hide"),b.removeClass(c.animation))})}};return a}angular.module("lightning").directive("layoutAnimate",a)}(),function(){"use strict";function a(){var a={link:function(a,b,c){function d(){f();var a="";c.layoutBlock?a=c.layoutBlock:(a+=c.tiny||c.xs?c.tiny||c.xs:"1",c.small&&(a+=" sm-"+c.small),c.medium&&(a+=" md-"+c.medium),c.large&&(a+=" lg-"+c.large),c.sm&&(a+=" sm-"+c.sm),c.md&&(a+=" md-"+c.md),c.lg&&(a+=" lg-"+c.lg),c.xl&&(a+=" xl-"+c.xl),c.xsOffset&&(a+=" offset-xs-"+c.xsOffset),c.smOffset&&(a+=" offset-sm-"+c.smOffset),c.mdOffset&&(a+=" offset-md-"+c.mdOffset),c.lgOffset&&(a+=" offset-lg-"+c.lgOffset),c.xlOffset&&(a+=" offset-xl-"+c.xlOffset)),a=a.trim();for(var d="",g=a.split(" "),h=0;h<g.length;h++)d+="tk-rgrid-u-"+g[h]+" ";d=d.trim(),e(d),b.addClass(d)}function e(a){g=a}function f(){g.length>0&&b.removeClass(g)}var g="";c.hasOwnProperty("dynamic")?(c.$observe("xs",d),c.$observe("tiny",d),c.$observe("sm",d),c.$observe("small",d),c.$observe("md",d),c.$observe("medium",d),c.$observe("lg",d),c.$observe("large",d),c.$observe("xl",d),c.$observe("xsOffset",d),c.$observe("smOffset",d),c.$observe("mdOffset",d),c.$observe("lgOffset",d),c.$observe("xlOffset",d)):d()}};return a}angular.module("lightning").directive("layoutBlock",a)}(),function(){"use strict";function a(){var a={restrict:"E",link:function(a,b){b.addClass("tk-rgrid-box")}};return a}angular.module("lightning").directive("layoutBox",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:!1,template:'<div class="tk-stl-centercontent"><div class="tk-stl-centercontent-inner" ng-transclude></div></div>'};return a}angular.module("lightning").directive("layoutCenterContent",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,template:function(){return'<div class="tk-bl-content" ng-transclude></div>'}};return a}angular.module("lightning").directive("layoutContent",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,template:function(){return'<ul class="clearfix tk-stl-sortoptions" ng-transclude></ul>'}};return a}angular.module("lightning").directive("layoutControls",a)}(),function(){"use strict";function a(){var a={link:function(a,b,c){c.hasOwnProperty("fixed")?b.addClass("tk-rgrid-u"):b.addClass("tk-rgrid-g")}};return a}angular.module("lightning").directive("layoutGrid",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{file:"@"},transclude:!0,link:function(a,b,c){var d=[];for(var e in c)if(c.hasOwnProperty(e)&&e.charAt(0).match(/[a-z]/i)&&"ng"!=e.substring(0,2)&&"file"!=e){try{a[e]=a.$eval(c[e]),(void 0==a[e]||"number"==typeof a[e]&&isNaN(a[e]))&&(a[e]=c[e])}catch(f){a[e]=c[e]}d.push(e)}},template:function(){return'<div ng-include="file" ng-inject></div>'}};return a}angular.module("lightning").directive("layoutInclude",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,template:function(a,b){b.imageLink=null==b.imageLink||""==b.imageLink.trim()?"/":b.imageLink,b.alt=null==b.alt?"Logo":b.alt;var c='<div class="tk-header-logo">';return null!=b.image&&(c+='<a href="'+b.imageLink+'">',c+='<img src="'+b.image+'"',c+='style="',null!=b.height&&(c+="height:"+b.height+";"),null!=b.width&&(c+="width:"+b.width),c+='"',c+='alt="'+b.alt+'" />',c+="</a>"),c+="</div>"}};return a}angular.module("lightning").directive("layoutLogo",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,template:function(){return'<aside class="tk-bl-sidebar" ng-transclude></aside>'}};return a}angular.module("lightning").directive("layoutSidebar",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){b.addClass("tk-stl-sidebar-offcanvas-"+c.drawer)}};return a}angular.module("lightning").directive("drawer",a)}(),function(){"use strict";function a(){var a={restrict:"A",scope:{dynamicStyling:"@"},link:function(a,b){function c(a){d.length>0&&b.removeClass(d),d="";for(var c=a.trim().split(" "),e=0;e<c.length;e++)""!=c[e].trim()&&(d+=" tk-stl-"+c[e].trim());b.addClass(d.trim())}var d="";a.$watch("dynamicStyling",function(a){c(a)})}};return a}angular.module("lightning").directive("dynamicStyling",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){var d=c.paddingBottom;"0"==d?b.addClass("pb0em"):"0.25"==d||"025"==d?b.addClass("pb025em"):"0.5"==d||"05"==d?b.addClass("pb05em"):"1"==d?b.addClass("pb1em"):"2"==d&&b.addClass("pb2em")}};return a}angular.module("lightning").directive("paddingBottom",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){var d=c.paddingLeft;"0"==d?b.addClass("pl0em"):"0.25"==d||"025"==d?b.addClass("pl025em"):"0.5"==d||"05"==d?b.addClass("pl05em"):"1"==d?b.addClass("pl1em"):"2"==d&&b.addClass("pl2em")}};return a}angular.module("lightning").directive("paddingLeft",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){var d=c.paddingRight;"0"==d?b.addClass("pr0em"):"0.25"==d||"025"==d?b.addClass("pr025em"):"0.5"==d||"05"==d?b.addClass("pr05em"):"1"==d?b.addClass("pr1em"):"2"==d&&b.addClass("pr2em")}};return a}angular.module("lightning").directive("paddingRight",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){var d=c.paddingTop;"0"==d?b.addClass("pt0em"):"0.25"==d||"025"==d?b.addClass("pt025em"):"0.5"==d||"05"==d?b.addClass("pt05em"):"1"==d?b.addClass("pt1em"):"2"==d&&b.addClass("pt2em")}};return a}angular.module("lightning").directive("paddingTop",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){if(c.style.length>0&&-1===c.style.indexOf(":")){console.warn('Style directive is deprecated, use "styling" instead for Internet Explorer support.',b);for(var d=c.style.trim().split(" "),e=0;e<d.length;e++)""!=d[e].trim()&&b.addClass("tk-stl-"+d[e].trim())}}};return a}angular.module("lightning").directive("style",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){for(var d=c.styling.trim().split(" "),e=0;e<d.length;e++)""!=d[e].trim()&&b.addClass("tk-stl-"+d[e].trim())}};return a}angular.module("lightning").directive("styling",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){b.addClass("tk-stl-tooltip").attr("aria-label",c.tooltip),c.$observe("tooltip",function(a){b.addClass("tk-stl-tooltip").attr("aria-label",a)})}};return a}angular.module("lightning").directive("tooltip",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,controller:["$scope","$timeout","$attrs","$lightningLog",function(a,b,c,d){a.show=!1,d.debug("LifecycleDelay","Starting delay of "+c.delay+"ms"),b(function(){d.debug("LifecycleDelay","Finished delay"),a.show=!0},c.delay)}],template:function(){return'<ng-transclude ng-if="show"></ng-transclude>'}};return a}angular.module("lightning").directive("lifecycleDelay",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,controller:["$scope","$timeout","$attrs","$lightningLog",function(a,b,c,d){a.show=!0,d.debug("LifecycleDisplay","Displaying elements for "+c.time+"ms."),b(function(){d.debug("LifecycleDisplay","Finished displaying elements."),a.show=!1},c.time)}],template:function(){return'<ng-transclude ng-if="show"></ng-transclude>'}};return a}angular.module("lightning").directive("lifecycleDisplay",a)}(),function(){"use strict";function a(a,b){var c={restrict:"E",scope:{},transclude:!0,link:function(c,d,e){e.global=null!=e.global&&""!=e.global.trim()?e.global:"true","true"==e.global?(b.debug("LifecycleEvent",'Broadcasting event "'+e.event+'" globally.'),a.$broadcast(e.event)):(b.debug("LifecycleEvent",'Broadcasting event "'+e.event+'".'),c.$broadcast(e.event))},template:function(){return"<ng-transclude></ng-transclude>"}};return c}angular.module("lightning").directive("lifecycleEvent",a),a.$inject=["$rootScope","$lightningLog"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{event:"@"},transclude:!0,controller:["$scope","$attrs","$lightningLog",function(a,b,c){a.show="true"==b.hide,c.debug("LifecycleOn",'Listening for event "'+a.event+'".'),a.$on(a.event,function(){c.debug("LifecycleOn",'Event "'+a.event+'" heard.'),a.show="true"!=b.hide})}],template:function(){return'<ng-transclude ng-if="show"></ng-transclude>'}};return a}angular.module("lightning").directive("lifecycleOn",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{object:"=?"},transclude:!0,controller:["$scope","$attrs","$lightningLog",function(a,b,c){a.show=!1,a.$watch("object",function(d){d?(c.debug("LifecycleRequired",b.object+" has a value, rendering children."),a.show=!0):a.show=!1})}],template:function(){return'<ng-transclude ng-if="show"></ng-transclude>'}};return a}angular.module("lightning").directive("lifecycleRequired",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{fetch:"@"},transclude:!0,controller:["$scope","$attrs","QueryService","$twigkit",function(a,b,c,d){function e(){var e=c.getQueryAsHttpParams(b.query),f=d.getContextPath("/");a.url=f+"twigkit/services/media/export/csv/"+b.conf,a.url+="?delimiter="+(null==b.delimiter?",":b.delimiter),e.max=null==a.fetch?20:a.fetch,e.rpp=null==b.batchSize?10:b.batchSize,null!=b.fields&&(e.fi=b.fields),angular.forEach(e,function(b,c){angular.isArray(b)?angular.forEach(b,function(b){a.url+="&"+c+"="+b}):a.url+="&"+c+"="+b})}e(),a.$on("query_"+b.query+"_updated",function(){e()}),a.$watch("fetch",function(){e()})}],template:function(){return'<a ng-href="{{url}}" target="_blank"><ng-transclude>Export</ng-transclude></a>'}};return a}angular.module("lightning").directive("mediaCsv",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){b.bind("error",function(){c.src!=c.defaultSrc&&c.$set("src",c.defaultSrc)})}};return a}angular.module("lightning").directive("defaultSrc",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{fetch:"@"},transclude:!0,replace:!0,controller:["$scope","$attrs","QueryService","$twigkit",function(a,b,c,d){function e(){var e=c.getQueryAsHttpParams(b.query),f=d.getContextPath("/");a.url=f+"twigkit/services/media/export/excel/"+b.conf,a.url+="?max="+(null==a.fetch?20:a.fetch),null!=b.fields&&(a.url+="&fi="+b.fields),null!=b.header&&(a.url+="&header="+b.header),angular.forEach(e,function(b,c){angular.isArray(b)?angular.forEach(b,function(b){a.url+="&"+c+"="+b}):a.url+="&"+c+"="+b})}e(),a.$on("query_"+b.query+"_updated",function(){e()}),a.$watch("fetch",function(){e()})}],template:function(){return'<a ng-href="{{url}}" target="_blank"><ng-transclude>Export</ng-transclude></a>'}};return a}angular.module("lightning").directive("mediaExcel",a)}(),function(){"use strict";function a(a,b,c,d,e,f){var g={restrict:"E",scope:{result:"=?",fieldName:"@",fieldPrefix:"@",fieldSuffix:"@",lazyLoad:"@",fallbackImageUrl:"@",src:"@",url:"@",cacheOriginal:"@",imageServiceUrl:"@"},replace:!1,link:function(f,g,h){function i(b){if(null!=b){f.result=b;var c=f.result.fields[f.fieldName];null!=c?f.newSrc=a("actualValue")(c.val):f.fallbackImageUrl&&(f.newSrc=f.fallbackImageUrl),null!=f.fieldPrefix&&(f.newSrc=f.fieldPrefix+f.newSrc),null!=f.fieldSuffix&&(f.newSrc=f.newSrc+f.fieldSuffix),f.newSrc=j(f.newSrc)}else f.src=null,f.newSrc=null}function j(a){var b=new RegExp("^(?:[a-z]+:)?//","i"),c=b.test(a);if(c||(a=null!=a&&0===a.indexOf("/")?location.origin+a:location.href+"/"+a),f.cacheOriginal="false"!=f.cacheOriginal,null==f.imageServiceUrl){var d=e.getContextPath("/");a=d+"twigkit/services/images/resize/?cacheOriginal="+f.cacheOriginal+"&url="+window.encodeURIComponent(a),h.width>0&&(a+="&width="+h.width),h.height>0&&(a+="&height="+h.height)}return a}function k(a,b){var c=g[0].getBoundingClientRect();c.top>=0&&c.bottom<=a&&c.left>=0&&c.right<=b&&(l.attr("src",f.newSrc),l.css("opacity",1),m())}var l=angular.element(g.find("img")[0]);if("true"==f.lazyLoad){var m;l.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity 1s ease-in",transition:"opacity 1s ease-in"}),null!=h.height&&l.attr("height",h.height),null!=h.width&&l.attr("width",h.width),m=b.bindListener(k),g.on("$destroy",function(){m()}),f.$watch("src",function(a){a&&k(c[0].documentElement.clientHeight,c[0].documentElement.clientWidth)})}null!=f.url&&(g.addClass("clickable"),g.bind("click",function(){d.location.href=f.url})),null!=f.fallbackImageUrl?l.attr("onerror","this.src = '"+f.fallbackImageUrl+"'"):l.attr("onerror","this.style.cssText = 'display:none !important'"),null==f.src||""==f.src.trim()?null!=f.result?f.$watch("result",function(a){i(a)}):null!=f.$parent.result?f.$watch("$parent.result",function(a){i(a)}):null!=f.fallbackImageUrl&&(f.newSrc=j(f.fallbackImageUrl)):f.newSrc=j(f.src);
},template:function(a,b){var c=f.hasStyle("square-crop",b.styling),d=f.hasStyle("circle-crop",b.styling),e="";return c&&(e+='<div class="tk-rgrid-img-squarecrop">',e+='<div class="tk-rgrid-img-squarecrop-inner">'),d&&(e+='<div class="tk-rgrid-img-circlecrop">',e+='<div class="tk-rgrid-img-circlecrop-inner">'),e+="true"!=b.lazyLoad?'<img ng-src="{{newSrc}}"/>':"<img/>",(c||d)&&(e+="</div></div>"),e}};return g}angular.module("lightning").directive("mediaImage",a),a.$inject=["$filter","scrollAndResizeListener","$document","$window","$twigkit","$util"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,require:"^^searchQuery",link:{pre:function(a,b,c,d){c.name&&c.value&&d.addCustomParameter(c.name,c.value)}}};return a}angular.module("lightning").directive("queryCustom",a)}(),function(){"use strict";function a(a){var b={restrict:"E",transclude:!0,require:"^^searchQuery",link:{pre:function(b,c,d,e){var f="",g="true"==d.exclude;d.value&&d.field?(f+=a.createFilter(d.field,d.value,d.value,d.optional,g),f=a.stringToFilter(f),"true"==d.hidden&&(f.hidden=!0),"remove"!=d.action?e.addFilter(f):d.field&&"*"!=d.value&&e.removeFilter(f)):d.from||d.to||d.display?(f+=d.display?a.createRangeFilterDisplay(d.field,d.from,d.to,d.display,d.optional):a.createRangeFilter(d.field,d.from,d.to,d.from,d.to,d.optional),f=a.stringToFilter(f),"true"==d.hidden&&(f.hidden=!0),"remove"!=d.action?e.addFilter(f):e.removeFilter(f)):d.field&&e.removeAllFilters(d.field)}}};return b}angular.module("lightning").directive("queryFilter",a),a.$inject=["$lightningUrl"]}(),function(){"use strict";function a(a){var b=document.createElement("textarea");return b.innerHTML=a,b.value}function b(b,c,d,e,f){var g={restrict:"E",transclude:!0,require:["^?searchSearch","^?searchAdvanced"],link:{pre:function(g,h,i,j){if(null!=j){var k=f.getContextPath("/"),l=null==i.serviceUrl?k+"twigkit/services/query-suggestion-service/":i.serviceUrl,m=null==i.completionService?"":i.completionService,n=l+m,o=null==i.show||isNaN(i.show)?-1:i.show;g.suggestions=[],g.$on("instant_search_changed",function(a,c){var e={q:c};g.lastSearch==c||""==c.trim()||(g.lastSearch=c,b({method:"GET",url:n,params:e}).then(function(a){var b=0;g.suggestionGroups=[],angular.forEach(a.data,function(a){if(a.values.length>0&&(-1==o||o>b)){var c=[],d={title:a.title};angular.forEach(a.values,function(a){(-1==o||o>b)&&(c.push(a),b++)}),d.values=c,g.suggestionGroups.push(d)}}),b>0&&(g.showSuggestions=!0),g.$emit("instant_results_loaded",b)},function(a){d.debug("QuerySuggestions","Query Suggestion service returned an error."),d.debug("QuerySuggestions",a)}))})}g.goToSuggestion=function(b){null!=i.action&&c.path(i.action),g.showSuggestions=!1;var d=c.path()+a(b.parameters);c.url(d),e.$broadcast("paramChange","q"),e.$broadcast("reloadSearch")}}},template:function(){var a='<ul style="top:0;" class="tk-stl-input-1" ng-show="showSuggestions">';return a+='<div ng-repeat="suggestionGroup in suggestionGroups">',a+='<li class="query-suggestion-title"><strong>{{suggestionGroup.title}}</strong></li>',a+='<li ng-repeat="suggestion in suggestionGroup.values">',a+='<a href="javascript:void(0);" ng-click="goToSuggestion(suggestion)" ng-bind-html="suggestion.highlighting"></a>',a+="</li>",a+="</div>",a+="</ul>"}};return g}angular.module("lightning").directive("querySuggestions",b),b.$inject=["$http","$location","$lightningLog","$rootScope","$twigkit"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,controller:["$scope",function(a){a.show=!0,a.close=function(){a.show=!1}}],template:function(a,b){var c=b.styling||"";return'<div class="tk-stl-alertbox" ng-show="show" styling="'+c+'"><div ng-transclude></div><a href="javascript:void(0);" class="close" ng-click="close()">&times;</a></div>'}};return a}angular.module("lightning").directive("searchAlert",a)}(),function(){"use strict";function a(a){return{restrict:"E",scope:{response:"&",placeholder:"@",buttonLabel:"@",delay:"@",searchWithinDefaultValue:"@"},transclude:!0,require:"^?searchAdvanced",controller:["$scope","$lightningUrl","$attrs","$location","$timeout","PlatformService","QueryService","$filter","$element",function(a,b,c,d,e,f,g,h,i){var j,k;null!=c.query&&(k=g.getQuery(c.query)),a.delay=c.delay,a.model={query:b.getUrlParameter("q",""),loading:!1},null!=k&&null!=k.val&&(a.model.query=h("display")(k.val)),a.platform=f.getPlatform(c.platform),a.action=c.action,a.showInstantResults=!1,a.showSavedQueries=!1,a.showBookmarks=!1,a.search=function(f){a.closePopups(),j&&e.cancel(j),a.swModel.searchWithin||b.resetAllParameters(!1),null!=c.query&&(k=g.getQueryAsHttpParams(c.query,!0),null!=k&&b.setUrlParameters(k,!1));var h=i.controller("searchAdvanced");if(h){for(var l=h.getFilters(),m=0;m<l.length;m++)b.addFilterObjectToUrl(l[m],!1);for(var n=h.getAdvancedTextInstances(),o=0;o<n.length;o++)if(n[o].field){var p;switch(n[o].modifier){case"all":p=n[o].val.split(" ");for(var q=0;q<p.length;q++)b.addFilterToUrl(n[o].field,p[q],p[q],!1);break;case"none":p=n[o].val.split(" ");for(var r=0;r<p.length;r++)b.addFilterToUrl(n[o].field,p[r],p[r],!1,null,!0);break;case"any":p=n[o].val.split(" ");for(var s=0;s<p.length;s++)b.addFilterToUrl(n[o].field,p[s],p[s],!1,"value");break;default:b.addFilterToUrl(n[o].field,n[o].val,n[o].val,!1)}}}b.setUrlParameter("mq",null,!1),b.setUrlParameter("q",f,!0),null!=c.action&&d.path(c.action)},a.searchWrapper=function(b){a.hasChildren||null!=c.action||a.search(b)},a.setSearchQuery=function(b){a.model.query=b,a.hasChildren&&(j=e(function(){b==a.model.query&&(a.showInstantResults=!1,a.model.query=b,a.model.loading=!0,a.$broadcast("instant_search_changed",b))},300))},a.closeInstantResults=function(){a.showInstantResults=!1},a.toggleSavedSearches=function(){a.showSavedQueries=!a.showSavedQueries,a.showSavedQueries&&(a.showBookmarks=!1)},a.toggleBookmarks=function(){a.showBookmarks=!a.showBookmarks,a.showBookmarks&&(a.showSavedQueries=!1)},a.$on("instant_results_loaded",function(b,c){a.model.loading=!1,c>0&&(a.showInstantResults=!0)}),a.$on("$locationChangeSuccess",function(){a.showInstantResults=!1,a.model.query=b.getUrlParameter("q",""),null!=c.query&&(k=g.getQuery(c.query)),null!=k&&null!=k.val&&(a.model.query=h("display")(k.val))}),"true"==c.social&&a.$on("savedQueryAdded",function(){a.showSavedQueries=!1}),a.closePopups=function(){a.showBookmarks=!1,a.showSavedQueries=!1,a.showInstantResults=!1}}],link:function(b,c,d,e,f){if(b.hasChildren=a.hasChildren(f),b.swModel={searchWithin:"true"==b.searchWithinDefaultValue?!0:!1},d.placeholder=d.placeholder||"Search",d.buttonLabel=d.buttonLabel||"Search",b.instant=!1,(null!=d.action||1==b.hasChildren)&&(b.instant=!0),"true"==d.social){var g=document.getElementsByTagName("body")[0];c.bind("click",function(a){a.stopPropagation()}),angular.element(g).bind("click",b.closePopups),b.$on("$destroy",function(){c.unbind("click"),angular.element(g).unbind("click",b.closePopups)})}},template:function(a,b){b.delay||(b.delay=0);var c="true"==b.social?"tk-stl-social-search":"",d=b.hasOwnProperty("size")?"tk-stl-"+b.size:"",e='<form><div class="tk-stl-search-input tk-stl-labelled-input tk-stl-label-right tk-stl-input-1 '+c+'">';return e+='<input class="'+d+'" type="search" placeholder="{{::placeholder }}" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-model="model.query" ng-if="::(action != null || hasChildren)" ng-change="setSearchQuery(model.query)"/>',e+='<input class="'+d+'" type="search" placeholder="{{::placeholder }}" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-change="delay > 0 && searchWrapper(model.query)" ng-model="model.query" ng-if="::(action == null && !hasChildren)" ng-model-options="{debounce: '+b.delay+'}"/>',"true"==b.social&&(e+='<i class="icon-heart '+d+'" ng-click="toggleSavedSearches()"></i>',e+='<i class="icon-bookmark '+d+'" ng-click="toggleBookmarks()"></i>',e+='<collaborate:saved-query-list platform="'+b.platform+'" title="My Saved Searches" ng-class="{show: showSavedQueries}"></collaborate:saved-query-list>',e+='<collaborate:bookmark-list platform="'+b.platform+'" title="My Bookmarks" ng-class="{show: showBookmarks}" topic="0"></collaborate:bookmark-list>'),e+='<div class="label">',e+='<div class="tk-stl-circle-loader-wrapper" ng-class="{\'ng-hide\':model.loading != true }"><div class="tk-stl-circle-loader tk-stl-search-loader"></div></div>',e+='<button type="submit" class="tk-stl-button tk-stl-button '+d+'" ng-click="search(model.query)">{{ ::buttonLabel }}</button></div>',e+='<div class="tk-stl-sortoptions-group tk-stl-instant-results" ng-class="{\'show\':showInstantResults }" ng-transclude click-outside="closeInstantResults()"></div>',e+="</div>","true"==b.searchWithinCheckbox&&(e+='<label class="tk-stl-checkbox search-within"><input type="checkbox" ng-model="swModel.searchWithin" />',null!=b.searchWithinLabel&&(e+=b.searchWithinLabel),e+="</label>"),e+="</form>"}}}angular.module("lightning").directive("searchBox",a),a.$inject=["$util"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{response:"=?",showFieldName:"@",action:"@",optionalLabel:"@",excludeLabel:"@"},transclude:!0,replace:!0,controller:["$lightningUrl","$scope","$attrs","QueryService","$filter","$location","$lightningLog",function(a,b,c,d,e,f,g){function h(a,d){if(b.breadcrumbs=[],b.fields=[],"false"!=c.showQuery){var f={field:null,val:{act:e("actualValue")(d),dsp:e("displayValue")(d)},hide:!1};null!=b.maxCharacters&&-1!=b.maxCharacters?f.val.ngDsp=e("maxCharacters")(f.val.dsp,b.maxCharacters):f.val.ngDsp=f.val.dsp,null!=f.val.act&&"*:*"!=f.val.act&&""!=f.val.act&&(b.fields.push(null),b.breadcrumbs.push(f))}a.length>0&&angular.forEach(a,function(a){if(1!=a.hidden){if(void 0==a.val.act){var d;d=void 0!=c.dateFormat?e("dateFormat")(a.val,c.dateFormat):a.val,a={field:a.field,val:{act:a.val,dsp:d.replace(/&amp;/g,"&")},optional:a.optional,exclude:1==a.exclude,match:a.match}}else void 0!=a.val.dsp&&(a.val.dsp=a.val.dsp.replace(/&amp;/g,"&"));if(a.optionalLabel="value"==a.optional||"field"==a.optional&&void 0!=b.optionalLabel?b.optionalLabel:"",a.excludeLabel=1==a.exclude?void 0!=b.excludeLabel?b.excludeLabel:"not ":"",i.length>0&&(e("filter")(i,{field:a.field,value:null}).length>0||e("filter")(i,{field:a.field,value:a.val.dsp}).length>0)&&(a.hide=!0),1!=a.hide&&(-1==b.fields.indexOf(a.field)&&b.fields.push(a.field),a.hide=!1),null!=b.maxCharacters&&-1!=b.maxCharacters?a.val.ngDsp=e("maxCharacters")(a.val.dsp,b.maxCharacters):a.val.ngDsp=a.val.dsp,b.breadcrumbs.length>0){var f=e("filter")(b.breadcrumbs,{field:a.field});f.length>0?(f=e("deepFilter")(f,"val.dsp",a.val.dsp)[0],null!=f?(f.multiple=!0,a.hide=!0,b.breadcrumbs.push(a)):b.breadcrumbs.push(a)):b.breadcrumbs.push(a)}else b.breadcrumbs.push(a)}}),b.showClearAll=e("filter")(b.breadcrumbs,{hide:!1}).length>1}b.breadcrumbs=[],b.maxCharacters=isNaN(c.maxCharacters)?-1:parseInt(c.maxCharacters);var i=[];if(null!=c.exclude){var j=c.exclude.split(",");angular.forEach(j,function(a){var b=a.split("=");i.push({field:b[0],value:null!=b[1]?b[1]:null})})}if(null!=c.response)b.$watch("response",function(a){null!=a&&null!=b.response.query&&h(b.response.query.filters,b.response.query.val)},!0);else if(null!=c.query){var k=d.getQuery(c.query);null!=k&&h(k.filters,k.val),b.$on("query_"+c.query+"_updated",function(){k=d.getQuery(c.query),h(k.filters,k.val)})}else g.debug("SearchBreadcrumbs","No response or query has been added to the breadcrumbs tag.");b.removeGroup=function(a){var c=e("filter")(b.breadcrumbs,{field:a},!0),d=b.fields.indexOf(a);-1!=d&&b.fields.splice(d,1);var f=c.length;angular.forEach(c,function(a,c){c==f-1?b.removeBreadcrumb(a,!0):b.removeBreadcrumb(a,!1)})},b.removeBreadcrumb=function(c,d){if(1!=c.hide&&b.breadcrumbs.splice(b.breadcrumbs.indexOf(c),1),1==c.multiple){var g=e("filter")(b.breadcrumbs,{field:c.field});g.length>0&&(g=e("deepFilter")(g,"val.dsp",c.val.dsp),angular.forEach(g,function(a){a.hide=!1,b.removeBreadcrumb(a,!1)}))}if(d=null==d?!0:d,d&&a.setUrlParameter("p",1),null==c.field&&(a.setUrlParameter("mq",null,!1),a.setUrlParameter("q",null,!1)),d&&void 0!=b.action&&f.path(b.action),d){a.setUrlParameter("f",null);var h=[];angular.forEach(b.breadcrumbs,function(b){if(null==b.field)a.setUrlParameter("q",b.val.dsp);else{var c;c=a.createFilterFromObject(b),h.push(c)}}),0==h.length&&(h=null),a.setUrlParameter("f",h,!0)}},b.clearAll=function(){for(var a=angular.copy(b.breadcrumbs),c=0;c<a.length;c++)c==a.length-1?b.removeBreadcrumb(a[c],!0):b.removeBreadcrumb(a[c],!1)}}],template:function(a,b){var c=null;return"true"==b.groupByField?(c='<ol class="breadcrumb-list tk-stl-breadcrumb-capsules-categorygroup" ng-cloak ng-show="breadcrumbs.length > 0">',c+='<li class="breadcrumb-group" ng-repeat="field in fields track by $index" ng-cloak>',c+='<ol class="breadcrumb-list">',c+='<li class="breadcrumb remove-group" ng-if="field != null && showFieldName != \'false\'">',c+='<a href="javascript:void(0)" ng-click="removeGroup(field)">{{field}}</a>',c+="</li>",c+='<li ng-repeat="breadcrumb in breadcrumbs | filter:{ field: field }:true | filter:{hide:false} track by $index" class="breadcrumb" ng-class="{\'last\':$last}" ng-cloak>',c+='<span class="l"></span>',c+='<a href="javascript:void(0)" ng-click="removeBreadcrumb(breadcrumb)">',c+="{{breadcrumb.excludeLabel}}",c+="{{breadcrumb.val.ngDsp}}",c+="{{breadcrumb.optionalLabel}}",c+="</a>",c+='<span class="r"></span>',c+="</li>",c+="</ol>",c+="</li>",c+='<li class="breadcrumb-group" >',c+='<ol class="breadcrumb-list">',c+='<li class="breadcrumb clearall last" ng-show="showClearAll" ng-cloak><a href="javascript:void(0);" ng-click="clearAll()">Clear all</a></li>',c+="</ol>",c+="</li>",c+="</ol>"):(c='<ol class="breadcrumb-list tk-stl-breadcrumb-capsules" ng-cloak ng-show="breadcrumbs.length > 0">',c+='<li ng-repeat="breadcrumb in breadcrumbs | filter:{hide:false} track by $index" class="breadcrumb" ng-class="breadcrumb.field" ng-cloak>',c+='<span class="l"></span>',c+='<a href="javascript:void(0)" ng-click="removeBreadcrumb(breadcrumb)">',c+="{{breadcrumb.excludeLabel}}",c+="{{breadcrumb.val.ngDsp}}",c+="{{breadcrumb.optionalLabel}}",c+="</a>",c+='<span class="r"></span>',c+="</li>",c+='<li class="breadcrumb clearall last" ng-show="showClearAll" ng-cloak><a href="javascript:void(0);" ng-click="clearAll()">Clear all</a></li>',c+="</ol>")}};return a}angular.module("lightning").directive("searchBreadcrumbs",a)}(),function(){"use strict";function a(a,b){var c=a[0],d={transclude:c.transclude,priority:c.priority,terminal:c.terminal,restrict:"EA",link:function(a,d,e){var f;if(null!=e.test)f=e.test;else if(null!=e.response){var g=b.getResponse(e.response);f=null!=g}else f=!1;var h;h=1==f||0==f?f:a.$eval(f),e.ngIf=function(){return h},c.link.apply(c,arguments)}};return d}angular.module("lightning").directive("searchConditional",a),a.$inject=["ngIfDirective","ResponseService"]}(),function(){"use strict";function a(a,b,c,d){var e={restrict:"E",require:"?^^searchFacetList",transclude:!0,scope:{facetName:"@",facet:"=?",title:"@",show:"@",showMore:"@",maxCharacters:"@",measure:"@"},controller:["$scope","$lightningUrl","$attrs",function(a,b,c){function d(){return{show:null==a.show?10:a.show,showMore:null==a.showMore?10:a.showMore,searchEnabled:"true"==c.searchEnabled,maxCharacters:void 0!=a.maxCharacters?a.maxCharacters:-1,select:null==c.select?"click":c.select,measure:c.measure,showMoreLabel:null==c.showMoreLabel?"Show more":c.showMoreLabel,showLessLabel:null==c.showLessLabel?"Show less":c.showLessLabel,action:c.action,countNumber:c.countNumber,dateFormat:c.dateFormat,switches:null!=c.styling&&-1!=c.styling.indexOf("switches"),platform:null==c.platform?a.platform:c.platform,query:null==c.query?a.query:c.query,facetField:c.facetField,showEmpty:c.showEmpty}}function e(){return a.facet}function f(b){a.showFacet=b}var g=this;g.getFilterListOptions=d,g.getFacet=e,g.showFacet=f,a.collapsible="true"==c.collapsible,a.hide=1==a.collapsible&&"true"==c.collapsedByDefault,a.toggleFacet=function(){a.collapsible&&(a.hide=!a.hide)}}],link:{pre:function(e,f,g,h,i){function j(){if(void 0!=e.facetName&&e.facetName.indexOf("=")>-1){var a=e.facetName.split("=");e.facetName=a[0],e.title=a[1]}null!=e.response&&null!=e.response.facets&&(e.facet=e.response.facets[e.facetName]||e.facet),void 0==e.title&&void 0!=e.facet&&(e.title=e.facet.display),void 0!=e.facet&&(e.facetName=e.facet.id,e.facetCssName=c("formatAsCssName")(e.facetName)),void 0==e.title&&void 0!=e.facet&&(e.title=e.facet.display),void 0==e.facet?(void 0!=e.facetName?b.debug("SearchFacet","Facet "+g.facetName+" could not be found and has not been rendered."):b.debug("SearchFacet","No facet found on facet directive."),e.hideRender=!0):null!=e.facet&&null!=e.facet.filters&&0==e.facet.filters.length?(b.debug("SearchFacet","Facet "+g.facetName+" has no filters and has not been rendered."),e.hideRender=!0):e.hideRender=!1,null==e.facet||0==e.facet.filters.length?e.emptyFacet=!0:e.emptyFacet=!1}f.on("$destroy",function(){e.$destroy()}),e.hasChildren=d.hasChildren(i),null!=h&&null==e.maxCharacters&&(e.maxCharacters=h.getMaxCharacters()),null!=h&&(e.platform=h.getPlatform(),e.query=h.getQuery()),e.facetName&&e.$watch("facetName",function(a,b){a&&b&&j()}),g.response?(e.response=a.getResponse(g.response,"facets"),e.$on(g.response+"_updated",function(a,b){e.response=b,j()}),null!=e.response&&j()):null!=h?(g.response=h.getResponseName(),e.response=a.getResponse(g.response,"facets"),e.$on(g.response+"_updated",function(a,b){e.response=b,j()}),null!=e.response&&j()):e.$watch("facet",function(){j()})}},template:function(){var a='<li class="facet facet-{{::facetCssName}}" ng-show="showFacet != false && emptyFacet == false">';return a+='<h3 class="facet-title" ng-click="toggleFacet()" ng-class="{clickable: collapsible}">{{ ::title }}<a href="javascript:void(0);" ng-show="::collapsible" class="right">{{hide ? "+" : "-"}}</a></h3>',a+='<ng-transclude ng-hide="hide">',a+='<search:filter-list facet="$parent.facet || $parent.$parent.facet" ng-if="hideRender != true" ></search:filter-list>',a+="</ng-transclude>",a+="</li>"}};return e}angular.module("lightning").directive("searchFacet",a),a.$inject=["ResponseService","$lightningLog","$filter","$util"]}(),function(){"use strict";function a(a){var b={restrict:"E",require:"?^^searchFacetList",transclude:!0,scope:{facetName:"@",platform:"@",countNumber:"@",maxCharacters:"@",select:"@"},controller:["$scope","$lightningUrl","$http","$filter","PlatformService","$location","ResponseService","$lightningLog","QueryService","$twigkit","$timeout","$attrs",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=e.getPlatform(a.platform),n=!1;a.countNumber=null==a.countNumber?"formatted":a.countNumber,a.maxCharacters=null==a.maxCharacters?-1:a.maxCharacters,a.selectedFilters=[],a.select="checkbox"==a.select||"multiselect"==a.select?"multiselect":"click",a.expand=function(b){if("multiselect"!=a.select){var e=i.getQuery(l.query);if(e&&null!=e.filters){var f=d("filter")(angular.copy(e.filters),{field:a.facetName},!0);1==f.length?a.selectedFilter=f[0].val.act:a.selectedFilter=null}}a.loading=!0;var g=j.getContextPath("/"),k=(null!=m&&m.host?m.host:g)+"twigkit/api/core/services/facet/"+m.conf+"/children/"+a.facetName,n=i.getQuery(l.query);if(null!=n.filters&&"multiselect"==a.select)if(angular.isArray(n.filters))for(var o=n.filters.length-1;o>=0;o--)n.filters[o].field==a.facetName&&n.filters.splice(o,1);else n.filters.field==a.facetName&&(n.filters=null);var p=i.convertQueryToHttpParams(n);null!=b?p.path=d("actualValue")(b.val):p.path="0/",c({method:"GET",url:k,params:p}).then(function(c){null==b?a.filters=c.data:(b.rel=c.data,b.expand=!0),a.loading=!1},function(){a.loading=!1,h.debug("FacetHierarchical","Unable to get filters from the platform.")})},a.expandFilter=function(b){1==b.expand?b.expand=!1:b.rel.length>0?b.expand=!0:a.expand(b)},a.addOrRemoveSelectedFilter=function(b){if(-1==a.selectedFilters.indexOf(b))b.tkSelected=!0,a.selectedFilters.push(b);else{var c=a.selectedFilters.indexOf(b);b.tkSelected=!1,a.selectedFilters.splice(c,1)}},a.selected=function(c,e){if(1!=c.fireOnce||0==e){if(c.fireOnce=!0,"multiselect"==a.select&&(c.optional="value"),b.urlContainsFilterFromObject(c))return c.tkSelected=!0,a.addOrRemoveSelectedFilter(c),a.expand(c),!0;var f=i.getQuery(l.query),g=d("filter")(f.filters,{field:a.facetName});return g&&g.length>0&&angular.forEach(g,function(b){var e=d("actual")(b),f=d("actual")(c);return f=f.substr(1),1==e.indexOf(f)?(a.expand(c),!1):void 0}),!1}},a.displayApplyButton=function(){a.showApplyButton=!0},a.setFilter=function(c){var e=null==a.action;n=!0,b.removeFiltersFromUrl(a.facetName,!1),null!=c.act&&"range"==c.act.type?b.addRangeFilterToUrl(a.facetName,c.act.from,c.act.to,c.act.from,c.act.to,e):b.addFilterToUrl(a.facetName,d("actualValue")(c),d("displayValue")(c),e),null!=a.action&&f.path(a.action)},a.applyFilters=function(){var c=angular.copy(a.selectedFilters);if(a.selectedFilters=[],0==c.length)return void b.removeFiltersFromUrl(a.facetName,!0);b.removeFiltersFromUrl(a.facetName);var e=!1;angular.forEach(c,function(f,g){g==c.length-1&&null==a.action&&(e=!0),null!=f.val.act&&"range"==f.val.act.type?b.addRangeFilterToUrl(f.field,f.val.act.from,f.val.act.to,f.val.act.from,f.val.act.to,e,"value",null,f.val.act.fromExcluded,f.val.act.toExcluded):b.addFilterToUrl(f.field,d("actualValue")(f.val),d("displayValue")(f.val),e,"value")}),null!=a.action&&f.path(a.action)}}],link:function(b,c,d,e){function f(a){return null!=a&&"SEARCH:FACET-LIST"==a.nodeName?!0:null!=a.parentElement?f(a.parentElement):!1}var g,h=a(function(){1==f(angular.element(c)[0])?b.expand():null!=angular.element(c)[0].parentElement&&null==e&&null!=angular.element(c)[0].offsetParent&&(g=b.$on("reloadSearch",function(){a(function(){b.filters=[],b.expand()},0)}),b.expand())},500);b.$on("$destroy",function(){a.cancel(h),null!=g&&g()}),c.on("$destroy",function(){a.cancel(h),null!=g&&g()})},template:function(){var a='<script type="text/ng-template"  id="facet-hierarchical.html">';return a+='<span class="clickable" ng-show="data[\'has-more-rel\'] == true" ng-click="expandFilter(data)" ng-class="data.expand ? \'icon-down-dir\' : \'icon-right-dir\'"></span>',a+='<a class="label" title="{{ ::data.val | displayValue}}" ng-if="select != \'multiselect\'" ng-click="setFilter(data.val)"  ng-class="{\'selected\' : selectedFilter == (data.val | actualValue)}">{{ ::data.val | displayValue }}</a>',a+='<input type="checkbox" class="tk-stl-styled-checkbox" title="{{ ::data.val | displayValue }}" ng-model="data.tkSelected" ng-init="selected(data)"  ng-if="::select == \'multiselect\'">',a+='<label class="label" title="{{ ::data.val | displayValue}}" ng-if="::select == \'multiselect\'" ng-click="addOrRemoveSelectedFilter(data); displayApplyButton()">{{ ::data.val | displayValue | maxCharacters: maxCharacters }}</label>',a+='<span class="metadata">',a+="<span class=\"count\">{{::(countNumber == 'plain' ? data.count : countNumber == 'rounded' ? (data.count | roundedNumber) : (data.count | number))}}</span>",a+="</span>",a+='<ol class="filter-list hierarchical" ng-if="data.rel.length > 0" ng-show="data.expand">',a+="<li ng-repeat=\"data in data.rel track by $index\" ng-include=\"'facet-hierarchical.html'\"  ng-class=\"{'no-children':data['has-more-rel'] == false,'has-children':data['has-more-rel'] == true}\"></li>",a+="</ol>",a+="</script>",a+='<ol class="filter-list hierarchical" ng-cloak>',a+='<li class="filter" ng-repeat="filter in filters" ng-init="filter.expand = shallow == true" ng-class="{\'has-children\':filter[\'has-more-rel\'] == true}">',a+='<span class="clickable" ng-if="filter[\'has-more-rel\'] == true" ng-click="expandFilter(filter)" ng-class="filter.expand ? \'icon-down-dir\' : \'icon-right-dir\'"></span>',a+='<a class="label" title="{{ ::filter.val | displayValue | date: dateFormat}}" ng-click="setFilter(filter.val)" ng-class="{\'selected\' : selectedFilter == (filter.val | actualValue)}" ng-if="select != \'multiselect\'">{{ ::filter.val | displayValue}}</a>',a+='<input id="id{{ filter.field }}{{ $index }}" type="checkbox" class="tk-stl-styled-checkbox" title="{{ ::filter.val | displayValue }}" ng-model="filter.tkSelected" ng-init="selected(filter)" ng-if="::select == \'multiselect\'" ng-click="addOrRemoveSelectedFilter(filter); displayApplyButton()">',a+='<label for="id{{ filter.field }}{{ $index }}" class="label" title="{{ ::filter.val | displayValue}}" ng-if="::select == \'multiselect\'">{{ ::filter.val | displayValue | maxCharacters: maxCharacters }}</label>',a+='<span class="metadata">',a+="<span class=\"count\">{{::(countNumber == 'plain' ? filter.count : countNumber == 'rounded' ? (filter.count | roundedNumber) : (filter.count | number))}}</span>",a+="</span>",a+='<ol class="filter-list hierarchical" ng-if="filter[\'has-more-rel\'] == true" ng-show="filter.expand">',a+="<li ng-repeat=\"data in filter.rel  track by $index\" ng-include=\"'facet-hierarchical.html'\" ng-class=\"{'no-children':data['has-more-rel'] == false,'has-children':data['has-more-rel'] == true}\"></li>",a+="</ol>",a+="</li>",a+='<li ng-cloak ng-show="filters.length == 0 && !loading">',a+='<a href="javascript:void(0);">No results found</a>',a+="</li>",a+="</ol>",a+='<input ng-if="select == \'multiselect\' && showApplyButton" type="button" value="Apply Filters" class="tk-stl-button tk-stl-button-small" ng-click="applyFilters()">'}};return b}angular.module("lightning").directive("facetHierarchical",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a,b,c,d){var e={restrict:"E",transclude:!0,scope:{},controller:["$attrs",function(a){function b(){return a.response}function c(){return a.maxCharacters}function d(){return a.platform}function e(){return a.query}var f=this;f.getResponseName=b,f.getMaxCharacters=c,f.getPlatform=d,f.getQuery=e}],link:{post:function(e,f,g,h,i){function j(){var a=null,b=[],d=[],h=[];if(void 0!=g.facetNames){var i=angular.copy(k);angular.element(f.children()[0]).empty(),a=g.facetNames.split(",");var j=angular.copy(e.response);e.facets=[];for(var l,m=!1,n=0;n<a.length;n++)if(l=a[n],l=l.split("="),0==l[0].indexOf("-"))delete j.facets[l[0].substring(1)];else if("*"!=l[0]||m){if("*"!=l[0]){var o={name:l[0]};null!=l[1]&&(o.title=l[1]),m?h.push(o):b.push(o),delete j.facets[l[0]]}}else m=!0;if(m)for(var p in j.facets)d.push({name:j.facets[p].id||p,title:j.facets[p].display});e.facets=b.concat(d),e.facets=e.facets.concat(h);for(var q=0;q<e.facets.length;q++){l=e.facets[q];for(var r=null,s=0;s<i.length;s++){var t=i[s];if(null==r&&t.hasAttribute("facet-name")&&t.getAttribute("facet-name")==l.name){var u=angular.element(angular.copy(t)).find("ng-transclude").children();r=angular.element(t).empty(),t.hasAttribute("title")&&(l.title=t.getAttribute("title"));for(var v=0;v<u.length;v++){var w=u[v];w=angular.element(w).empty(),r.append(w)}}}if(null==r)for(var x=0;x<i.length;x++){var y=i[x];null!=r||y.hasAttribute("facet-name")||(r=angular.element(y).empty())}if(null!=r){var z=e.$new(!0),A=angular.copy(r);A.attr("facet-name",l.name),A.attr("response",g.response),A.attr("platform",g.platform),A.attr("query",g.query),void 0!=l.title&&A.attr("title",l.title),e.hasChildren||(A.attr("ng-repeat",null),A.attr("ng-if",null)),c(A)(z),angular.element(f.children()[0]).append(A)}}}}var k=null;e.response=a.getResponse(g.response,"facets"),e.hasChildren=b.hasChildren(i),null!=e.response&&(null==k&&(k=angular.copy(angular.element(f.children()[0]).children())),j()),e.$on(g.response+"_updated",function(a,b){e.response=b,d(function(){null==k&&(k=angular.copy(angular.element(f.children()[0]).children())),j()},0)})}},template:function(a,b){var c="";return null!=b.styling&&(c="facet-list-"+b.styling),'<ul class="facet-list '+c+'" ng-if="!hasChildren && response != null"><search:facet facet="facet" ng-repeat="facet in response.facets track by $index" ng-if="facets == null"></search:facet><search:facet facet-name="{{facet.name}}" ng-repeat="facet in facets" ng-if="facets != null"></search:facet></ul><ul class="facet-list '+c+'" ng-show="hasChildren && response != null" ng-transclude></ul>'}};return e}angular.module("lightning").directive("searchFacetList",a),a.$inject=["ResponseService","$util","$compile","$timeout"]}(),function(){"use strict";function a(){var a={label:{left:"label-left",above:"label-above",inline:"label-inline",leftalways:"label-left-always"},image:{top:"image-top"}},b=["label-left","label-above","label-inline","label-left-always","image-top","title","description"],c={restrict:"E",replace:!0,transclude:!0,scope:{result:"=?",dateFormat:"@",label:"@",url:"@",target:"@",defaultValue:"@"},controller:["$scope","$element","$attrs","$util","$lightningUrl","$filter","$transclude","$location","QueryService",function(a,b,c,d,e,f,g,h,i){function j(){if(a.resultCopy=angular.copy(a.result),a.params=d.params(c),a.field=a.resultCopy.fields[a.params.name],a.maxCharacters=void 0!=c.maxCharacters?c.maxCharacters:-1,a.show=null==c.show||isNaN(c.show)?-1:Number(c.show),null==a.field&&(a.field={name:c.name}),a.displayValues=[void 0],null!=a.field&&null!=a.field.val&&(angular.isArray(a.field.val)?a.displayValues=a.field.val:a.displayValues=[a.field.val]),1==a.displayValues.length&&null!=c.separator){var b;b=null==a.displayValues[0].dsp?a.displayValues[0].split(c.separator):a.displayValues[0].dsp.split(c.separator);var e="string"==typeof a.displayValues[0]?a.displayValues[0]:f("actualValue")(a.displayValues[0]);a.displayValues=[];for(var g=0;g<b.length;g++)a.displayValues.push({act:e,dsp:b[g]})}for(var h=0;h<a.displayValues.length;h++){var i=a.displayValues[h];if(void 0==i&&null==a.defaultValue)a.shouldRender=!1;else if(-1!=a.show&&h>=a.show);else{a.shouldRender=!0;var j={};j.act="string"==typeof i?i:f("actualValue")(i),j.dsp="string"==typeof i?i:f("displayValue")(i),j.ngDsp=j.dsp,null!=a.defaultValue&&(null==j.dsp||angular.isString(j.dsp)&&""==j.dsp.trim())&&(j.ngDsp=a.defaultValue),c.dateFormat?j.ngDsp=f("dateFormat")(j.dsp,c.dateFormat):c.numberFormat?j.ngDsp=f("numberFormat")(j.dsp,c.numberFormat):null!=a.maxCharacters&&-1!=a.maxCharacters&&(j.originalValueLength=j.dsp.length,j.ngDsp=f("maxCharacters")(j.dsp,a.maxCharacters),j.showMoreLink=c.hasOwnProperty("showMore")&&""!=c.showMore?c.showMore:"show more"),a.displayValues[h]=j}}c.url=a.url,a.params.urlfield&&a.result.fields[a.params.urlfield]&&(a.urlField=a.result.fields[a.params.urlfield],a.urlField=f("actualValue")(a.urlField.val))}b.on("$destroy",function(){a.$destroy()}),a.hasChildren=d.hasChildren(g),null!=c.result?a.$watch("result",function(b){b&&(a.result=b,j())}):null!=a.$parent.result&&a.$watch("$parent.result",function(b){b&&(a.result=b,j())}),a.clickFn=function(b){var d=i.getQueryAsHttpParams(c.query,!0);null!=d&&(e.setUrlParameters(d),e.addFilterToUrl(a.field.name,f("actualValue")(b),b.ngDsp,!1,!1)),null!=c.action&&h.path(c.action),e.reloadSearch()},a.showMore=function(b,d){b.preventDefault(),d.originalValueLength>d.ngDsp.length?(d.ngDsp=d.dsp,d.showMoreLink=c.hasOwnProperty("showLess")&&""!=c.showLess?c.showLess:"show less"):(d.ngDsp=f("maxCharacters")(d.dsp,a.maxCharacters),d.showMoreLink=c.hasOwnProperty("showMore")&&""!=c.showMore?c.showMore:"show more")}}],template:function(c,d){function e(){switch(k){case a.label.left:case a.label.leftalways:j+='<div class="field tk-rgrid-g tk-stl-label-left" ng-show="::shouldRender">';break;case a.label.inline:j+='<div class="field tk-rgrid-g tk-rgrid-u-1 tk-stl-label-inline" ng-show="::shouldRender">';break;case a.label.above:j+='<div class="field tk-rgrid-g tk-stl-label-above" ng-show="::shouldRender">';break;case a.image.top:j+='<div class="field tk-rgrid-g tk-stl-image" ng-show="::shouldRender">';break;default:j+='<div class="field" ng-show="::shouldRender">'}return j+=f(),j+=g(),j+="</div>"}function f(){if(""==d.label)return"";var b="",c=d.labelElement||"p";return k==a.label.left?(b+="<"+c+' class="tk-rgrid-u-1 tk-rgrid-u-md-1-3 tk-stl-label" ',
b+='ng-bind="'+h()+'">',b+="</"+c+">"):k==a.label.inline?(b+="<"+c+' class="tk-stl-label" ',b+='ng-bind="'+h()+'">',b+="</"+c+">"):k==a.label.above?(b+="<"+c+' class="tk-rgrid-u-1 tk-stl-label" ',b+='ng-bind="'+h()+'">',b+="</"+c+">"):k==a.label.leftalways&&(b+="<"+c+' class="tk-rgrid-u-1-3 tk-stl-label" ',b+='ng-bind="'+h()+'">',b+="</"+c+">"),b}function g(){var b="",c=d.valueElement||"p";return k==a.label.left?(b+='<div class="tk-rgrid-u-1 tk-rgrid-u-md-2-3">',b+="<"+c+' ng-repeat="value in ::displayValues track by $index">',b+=i(),b+="</"+c+">",b+="</div>"):k==a.label.above?(b+='<div class="tk-rgrid-u-1">',b+="<"+c+' ng-repeat="value in ::displayValues track by $index">',b+=i(),b+="</"+c+">",b+="</div>"):k==a.label.leftalways?(b+='<div class="tk-rgrid-u-md-2-3">',b+="<"+c+' ng-repeat="value in ::displayValues track by $index">',b+=i(),b+="</"+c+">",b+="</div>"):k==a.image.top?(b+='<div ng-repeat="value in ::displayValues track by $index">',b+=i(),b+="</div>"):(b+="<"+c+' ng-repeat="value in ::displayValues track by $index">',b+=i(),b+="</"+c+">"),b}function h(){var a="";return void 0!=d.label&&d.label.length>0?a="::label":(void 0==d.label||0!==d.label.length)&&(a="::field.name"),a}function i(){var b="";return d.url?(b+='<a ng-href="{{::url}}" href="javascript:void(0);"',null!=d.target&&(b+='target="{{::target}}"'),b+=">"):d.query||d.action?b+='<a href="javascript:void(0);" ng-click="clickFn(value)">':d.urlfield&&(b+='<a href="{{::urlField}}"',null!=d.target&&(b+='target="{{::target}}"'),b+=">"),k==a.image.top?b+='<img ng-src="{{::value.ngDsp}}">':(d.prefix&&(b+='<span class="prefix">'+d.prefix+"</span>"),b+=d.hasOwnProperty("showMore")?'<span class="value" ng-bind-html="value.ngDsp"></span>':'<span class="value" ng-bind-html="::value.ngDsp"></span>',d.hasOwnProperty("showMore")&&(b+='<br><a href="#" class="tk-stl-show-more" ng-click="showMore($event,value)" ng-if="::(value.showMoreLink)" ng-bind="value.showMoreLink"></a>'),d.suffix&&(b+='<span class="suffix">'+d.suffix+"</span>")),(d.urlfield||d.url||d.query)&&(b+="</a>"),b+='<span ng-if="::hasChildren" class="pl025em" ng-transclude></span>'}var j="",k="label-left";if(d.styling&&d.styling.length>0){for(var l="(",m=0;m<b.length;m++)l+="\\b"+b[m]+"\\b|";l=l.slice(0,-1),l+=")";var n=d.styling.match(new RegExp(l));k=n&&n[0]?n[0]:k}return j=e()}};return c}angular.module("lightning").directive("searchField",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{title:"@"},transclude:!0,replace:!0,controller:["$lightningUrl","$scope","$attrs","$filter",function(a,b,c,d){var e=a.getUrlParameter("fi");e=null!=e?e.split(","):[],b.title=null==b.title?"Fields":b.title,b.show=!1,b.selected=0,b.fields=[];var f=c.fields.split(",");angular.forEach(f,function(a){a=a.split("="),a={act:a[0],dsp:a.length>1?a[1]:a[0],selected:-1!=e.indexOf(a[0])},b.fields.push(a)}),b.selected=d("filter")(b.fields,{selected:!0}).length,b.showList=function(){b.show=!b.show},b.closeList=function(){b.show=!1},b.selectField=function(a){a.selected=!a.selected,b.selected=d("filter")(b.fields,{selected:!0}).length},b.selectAllFields=function(){b.selected==b.fields.length?(angular.forEach(b.fields,function(a){a.selected=!1}),b.selected=0):(angular.forEach(b.fields,function(a){a.selected=!0}),b.selected=b.fields.length)},b.applyFields=function(){var c="",e=d("filter")(b.fields,{selected:!0});angular.forEach(e,function(a,b){c+=a.act,b!=e.length-1&&(c+=",")}),a.setUrlParameter("fi",c,!0),b.closeList()}}],template:function(){var a="<li><div>";return a+='<a href="javascript:void(0);" class="oif-select-fields" ng-click="showList()"><span class="tk-stl-hidemedium" >{{::title}} </span><span class="caret"></span></a>',a+='<div class="tk-stl-sortoptions-group" ng-class="{\'show\': show}"><ul click-outside="closeList()" outside-if-not="oif-select-fields">',a+='<li ng-class="{active : selected == fields.length }"><a href="javascript:void(0);" class="oif-select-fields" ng-click="selectAllFields()">Select All</a></li>',a+='<li ng-repeat="field in fields" ng-class="{active : field.selected }"><a href="javascript:void(0);" class="oif-select-fields" ng-click="selectField(field)">{{::field.dsp}}</a></li>',a+='<li class="divider"></li>',a+='<li><a href="javascript:void(0);" class="oif-select-fields" ng-click="applyFields()">Apply</a></li>',a+="</ul>",a+="</div>",a+="</div></li>"}};return a}angular.module("lightning").directive("searchFields",a)}(),function(){"use strict";function a(a){var b={restrict:"E",transclude:!0,require:"^^searchQuery",link:{pre:function(b,c,d,e){if(d.field&&d.value){var f=a.createFilter(d.field,d.value,d.value,d.optional,"true"==d.exclude);f=a.stringToFilter(f),"true"==d.hidden&&(f.hidden=!0),e.addFilter(f)}}}};return b}angular.module("lightning").directive("searchFilter",a),a.$inject=["$lightningUrl"]}(),function(){"use strict";function a(a,b,c,d,e,f){var g={restrict:"E",require:"?^^searchFacet",scope:{facet:"=?",show:"@",showMore:"@",showMoreLabel:"@",showLessLabel:"@",action:"@",countNumber:"@",dateFormat:"@"},controller:["$scope","$lightningUrl","$attrs","$filter","$location","$twigkit",function(a,b,d,e,f,g){a.setFilter=function(c){var d=null==a.action;if(a.singleFilter(c))b.removeFilterValueFromUrl(a.facet.field,c.val,d);else{var g=c;null!=g.act&&"range"==g.act.type?(g=g.val,null!=g.dsp?b.addRangeFilterDisplayToUrl(a.facet.field,g.act.from,g.act.to,g.dsp,d,null,g.act.fromExcluded,g.act.toExcluded):b.addRangeFilterToUrl(a.facet.field,g.act.from,g.act.to,g.act.from,g.act.to,d,null,null,g.act.fromExcluded,g.act.toExcluded)):b.addFilterToUrl(a.facet.field,e("actualValue")(g),e("displayValue")(g),d)}null!=a.action&&f.path(a.action)},a.toggleLimitTo=function(){a.limitTo=a.show==a.limitTo?a.showMoreMax:a.show,a.show!=a.limitTo?a.label=a.showLessLabel:a.label=a.showMoreLabel},a.getFacetsSelectedFilters=function(){return null==a.facet?[]:e("filter")(a.filters,{tkSelected:!0})},a.applyFilters=function(){var c=a.selectedFilters;if(0==c.length)return void b.removeFiltersFromUrl(a.facet.id,!0);b.removeFiltersFromUrl(a.facet.id);var d=!1;angular.forEach(c,function(f,g){g==c.length-1&&null==a.action&&(d=!0),null!=f.val.act&&"range"==f.val.act.type?null!=f.val.dsp?b.addRangeFilterDisplayToUrl(f.field,f.val.act.from,f.val.act.to,f.val.dsp,d,"value",f.val.act.fromExcluded,f.val.act.toExcluded):b.addRangeFilterToUrl(f.field,f.val.act.from,f.val.act.to,f.val.act.from,f.val.act.to,d,"value",null,f.val.act.fromExcluded,f.val.act.toExcluded):b.addFilterToUrl(f.field,e("actualValue")(f),e("displayValue")(f),d,"value")}),null!=a.action&&f.path(a.action)},a.selected=function(d,e){if(1!=d.fireOnce||0==e){if(d.fireOnce=!0,"multiselect"==a.select&&(d.optional="value"),b.urlContainsFilterFromObject(d))return d.tkSelected=!0,a.selectedFilters.push(d),!0;if(null!=a.query&&null!=a.queryName){var f=c.getQuery(a.queryName);if(c.queryContainsFilterForField(f,a.facet.field,d))return d.tkSelected=!0,a.selectedFilters.push(d),!0}return!1}},a.displayApplyButton=function(){a.showApplyButton=!0},a.greaterThan=function(a,b){return function(c){return null!=c[a]&&c[a]>b?!0:void 0}},a.searchFilters=function(){null==a.platform&&null==a.query?(a.filters=e("filter")(angular.copy(a.facet.filters),a.searchQuery),null!=d.order&&("count"==d.order.toLowerCase()?a.filters=e("orderBy")(a.filters,"count"):"alphabetical"==d.order.toLowerCase()?a.filters=e("orderByValue")(a.filters):"-count"==d.order.toLowerCase()?a.filters=e("orderBy")(a.filters,"count",!0):"-alphabetical"==d.order.toLowerCase()&&(a.filters=e("orderByValue")(a.filters,!0)))):(angular.forEach(a.filters,function(b){a.selected(b,!1)}),a.selectedFilters=a.getFacetsSelectedFilters(),a.show=a.originalShow+a.selectedFilters.length,a.showMoreMax=a.originalShowMoreMax+a.selectedFilters.length,a.label==a.showMoreLabel?a.limitTo=a.show:a.limitTo=a.showMoreMax,a.loading=!0,g.searchFacet(a.facet.id,a.platform,a.query,a.showMoreMax,a.searchQuery,"multiselect"==a.select,a.facetField).then(function(b){a.loading=!1,a.filters=b.data,angular.forEach(a.selectedFilters,function(b){var c=e("filter")(a.filters,{val:b.val},!0);null==c[0]&&a.filters.unshift(b)}),a.filters=e("orderBy")(a.filters,["-count","tkSelected"])},function(){console.log("Failed"),a.loading=!1}))},a.addOrRemoveSelectedFilter=function(b){if("toggle"==a.select){for(var c=!1,d=0;d<a.selectedFilters.length;d++)if(b.val==a.selectedFilters[d].val&&b.field==a.selectedFilters[d].field){c=!0;break}a.selectedFilters=[],c||a.selectedFilters.push(b)}else if(-1==a.selectedFilters.indexOf(b))b.tkSelected=!0,a.selectedFilters.push(b);else{var e=a.selectedFilters.indexOf(b);a.selectedFilters.splice(e,1)}},a.singleFilter=function(b){if("tick"===a.select&&a.$parent.$parent.response&&a.$parent.$parent.response.query.filters)for(var c=a.$parent.$parent.response.query.filters,d=0;d<c.length;d++)if(b.field===c[d].field&&b.val===c[d].val)return!0;return!1}}],link:{post:function(g,h,i,j){function k(){g.selectedFilters=[],g.show=null==g.show?null==n.show?10:n.show:g.show,g.showMore=null==g.showMore?null==n.showMore?10:n.showMore:g.showMore,g.showingMore=!1,g.searchQuery="",g.searchEnabled="true"==i.searchEnabled?!0:1==n.searchEnabled,g.maxCharacters=void 0==i.maxCharacters?null==n.maxCharacters?-1:n.maxCharacters:-1,g.select=i.select||n.select||"click",g.measure=null==i.measure?n.measure:i.measure,g.showMoreLabel=null==g.showMoreLabel?null==n.showMoreLabel?"Show more":n.showMoreLabel:g.showMoreLabel,g.showLessLabel=null==g.showLessLabel?null==n.showLessLabel?"Show less":n.showLessLabel:g.showLessLabel,g.countNumber=null==g.countNumber?null==n.countNumber?"formatted":n.countNumber:g.countNumber,g.dateFormat=null==g.dateFormat?n.dateFormat:g.dateFormat,g.action=null==g.action?n.action:g.action,g.label=g.showMoreLabel,g.showApplyButton=!1,g.showingMore=!1,g.searchQuery="",g.shallow=null!=g.facet&&null!=g.facet.params&&null!=g.facet.params.shallow&&1==g.facet.params.shallow[0],g.hierarchical=null!=g.facet&&null!=g.facet.params&&null!=g.facet.params.type&&1!=g.facet.params.type.indexOf("hierarchical"),g.switches=null!=i.styling&&-1!=i.styling.indexOf("switches")?!0:n.switches,g.platform=n.platform,g.query=c.getQueryAsHttpParams(n.query),g.queryName=n.query,g.facetField=n.facetField,g.enableMetadata=i.enableMetadata,g.loading=!1,g.showEmpty="true"==i.showEmpty||"true"==n.showEmpty?!0:!1;var d=parseFloat(g.show)+(parseFloat(g.showMore)||0);if(g.showMoreMax=d,g.originalShow=parseInt(g.show),g.originalShowMoreMax=parseInt(g.showMoreMax),g.limitTo=g.show,g.filters=[],void 0==g.facet)a.debug("SearchFilterList","No facet found on filter list directive."),g.hideRender=!0;else if(1==g.searchEnabled&&null!=g.platform){if(g.filters=angular.copy(g.facet.filters),"multiselect"==g.select){var f=e.getFiltersFromUrl(g.facet.id);f.length>0&&g.searchFilters()}}else void 0!=g.facet&&void 0!=g.facet.filters&&(g.filters=angular.copy(g.facet.filters),null!=i.order&&("count"==i.order.toLowerCase()?g.filters=b("orderBy")(g.filters,"count"):"alphabetical"==i.order.toLowerCase()?g.filters=b("orderByValue")(g.filters):"-count"==i.order.toLowerCase()?g.filters=b("orderBy")(g.filters,"count",!0):"-alphabetical"==i.order.toLowerCase()&&(g.filters=b("orderByValue")(g.filters,!0))))}function l(){var a="";return a+='<span class="clickable" ng-show="data.rel.length > 0 && shallow != true" ng-click="expand == null ? filter.expand = !filter.expand : expand = !expand" ng-class="{\'icon-down-dir\': expand == null ? filter.expand : expand, \'icon-right-dir\': expand == null ? !filter.expand : !expand}"></span>',a+='<label class="label" title="closed" ng-if="::(select == \'multiselect\' && switches != true)">',a+='<input type="checkbox" class="checkbox" title="{{ ::data | displayValue }}" ng-model="data.tkSelected" ng-init="selected(data)" ng-change="addOrRemoveSelectedFilter(data); displayApplyButton()"> {{ ::data | displayValue | dateFormat: dateFormat | maxCharacters: maxCharacters}}',a+="</label>",a+="<span ng-if=\"::(select == 'multiselect' && switches)\">",a+='<input class="tk-stl-checkbox-switch" type="checkbox" title="{{ ::data | displayValue | dateFormat: dateFormat}}" ng-model="data.tkSelected" ng-change="addOrRemoveSelectedFilter(data); displayApplyButton()" ng-init="selected(data)">',a+='<label class="tk-stl-tiny" ng-click="addOrRemoveSelectedFilter(data); displayApplyButton()" title="{{ ::data | displayValue | dateFormat: dateFormat}}"></label>',a+='<span class="label">{{ ::data | displayValue | dateFormat: dateFormat | maxCharacters: maxCharacters}}</span>',a+="</span>",a+='<a ng-if="::(select != \'multiselect\')" class="label" title="{{ ::data | displayValue | dateFormat: dateFormat}}" ng-click="setFilter(data)">{{ ::data | displayValue | maxCharacters: maxCharacters | dateFormat: dateFormat}}</a>',a+='<span class="metadata" ng-if="enableMetadata">',a+="<span ng-if=\"::(measure == null || measure == 'count')\" class=\"count\">{{::(countNumber == 'plain' ? data.count : countNumber == 'rounded' ? (data.count | roundedNumber) : (data.count | number))}}</span>",a+="<span ng-if=\"::(measure != null && measure != 'count' && data.facts[measure][0] != null)\" class=\"count\">{{::(countNumber == 'plain' ? data.facts[measure][0] : countNumber == 'rounded' ? (data.facts[measure][0]  | roundedNumber) : (data.facts[measure][0]  | number))}}</span>",a+="</span>",a+='<ol class="filter-list hierarchical" ng-if="data.rel.length > 0" ng-class="::{\'shallow-hierarchical\':shallow == true}">',a+='<li ng-repeat="data in data.rel track by $index" ng-include="\'hierarchical.html\'" ng-init="expand = shallow == true" ng-show="$parent.$parent.$parent.expand == null ? filter.expand : $parent.$parent.$parent.expand" ng-class="{\'no-children\':data.rel.length == 0}"></li>',a+="</ol>"}function m(){var a="toggle";if("toggle"==g.select){var b=g.facet&&g.facet.field?g.facet.field:"toggle";a=b+Math.floor(5*Math.random()).toString()}var c="<ol class=\"filter-list\" ng-class=\"::{'hierarchical' : hierarchical == true, 'shallow-hierarchical':shallow == true}\">";return c+='<li ng-show="::searchEnabled" class="tk-facet-search-container">',c+="<input type=\"text\" placeholder=\"Search...\" ng-model=\"searchQuery\" ng-change=\"searchFilters()\" ng-model-options=\"{'updateOn': 'default blur', 'debounce': {'default': 250,'blur': 0}}\">",c+='<div class="tk-stl-circle-loader tk-stl-search-within" ng-class="{\'ng-hide\':loading != true }"></div>',c+="</li>",c+=g.showEmpty?'<li class="filter" ng-repeat="filter in filtered = (filters) | limitTo: limitTo" ng-init="filter.expand = shallow == true" ng-class="{selected: singleFilter(filter), \'has-children\': filter.rel.length > 0 }">':'<li class="filter" ng-repeat="filter in filtered = (filters | filter:greaterThan(\'count\',0) ) | limitTo: limitTo" ng-init="filter.expand = shallow == true" ng-class="{selected: singleFilter(filter), \'has-children\': filter.rel.length > 0 }">',c+='<span class="clickable" ng-if="filter.rel.length > 0  && shallow != true" ng-click="filter.expand = !filter.expand" ng-class="filter.expand ? \'icon-down-dir\' : \'icon-right-dir\'"></span>',"multiselect"!=g.select||g.switches||(c+='<input id="id{{ filter.field }}{{ $index }}" type="checkbox" class="tk-stl-styled-checkbox" title="{{ ::filter | displayValue | dateFormat: dateFormat}}" ng-model="filter.tkSelected" ng-init="selected(filter)" ng-change="addOrRemoveSelectedFilter(filter); displayApplyButton()">',c+='<label for="id{{ filter.field }}{{ $index }}" class="label" title="{{ ::filter | displayValue | dateFormat: dateFormat}}">{{ ::filter | displayValue | dateFormat: dateFormat| maxCharacters: maxCharacters }}</label>'),"multiselect"==g.select&&g.switches&&(c+="<span>",c+='<input class="tk-stl-checkbox-switch" type="checkbox" title="{{ ::filter | displayValue | dateFormat: dateFormat}}" ng-model="filter.tkSelected" ng-init="selected(filter)" ng-change="addOrRemoveSelectedFilter(filter)">',c+='<label class="tk-stl-tiny" ng-click="addOrRemoveSelectedFilter(data); displayApplyButton()"></label>',c+='<span class="label">{{ ::filter | displayValue | dateFormat: dateFormat | maxCharacters: maxCharacters}}</span>',c+="</span>"),"toggle"==g.select&&(c+='<input id="id{{ filter.field }}{{ $index }}" type="radio" name="'+a+'" title="{{ ::filter | displayValue | dateFormat: dateFormat}}" ng-init="selected(filter)" class="tk-filter-radio" ng-checked="filter.tkSelected">',c+='<label ng-click="addOrRemoveSelectedFilter(filter); applyFilters()" for="id{{ filter.field }}{{ $index }}" class="label" title="{{ ::filter | displayValue | dateFormat: dateFormat}}">{{ ::filter | displayValue | dateFormat: dateFormat| maxCharacters: maxCharacters }}</label>'),"multiselect"!=g.select&&"toggle"!=g.select&&(c+='<a class="label" title="{{ ::filter | displayValue | dateFormat: dateFormat}}" ng-click="setFilter(filter)"><span class="tk-stl-selected-icon" ng-if="singleFilter(filter)"></span> {{ ::filter | displayValue | dateFormat: dateFormat | maxCharacters: maxCharacters}}</a>'),"false"!=i.enableMetadata&&(c+='<span class="metadata">',c+="<span ng-if=\"::(measure == null || measure == 'count')\" class=\"count\">{{::(countNumber == 'plain' ? filter.count : countNumber == 'rounded' ? (filter.count | roundedNumber) : (filter.count | number))}}</span>",c+="<span ng-if=\"::(measure != null && measure != 'count' && filter.facts[measure][0] != null)\" class=\"count\">{{::(countNumber == 'plain' ? filter.facts[measure][0] : countNumber == 'rounded' ? (filter.facts[measure][0]  | roundedNumber) : (filter.facts[measure][0]  | number))}}</span>",c+="</span>"),c+='<ol class="filter-list hierarchical" ng-if="filter.rel.length > 0" ng-class="::{\'shallow-hierarchical\':shallow == true}"><li ng-repeat="data in filter.rel  track by $index" ng-include="\'hierarchical.html\'" ng-init="expand = shallow == true" ng-show="filter.expand" ng-class="{\'no-children\':data.rel.length == 0}"></li></ol>',c+="</li>",c+='<li ng-cloak ng-show="filtered.length == 0">',c+='<a href="javascript:void(0);">No results found</a>',c+="</li>",c+='<li ng-cloak class="tk-stl-show-more" ng-show="showMore != null && showMore != 0 && showMore != \'false\' && filtered.length > 0 && filtered.length > show">',c+='<a ng-click="toggleLimitTo()" ng-bind="label"></a>',c+="</li>",c+="</ol>",("multiselect"==g.select||"toggle"==g.select)&&(c+='<input ng-show="showApplyButton" type="button" value="Apply Filters" class="tk-stl-button tk-stl-button-small" ng-click="applyFilters()">'),c}h.on("$destroy",function(){g.$destroy()});var n={};null!=j&&null==i.facet&&null==g.response&&(g.facet=j.getFacet()),g.$watch("facet",function(){if(null!=j&&(n=j.getFilterListOptions()),null==d.get("hierarchical.html")){var a=l();d.put("hierarchical.html",a)}k(),h.html(m()),f(h.contents())(g)})}}};return g}angular.module("lightning").directive("searchFilterList",a),a.$inject=["$lightningLog","$filter","QueryService","$templateCache","$lightningUrl","$compile"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{"var":"@",id:"@"},transclude:!0,controller:["$scope","$twigkit","$attrs","$lightningUrl","$location","$rootScope","ResponseService","PlatformService","$timeout","QueryService","$filter",function(a,b,c,d,e,f,g,h,i,j,k){function l(){a.reloadingSearch=!0;var h;if(null!=a.id)h={query:null,searchParams:{f:d.createFilter("id",a.id,a.id),rpp:1}};else{var i=j.getQueryAsHttpParams(c.query);h=g.getParams(m,i),h.searchParams.rpp=1}b.search(h.query,a.platform,h.searchParams,!1).then(function(b){var c=k("result")(b.data);f.$$childTail[a["var"]]=c,g.setResponse(a["var"],c),a.reloadingSearch=!1},function(){c.errorPage&&e.url(c.errorPage),a.reloadingSearch=!1}).then(function(){m=!0})}var m=!1;a.reloadingSearch=!1,a.platform=h.getPlatform(c.platform);var n=a.$on(c.platform+"_updated",function(b,c){a.platform=c});l();var o=a.$on("reloadSearch",function(){i(function(){l()},0)});a.$on("$destroy",function(){n(),o()})}]};return a}angular.module("lightning").directive("searchLoad",a)}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{response:"="},replace:!0,transclude:!0,link:function(b,c,d,e,f){b.show=!1,b.text=null==b.text?"There are no results that match your query.":b.text,b.hasChildren=a.hasChildren(f),b.$watch("response",function(a){a?b.show=0==a.results.length:b.show=!1})},template:function(){return'<div ng-show="show" class="tk-stl-zero-results" ng-transclude><h2>Sorry, there are no results that match your search criteria.</h2><p>If you\'ve checked your spelling, try using more general keywords.</p></div>'}};return b}angular.module("lightning").directive("searchNoResults",a),a.$inject=["$util"]}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,link:function(a,b,c){function d(){var a=angular.element(document.querySelector(c.target));a.hasClass(c.activeClass)?a.removeClass(c.activeClass):a.addClass(c.activeClass)}c.activeClass=c.activeClass||"active",b.bind("click",d),b.on("$destroy",function(){b.unbind("click",d)})},template:function(){return'<div class="tk-stl-offcanvas-toggle"><a href="javascript:void(0)" class="tk-stl-navbar-toggle tk-stl-drawer-left-toggle"><span class="tk-stl-icon-bar"></span><span class="tk-stl-icon-bar"></span><span class="tk-stl-icon-bar tk-stl-icon-bar-last"></span></a></div>'}};return a}angular.module("lightning").directive("searchOffcanvasToggle",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{response:"=?"},transclude:!0,replace:!0,controller:["$lightningUrl","$scope","$attrs",function(a,b,c){function d(){if(b.firstPage=1,b.pages=[],0==b.response.hits.act[1])b.pagesToShow=0,b.currentPage=b.response.page,b.lastPage=b.response.page,b.showNext=!1;else{b.pagesToShow=b.response.hits.act[1]/b.response.query.rpp,b.currentPage=b.response.page,b.response.hits.act[1]%b.response.query.rpp>0&&(b.pagesToShow+=1),b.pagesToShow=Math.floor(b.pagesToShow),b.pagesToShow>b.maximumNumberOfPages&&b.currentPage>b.maximumNumberOfPages/2+1&&(b.firstPage=b.currentPage-b.maximumNumberOfPages/2,b.firstPage<3&&(b.firstPage=3),b.currentPage>b.pagesToShow-(b.maximumNumberOfPages%2==0?b.maximumNumberOfPages/2:b.maximumNumberOfPages/2+1)&&(b.firstPage=b.pagesToShow-(b.maximumNumberOfPages%2==0?b.maximumNumberOfPages/2:b.maximumNumberOfPages/2+1)));var a;for(a=0;a<b.maximumNumberOfPages;a++){var c=a+Math.ceil(b.firstPage);if(!((b.pageLimit<=0||c<=b.pageLimit)&&c<=b.pagesToShow))break;b.pages.push(c)}"true"==b.showLast&&(b.lastPage=b.response.hits.act[1]/b.response.query.rpp,b.response.hits.act[1]%b.response.query.rpp>0&&(b.lastPage+=1),b.pageLimit>0&&b.pageLimit<=b.lastPage&&(b.lastPage=b.pageLimit),b.lastPage=Math.floor(b.lastPage)),b.showNext=!1,b.currentPage<b.pagesToShow&&(b.pageLimit<=0||b.currentPage<b.pageLimit)&&(b.showNext=!0)}}b.maximumNumberOfPages=null==c.maxPages?10:c.maxPages,b.pageLimit=null==c.pageLimit?0:c.pageLimit,b.firstLabel=null==c.firstLabel?1:c.firstLabel,b.previousLabel=null==c.previousLabel?"previous":c.previousLabel,b.nextLabel=null==c.nextLabel?"next":c.nextLabel,b.showLast=c.showLast,b.changePage=function(b){a.setUrlParameter("p",b,!0)},b.$watch("response",function(a){null!=a&&d()})}],template:function(){var a='<div class="tk-stl-pagination-wrapper" ng-cloak>';return a+='<ol class="tk-stl-pagination-arrows">',a+='<li class="page previous" ng-if="currentPage > 1" ng-click="changePage(currentPage - 1)"><a href="javascript:void(0)">{{::previousLabel}}</a></li>',a+='<li class="page first-page" ng-if="firstPage > 2" ng-click="changePage(1)"><a href="javascript:void(0)">{{::firstLabel}}</a></li>',a+='<li class="page ellipsis" ng-if="firstPage > 2">...</li>',a+='<li class="page" ng-repeat="page in pages" ng-class="{active : page == currentPage }" ng-click="changePage(page)"><a href="javascript:void(0)" ng-if="page != currentPage">{{::page}}</a><span ng-if="page == currentPage">{{::page}}</span></li>',a+='<li class="page ellipsis" ng-if="lastPage > currentPage">...</li>',a+='<li class="page last"  ng-if="lastPage > currentPage" ng-click="changePage(lastPage)"><a href="javascript:void(0)">{{lastPage}}</a></li>',a+='<li class="page next" ng-if="showNext == true" ng-click="changePage(currentPage + 1)"><a href="javascript:void(0)">{{::nextLabel}}</a></li>',a+="</ol>",a+="</div>"}};return a}angular.module("lightning").directive("searchPagination",a)}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{conf:"@"},controller:["$scope","$attrs","$rootScope",function(b,c,d){var e={"var":"platform"};c["var"]&&(e["var"]=c["var"]),c.host&&(e.host=c.host),e.conf=b.conf,d.$$childTail[e["var"]]=e,a.setPlatform(e["var"],e)}]};return b}angular.module("lightning").directive("searchPlatform",["PlatformService",a])}(),function(){"use strict";function a(a,b,c,d,e,f){var g={restrict:"E",scope:{"var":"@",parameters:"@",from:"=",modifiedQuery:"@"},controller:["$scope",function(a){function b(b){a.filters.push(b),a.$broadcast("reload_"+a["var"])}function c(b){a.removeFilters.push(b),a.$broadcast("reload_"+a["var"])}function d(b){a.removeAllFilters.push(b),a.$broadcast("reload_"+a["var"])}function e(b,c){a.customParameters.push(b+"["+c+"]"),a.$broadcast("reload_"+a["var"])}a.filters=[],a.removeFilters=[],a.removeAllFilters=[],a.customParameters=[];var f=this;f.addFilter=b,f.removeFilter=c,f.removeAllFilters=d,f.addCustomParameter=e}],link:{post:function(g,h,i){function j(){var d,h=["var","parameters","from","query","q","modifiedQuery","mq","type","t","rrp","resultsPerPage","max","maxResults","p","page","fa","facets","fi","fields","s","sorts","v","view","f","filters","custom"],j=g.parameters||"*",k={};if(d=g.from?angular.copy(g.from):angular.copy(a.search()),"string"==typeof d.f&&(d.f=[d.f]),"*"===j)k=d;else{var l=j.split(",");if(-1!=l.indexOf("*")){var m=l.indexOf("*");k=d,l.splice(m,1)}for(var n=0;n<l.length;n++){if(0==l[n].indexOf("-")){var o=l[n].substring(1);k.hasOwnProperty(o)&&delete k[o]}d.hasOwnProperty(l[n])&&(k[l[n]]=d[l[n]])}}if((i.query||i.q)&&null==k.q?k.q=i.query||i.q:null==k.q&&(k.q=""),g.modifiedQuery&&null==k.mq&&(k.mq=g.modifiedQuery),i.type&&null==k.t&&(k.t=i.type),i.resultsPerPage&&null==k.rpp&&(k.rpp=i.resultsPerPage),i.maxResults&&null==k.max&&(k.max=i.maxResults),i.page&&null==k.p&&(k.p=i.page),i.facets&&null==k.fa&&(k.fa=i.facets),i.fields&&null==k.fi&&(k.fi=i.fields),i.sorts&&null==k.s){k.s=i.sorts;for(var p=k.s.split(","),q=0;q<p.length;q++){var r=p[q];"+"!=r[0]&&"-"!=r[0]&&(r="+"+r),p[q]=r}k.s=p.join(",")}if(i.view&&null==k.v&&(k.v=i.view),i.filters&&(k.f=i.filters.split("&")),i.custom&&null==k.c&&(k.c=i.custom.split("&")),g.filters.length>0){if(!angular.isArray(k.f))if(void 0!=k.f&&k.f.length>0){var s=k.f;k.f=[],k.f.push(s)}else k.f=[];angular.forEach(g.filters,function(a){k.f.push(a)})}if(g.customParameters.length>0){if(!angular.isArray(k.c))if(void 0!=k.c&&k.c.length>0){var t=k.c;k.c=[],k.c.push(t)}else k.c=[];angular.forEach(g.customParameters,function(a){k.c.push(a)})}for(var u in i)i.hasOwnProperty(u)&&!angular.isObject(i[u])&&null!=i[u]&&u.charAt(0).match(/[a-z]/i)&&"ng"!=u.substring(0,2)&&-1==h.indexOf(u)&&(angular.isArray(k[u])?k[u].push(i[u]):k[u]=i[u]);null!=k.f&&k.f.length>0&&angular.forEach(k.f,function(a,b){angular.isObject(a)||(k.f[b]=e.stringToFilter(a))}),g.removeFilters.length>0&&angular.forEach(g.removeFilters,function(a){var b=e.createFilterFromObject(a);if(null!=k.f&&-1!=k.f.indexOf(b))k.f.splice(k.f.indexOf(b),1);else{var c=f("filter")(k.f,a,!0);angular.forEach(c,function(a){k.f.splice(k.f.indexOf(a),1)})}});var v=[];g.removeAllFilters.length>0&&angular.forEach(g.removeAllFilters,function(a){angular.isArray(k.f)?angular.forEach(k.f,function(b){b.field==a&&v.push(b)}):void 0!=k.f&&k.f.field==a&&v.push(k.f)}),v.length>0&&angular.forEach(v,function(a){if(k.f==a)k.f=[];else{var b=f("filter")(k.f,a,!0);angular.forEach(b,function(a){k.f.splice(k.f.indexOf(a),1)})}}),c.setQuery(g["var"],k),b.$$childTail[g["var"]]=c.getQuery(g["var"])}if(null!=i.from)var k=g.$watch("from",function(a){null!=a&&(j(),k())},!0);else j();var l=g.$on("reloadSearch",function(){null!=i.from?d(function(){j()},0):j()}),m=g.$on("reload_"+i["var"],function(){j()});g.$on("$destroy",function(){m(),l()})}}};return g}angular.module("lightning").directive("searchQuery",["$location","$rootScope","QueryService","$timeout","$lightningUrl","$filter",a])}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{"var":"@",query:"@"},transclude:!0,controller:["$scope","$twigkit","$attrs","$lightningUrl","$location","$rootScope","ResponseService","PlatformService","$timeout","QueryService",function(a,b,c,d,e,f,g,h,i,j){function k(){a.reloadingSearch=!0;var d=j.getQueryAsHttpParams(a.query),h=g.getParams(l,d),i=(new Date).getTime();b.search(h.query,a.platform,h.searchParams,!1).then(function(b){var c=(new Date).getTime()-i;a.previousResponseTime=c,a.times.push(c);var d=a.times.reduce(function(a,b){return a+b},0);a.averageResponseTime=(d/a.times.length).toFixed(0),f.$$childTail[a["var"]]=b.data,g.setResponse(a["var"],b.data),a.reloadingSearch=!1},function(){c.errorPage&&e.url(c.errorPage),a.reloadingSearch=!1}).then(function(){l=!0})}a.times=[];var l=!1;a.reloadingSearch=!1,a.platform=h.getPlatform(c.platform);var m=a.$on(c.platform+"_updated",function(b,c){a.platform=c});k();var n=null==c.on?"reloadSearch":c.on,o=a.$on(n,function(){i(function(){k()},0)});a.$on("$destroy",function(){m(),o()})}],link:function(b,c,d,e,f){b.hasChildren=a.hasChildren(f)},template:function(){return'<div ng-show="reloadingSearch && hasChildren" class="tk-stl-response-loader"><div class="tk-stl-response-loader-content" ng-transclude></div></div>'}};return b}angular.module("lightning").directive("searchResponse",a),a.$inject=["$util"]}(),function(){"use strict";function a(a,b){var c={restrict:"E",scope:{},transclude:!0,replace:!0,link:function(c,d,e){function f(){c.totalResults=c.response.hits.act[1],0==c.totalResults?(c.firstResult=0,c.lastResult=0):(c.firstResult=(c.response.page-1)*c.response.query.rpp+1,c.response.page*c.response.query.rpp>c.totalResults?c.lastResult=c.totalResults:c.lastResult=c.response.page*c.response.query.rpp),g()}function g(){c.unformattedLastResult=c.lastResult,null!=c.format?(c.firstResult=a("numberFormat")(c.firstResult,c.format),c.lastResult=a("numberFormat")(c.lastResult,c.format),c.totalResultsDisplay=a("numberFormat")(c.totalResults,c.format)):c.totalResultsDisplay=c.totalResults}c.show=!1,c.showingLabel=null==e.showingLabel?"Showing":e.showingLabel,c.showingAllLabel=null==e.showingAllLabel?"Showing all":e.showingAllLabel,c.ofLabel=null==e.ofLabel?"of":e.ofLabel,c.toLabel=null==e.toLabel?"-":e.toLabel,c.format=null==e.numberFormat?"#,##0.###":e.numberFormat,null!=e.response&&(c.response=b.getResponse(e.response,"page,hits,query"),c.$on(e.response+"_updated",function(){c.response=b.getResponse(e.response,"page,hits,query"),null!=c.response&&f()}),null!=c.response&&f()),c.$on("update_last_result",function(a,b){null!=b&&(c.lastResult=c.unformattedLastResult+b.newResults,c.totalResults=b.newTotal,g())})},template:function(){var a="<div>";return a+='<p ng-if="response != null && totalResults > response.query.rpp" class="response-statistics">{{::showingLabel}} {{firstResult}} {{::toLabel}} {{lastResult}} {{::ofLabel}} {{totalResultsDisplay}}</p>',a+='<p ng-if="response != null && totalResults < response.query.rpp" class="response-statistics">{{::showingAllLabel}} {{totalResultsDisplay}}</p>',a+="</div>"}};return c}angular.module("lightning").directive("searchResponseStatistics",a),a.$inject=["$filter","ResponseService"]}(),function(){"use strict";function a(a,b){var c={restrict:"E",transclude:!0,replace:!0,scope:{result:"=?"},link:function(c,d,e,f,g){function h(a,c){var d=c.result?c.result:c,e=a.hasOwnProperty("when")?a.when:null,f=a.hasOwnProperty("equals")?a.equals:null;return e?e&&!f&&d&&d.fields&&d.fields[e]?!0:e&&f&&d&&d.fields&&d.fields[e]&&b("actualValue")(d.fields[e])==f?!0:!1:!0}d.on("$destroy",function(){c.$destroy()}),c.result=void 0==c.result?c.$parent.result:c.result;var i=c.$watch("result",function(b){
b&&(h(e,b)?g(c,function(a){d.append(a)}):a(function(){c.$destroy(),d.remove()},0),i())})},template:function(){return'<li class="result"></li>'}};return c}angular.module("lightning").directive("searchResult",["$timeout","$filter",a])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){var j={restrict:"E",scope:{results:"=?",infiniteScroll:"@"},replace:!0,transclude:!0,link:function(j,k,l,m,n){function o(){x=angular.element('<div class="tk-stl-circle-loader tk-stl-xs"></div>'),k.after(x)}function p(){null!=x&&x.remove()}function q(){if(l.hasOwnProperty("infiniteScroll")&&null!=l.query)if("parent"!=j.infiniteScroll)A.bind("scroll",t),j.$on("$destroy",function(){A.unbind("scroll",t)});else{var a=k[0]||k,b=angular.element(a.parentElement);b.bind("scroll",t),j.$on("$destroy",function(){b.unbind("scroll",t)})}}function r(a){var b=a[0]||a;return isNaN(window.pageYOffset)?b.document.documentElement.scrollTop:b.ownerDocument.defaultView.pageYOffset}function s(a){return a.getBoundingClientRect?a.getBoundingClientRect().top+r(a):void 0}function t(){var a=k[0]||k;if(!j.loading&&!j.disabled){var b,c;if("parent"==j.infiniteScroll){var d=angular.element(a.parentElement);d=d[0]||d;var e,f=d.offsetHeight;void 0!==s(d)&&(e=s(d)),h=s(a)-e+a.offsetHeight,c=h-f,b=0>=c-400}else{var g=A[0].innerHeight,h=a.offsetTop+a.offsetHeight,i=g+(A[0].scrollY||A[0].pageYOffset);c=h-i,b=0>=c-400}b&&(j.loading=!0,o(),u())}}function u(){j.platform=d.getPlatform(l.platform);var b=i.getQueryAsHttpParams(l.query),f=c.getParams(D,b);return void 0!=f.searchParams.p&&f.searchParams.p>C?(f.searchParams.p=f.searchParams.p+1,C=f.searchParams.p):(C+=1,f.searchParams.p=C),f.searchParams.p>j.lastPage?void j.$evalAsync(function(){p(),j.loading=!1,j.disabled=!0}):void e.search(f.query,j.platform,f.searchParams).then(function(b){D=!0;for(var c=0;c<b.data.results.length;c++){if(B){var d=j.$new(!0);d.result=b.data.results[c].result,d.index=j.response.results.length;var e=a.render(n,k,d);y.push({elem:e,scope:d})}j.response.results.push(b.data.results[c])}j.lastPage=b.data.hits.act[1]/b.data.query.rpp,b.data.hits.act[1]%b.data.query.rpp>0&&(j.lastPage+=1),j.lastPage=Math.floor(j.lastPage),g.$broadcast("update_last_result",{newResults:b.data.results.length,newTotal:b.data.hits.act[1]}),p(),j.loading=!1,h(function(){w()},0)},function(){D=!0,p(),j.loading=!1})}function v(){var c;if(C=1,j.disabled=!1,0!=j.response.hits.act[1]&&(j.lastPage=j.response.hits.act[1]/j.response.query.rpp,j.response.hits.act[1]%j.response.query.rpp>0&&(j.lastPage+=1),j.lastPage=Math.floor(j.lastPage)),q(),a.remove(y,function(){y=[]}),B)for(c=0;c<j.response.results.length;c++){var d=j.$new(!0);d.result=j.response.results[c].result,d.index=c;var e=a.render(n,k,d);y.push({elem:e,scope:d})}else if(!z){z=!0;var f='<search:result ng-repeat="r in response.results" result="r.result">',g={};for(c=0;c<j.response.results.length;c++){var i=j.response.results[c].result;for(var l in i.fields)g[l]=!0}for(var m in g)f+='<search:field name="'+m+'" styling="label-left"></search:field>';f+="</search:result>";var o=angular.element(f);b(o)(j),k.append(o)}h(function(){w()},0),j.loading=!1}function w(){if(l.hasOwnProperty("infiniteScroll")&&null!=l.query&&"parent"!=j.infiniteScroll){var a=document.body.scrollHeight>window.outerHeight,b=document.body.currentStyle||window.getComputedStyle(document.body,"");a="visible"==b.overflow||"visible"==b.overflowY||a&&"auto"==b.overflow||a&&"auto"==b.overflowY,a||u()}}"true"==l.infiniteScrolling&&(j.infiniteScroll="window");var x,y=[],z=!1,A=angular.element(f),B=a.hasChildren(n);j.loadMore="true"==l.loadMore,j.loadMoreResults=function(){o(),j.loading=!0,u()},null!=l.response?(j.response=c.getResponse(l.response,"results,hits,query"),j.$on(l.response+"_updated",function(a,b){j.response=b,null!=j.response&&v()}),null!=j.response&&v()):null!=l.results&&(j.response={hits:{act:["Long",0]},results:j.results},v(),null!=j.response&&j.$watch("results",function(){j.response.results=j.results,v()}));var C=1,D=!1},template:function(){return'<ol class="result-list" ng-class="::{\'infinite-result-list\' : infiniteScroll != null || loadMore}"><p class="infinite-results-loading" ng-show="loadMore && !loading && !disabled"><a href="javascript:void(0);" ng-click="loadMoreResults()">More</a></p><p class="infinite-results-loading end" ng-show="disabled"></p></ol>'}};return j}angular.module("lightning").directive("searchResultList",a),a.$inject=["$util","$compile","ResponseService","PlatformService","$twigkit","$window","$rootScope","$timeout","QueryService"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{response:"=?",title:"@"},transclude:!0,replace:!0,controller:["$lightningUrl","$scope",function(a,b){b.title=null==b.title?"Per page":b.title,b.selected=a.getUrlParameter("rpp",10),b.show=!1,b.changeRpp=function(c){a.setUrlParameter("p",1),a.setUrlParameter("rpp",c,!0),b.selected=c,b.closeList()},b.showList=function(){b.show="show"==b.show?!1:"show"},b.closeList=function(){b.show=!1},b.$watch("response",function(a){null!=a&&(null!=b.response.query?b.selected=b.response.query.rpp:b.selected=null)})}],template:function(a,b){b.options=null==b.options?"10,25,50,100":b.options;var c=b.options.split(","),d="<li><div>";return d+='<a href="javascript:void(0);" class="rppoptions-show" ng-click="showList()"><span class="tk-stl-hidemedium" ng-if="response != null">{{ ::title }} </span><em>{{ selected }}</em> <span class="caret"></span></a>',d+='<div class="tk-stl-sortoptions-group {{ show }}" ng-if="response != null"><ul click-outside="closeList()" outside-if-not="rppoptions-show">',angular.forEach(c,function(a){d+="<li ng-class=\"{active : rpp == '"+a+'\'}"><a href="javascript:void(0);" ng-click="changeRpp('+a+')" >'+a+"</a></li>"}),d+="</ul>",d+="</div>",d+="</div></li>"}};return a}angular.module("lightning").directive("searchResultsPerPage",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^searchTypeahead",link:function(a,b,c,d){if(d){var e={keyword:c.keyword};e.field=c.facet||c.keyword||!1,e.type=c.hasOwnProperty("date")?"date":"text",e.placeholder=c.description||"",c.hasOwnProperty("facetField")&&""!=c.facetField&&(e.facetField=c.facetField),c.hasOwnProperty("date")&&(e.dateRange=c.hasOwnProperty("date")&&c.date.length>0?c.date:"on"),c.hasOwnProperty("dateFormat")&&c.dateFormat.length>0&&(e.dateFormat=c.dateFormat),c.hasOwnProperty("dateDisplayFormat")&&c.dateDisplayFormat.length>0&&(e.dateDisplayFormat=c.dateDisplayFormat),e.keyword&&e.field&&d.addKeyword(e)}}};return a}angular.module("lightning").directive("searchKeyword",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{response:"=?"},transclude:!0,replace:!0,controller:["$lightningUrl","$scope","$attrs","$filter",function(a,b,c,d){function e(){var e=a.getUrlParameter("s","");""==e&&null!=b.response&&null!=b.response.query&&null!=b.response.query.sorts&&b.response.query.sorts.length>0&&(e=("asc"==b.response.query.sorts[0].order?"+":"-")+b.response.query.sorts[0].field),b.selectedSort=e.length>1?e.slice(1,e.length):"*","*"==b.selectedSort||0==d("filter")(b.fields,{actual:b.selectedSort}).length?(b.selectedSort="*",b.selectedOrder="desc"==c.defaultOrder?"-":"+",b.selectedSortDisplay=b.defaultLabel):(b.selectedSort=e.length>1?e.slice(1,e.length):"*",b.selectedOrder=e.length>1?e.slice(0,1):"+",b.selectedSortDisplay=d("filter")(b.fields,{actual:b.selectedSort})[0].display)}b.defaultLabel=null==c.defaultLabel?"relevance":c.defaultLabel,b.show=!1;var f=c.fields.length>0?c.fields.split(","):[];b.fields=[],b.fields.push({actual:"*",display:b.defaultLabel}),angular.forEach(f,function(a){var c=a.split("=");b.fields.push({actual:c[0],display:c[1]})});var g=b.$watch("response",function(a){a&&(e(),g())});b.$on("paramChange",function(a,b){"s"==b&&e()}),b.changeSort=function(c){a.setUrlParameter("p",1),a.setUrlParameter("s",b.selectedOrder+""+c,!0),b.selectedSort=c,b.selectedSortDisplay=d("filter")(b.fields,{actual:b.selectedSort})[0].display},b.changeOrder=function(c){a.setUrlParameter("p",1),a.setUrlParameter("s",c+""+b.selectedSort,!0),b.selectedOrder=c},b.showList=function(){b.show="show"==b.show?!1:"show"},b.closeList=function(){b.show=!1}}],template:function(a,b){var c="<li><div>",d=null==b.title?"Sort by ":b.title;c+='<a href="javascript:void(0);" class="sortoptions-show" ng-click="showList()">',c+='<span class="tk-stl-hidemedium" ng-if="response != null">'+d+'</span><em>{{ selectedSortDisplay }}</em> <span class="caret"></span>',c+="</a>",c+='<div class="tk-stl-sortoptions-group {{ show }}" ng-if="response != null"><ul click-outside="closeList()" outside-if-not="sortoptions-show">',c+="<li ng-class=\"{active: selectedSort == '*'}\">",c+="<a href=\"javascript:void(0);\" ng-click=\"changeOrder('+');changeSort('*')\">{{defaultLabel}}</a>",c+="</li>";var e=b.fields.length>0?b.fields.split(","):[];return angular.forEach(e,function(a){var b=a.split("="),d={actual:b[0],display:b[1]||b[0]};c+="<li ng-class=\"{active: selectedSort == '"+d.actual+"'}\">",c+='<a href="javascript:void(0);" ng-click="changeSort(\''+d.actual+"')\">"+d.display+"</a>",c+="</li>"}),c+='<li class="divider" ng-hide="selectedSort == \'*\'"></li>',c+='<li ng-class="{active: selectedOrder == \'+\'}" ng-hide="selectedSort == \'*\'"><a href="javascript:void(0);" ng-click="changeOrder(\'+\')">Ascending</a></li>',c+='<li ng-class="{active: selectedOrder == \'-\'}" ng-hide="selectedSort == \'*\'"><a href="javascript:void(0);" ng-click="changeOrder(\'-\')">Descending</a></li>',c+="</ul>",c+="</div>",c+="</div></li>"}};return a}angular.module("lightning").directive("searchSort",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(g,k,m){function n(){if(v!=m.tabs){v=m.tabs;var a=m.tabs.length>0?m.tabs.split(","):[];g.tabs=[],angular.forEach(a,function(a){var b=a.split("="),c=b[0];-1!=c.indexOf("|")&&(c=c.split("|")),g.tabs.push({actual:c,display:b.length>1?b[1].trim():b[0].trim()})})}}function o(){if(g.platform=c.getPlatform(m.platform),g.activeTab="all",null!=m.fieldName&&""!=m.fieldName){var h,j=!0;null!=m.query&&(g.query=i.getQueryAsHttpParams(m.query));var k;if(null!=g.query&&null!=g.platform&&(k=f.getParams(!0,g.query),null!=k.searchParams.f))if(angular.isArray(k.searchParams.f))for(var l=k.searchParams.f.length;l>0;l--)b.stringToFilter(k.searchParams.f[l-1]).field==m.fieldName&&(j=!1,k.searchParams.f.splice(l-1,1));else b.stringToFilter(k.searchParams.f).field==m.fieldName&&(j=!1,k.searchParams.f=null);null!=g.response&&null!=g.response.facets&&(h=q(g.response.facets)),j?(p(),null!=g.response&&g.platform?null!=g.response.hits.dsp?g.allCount=d("display")(g.response.hits.dsp):g.allCount=d("numberFormat")(g.response.hits.act[1],x):g.allCount="",null!=g.platform&&r(h),t()):(p(),null!=g.platform&&null!=k&&(k.searchParams.rpp=0,k.searchParams.fa=m.fieldName,e.search(k.query,g.platform,k.searchParams).then(function(a){var b=a.data;null!=b.hits.dsp?g.allCount=d("display")(b.hits.dsp):g.allCount=d("numberFormat")(b.hits.act[1],x),h=q(b.facets),r(h),t()})))}else if(a.path().length>1){var n=a.path();n=n.substring(1),g.activeTab=n}else g.activeTab=""}function p(){var c,e=0;angular.forEach(g.tabs,function(f){if("urlTabs"==l){var h=a.path();if(-1!=h.lastIndexOf(f.actual)&&h.lastIndexOf(f.actual)==h.length-f.actual.length&&(e++,g.activeTab=f.actual,e>1))return void(g.activeTab=null)}else if(angular.isArray(f.actual)&&null!=g.response&&null!=g.response.query&&null!=g.response.query.filters&&g.response.query.filters.length>0)c=d("filter")(g.response.query.filters,{field:m.fieldName},!0),angular.forEach(f.actual,function(a){if(null!=c){var h=d("deepFilter")(c,"val.act",a)[0];null!=h&&(e++,g.activeTab=f.actual)}else if((b.urlContainsFilter(m.fieldName,a,f.display,"value")||b.urlContainsFilter(m.fieldName,a,a,"value")||b.urlContainsFilter(m.fieldName,a,f.display)||b.urlContainsFilter(m.fieldName,a,a))&&(e++,g.activeTab=f.actual,e>1))return void(g.activeTab=null)});else if(null!=g.response&&null!=g.response.query&&null!=g.response.query.filters&&g.response.query.filters.length>0){if(c=d("filter")(g.response.query.filters,{field:m.fieldName},!0),null!=c){var i=d("deepFilter")(c,"val.act",f.actual)[0];null!=i&&(e++,g.activeTab=f.actual)}}else if(angular.isArray(f.actual))angular.forEach(f.actual,function(a,c){return(b.urlContainsFilter(m.fieldName,a,f.display,"value")||b.urlContainsFilter(m.fieldName,a,a,"value")||b.urlContainsFilter(m.fieldName,a,f.display)||b.urlContainsFilter(m.fieldName,a,a))&&(e++,g.activeTab=f.actual,c==f.actual.length-1&&e!=f.actual.length)?void(g.activeTab=null):void 0});else if((b.urlContainsFilter(m.fieldName,f.actual,f.display,"value")||b.urlContainsFilter(m.fieldName,f.actual,f.actual,"value")||b.urlContainsFilter(m.fieldName,f.actual,f.display)||b.urlContainsFilter(m.fieldName,f.actual,f.actual))&&(e++,g.activeTab=f.actual,e>1))return void(g.activeTab=null)})}function q(a){var b=[];angular.forEach(a,function(a){b.push(a)});var c=d("filter")(b,{field:m.fieldName},!0)[0];return null==c&&j.warn("Search:Tabs",'Facet "'+m.fieldName+'" was not found. Counts have not been added and some tabs have been disabled. Please check field-name attribute has the correct facet.'),c}function r(a){null!=a?angular.forEach(g.tabs,function(b,c){angular.isArray(b.actual)?(g.tabs[c].count=0,angular.forEach(b.actual,function(b,d){s(a.filters,b,c,!0,d)})):s(a.filters,b.actual,c,!1),null!=b.count&&0!=b.count?g.tabs[c].disabled=!1:g.tabs[c].disabled=!0}):angular.forEach(g.tabs,function(a,b){g.tabs[b].disabled=!0})}function s(a,b,c,e){var f;f=d("filter")(a,{val:b},!0)[0],null==f?(f=d("deepFilter")(a,"val.act",b)[0],e?null!=f?g.tabs[c].count+=f.count:g.tabs[c].count+=0:null!=f?g.tabs[c].count=f.count:g.tabs[c].count=0):e?g.tabs[c].count+=f.count:g.tabs[c].count=f.count}function t(){angular.forEach(g.tabs,function(a){a.count=d("numberFormat")(a.count,x)})}function u(a){"all"==a&&h.$broadcast("tab_changed","all");for(var b=0;b<g.tabs.length;b++)if(angular.equals(a,g.tabs[b].actual)){h.$broadcast("tab_changed",g.tabs[b].display);break}}var v,w=["plain","formatted","rounded"],x=-1!=w.indexOf(m.countNumber)?m.countNumber:"formatted";g.$watch("response",function(){n(),o()}),m.$observe("tabs",function(){n(),o()}),g.changeUrl=function(c){("all"==c||null!=g.platform&&null!=c.count&&0!=c.count||null==g.platform)&&(null!=m.fieldName&&""!=m.fieldName?"all"==c?"urlTabs"==l?null==m.action?a.path("/"):a.path(m.action+"/"):(b.removeFiltersFromUrl(m.fieldName,!0),g.activeTab="all"):"urlTabs"==l?null==m.action?a.path(c.actual):a.path(m.action+c.actual):(b.removeFiltersFromUrl(m.fieldName,!1),angular.isArray(c.actual)?angular.forEach(c.actual,function(a,d){b.addFilterToUrl(m.fieldName,a,c.display,d==c.actual.length-1,"value")}):b.addFilterToUrl(m.fieldName,c.actual,c.display,!0),g.activeTab=c.actual):(a.path("/"+c.actual),a.url(a.path())))},g.$watch("activeTab",u)}var l,m={restrict:"E",scope:{response:"=?"},transclude:!0,replace:!0,compile:function(){return l=this.name,k},template:function(a,b){var c,d=g.hasStyle("navbar",b.styling),e=g.hasStyle("tabs",b.styling);return c=d||e?'<ol class="tabs ">':'<ol class="tabs tk-stl-tabs">',null!=b.allLabel&&""!=b.allLabel&&(d?(c+='<li ng-class="{active: activeTab == tab.actual}" class="tk-stl-navbar-item">',c+='<a href="javascript:void(0);" ng-click="changeUrl(\'all\')">',c+='<span class="label">'+b.allLabel+'<span class="metadata" ng-bind="allCount"></span></span>',c+="</a>",c+="</li>"):(c+='<li ng-class="{active: activeTab == \'all\'}" class="tab">',c+='<span class="label" ng-cloak>',c+="<a href=\"javascript:void(0);\" ng-click=\"activeTab != 'all' && changeUrl('all')\">"+b.allLabel+'<span class="metadata" ng-bind="allCount"></span></a>',c+="</span>",c+="</li>")),d?(c+='<li ng-repeat="tab in tabs track by tab.display" ng-class="{active: activeTab == tab.actual}" class="tk-stl-navbar-item">',c+='<a href="javascript:void(0);" ng-click="changeUrl(tab)">',c+='<span class="label">{{::tab.display}} <span class="metadata" ng-bind="tab.count"></span></span>',c+="</a>",c+="</li>"):(c+='<li ng-repeat="tab in tabs track by tab.display" ng-class="{active: activeTab == tab.actual, disabled: tab.disabled}" class="tab">',c+='<span class="label" ng-cloak>',c+='<a href="javascript:void(0);" ng-click="activeTab != tab.actual && changeUrl(tab)">{{::tab.display}} <span class="metadata" ng-bind="tab.count"></span></a>',c+="</span>",c+="</li>"),c+="</ol>"}};return m}angular.module("lightning").directive("searchTabs",a),angular.module("lightning").directive("urlTabs",a),a.$inject=["$location","$lightningUrl","PlatformService","$filter","$twigkit","ResponseService","$util","$rootScope","QueryService","$lightningLog"]}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{},transclude:!0,controller:["$scope","$lightningUrl","$element","$attrs","$filter","$timeout","$twigkit","QueryService","$location","PlatformService",function(a,b,c,d,e,f,g,h,i,j){function k(){q()}function l(b){b&&(a.model.keywords[b.keyword]=b,o())}var m=c.find("input")[0],n=d.hasOwnProperty("platform")&&d.platform.length>0?j.getPlatform(d.platform):!1;a.model={keywords:[],filters:[],query:{q:""},selectedKeyword:null,suggestions:[],showSuggestions:!1,showInstantResults:!1,showDatepicker:!1,highlightedListItem:null};var o=_.debounce(k,5),p=this;p.addKeyword=l;var q=function(){var c=b.getAllUrlParameters(),d=[];if(c.f)if("string"==typeof c.f)d.push(b.stringToFilter(c.f));else for(var e=0;e<c.f.length;e++)d.push(b.stringToFilter(c.f[e]));a.model.filters=d,a.model.query.q=c.q||""},r=function(){a.model.selectedKeyword&&-1==a.model.query.q.indexOf(a.model.selectedKeyword.keyword+":")&&(a.model.selectedKeyword=null)},s=function(a){return a&&"string"==typeof a?a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):a},t=function(){if(!m)return console.warn("search input element not defined"),a.model.q.length;var b=0;if(document.selection){m.focus();var c=document.selection.createRange();c.moveStart("character",-m.value.length),b=c.text.length}else(m.selectionStart||"0"==m.selectionStart)&&(b=m.selectionStart);return b},u=function(){var b=t(),c=a.model.query.q.substr(0,b).match(/(?:^|\s)(\w+\s?)$/);return c&&c.length>0?c[1]:!1},v=function(a){var b=u(),c=a.keyword.replace(b,'<em class="keyword">$&</em>');return a.placeholder&&(c+=': <span class="placeholder">'+a.placeholder+"</span>"),c},w=function(a){var b;return a.keyword&&(b={dsp:v(a),act:a}),b},x=function(){var b=[],c=u();if(c.length>0){var d=new RegExp("^("+s(c)+")","i");for(var e in a.model.keywords)a.model.keywords.hasOwnProperty(e)&&a.model.keywords[e].keyword.search(d)>-1&&b.push(a.model.keywords[e])}return b},y=function(){if(a.model.selectedKeyword&&a.model.selectedKeyword.keyword){var b=new RegExp(a.model.selectedKeyword.keyword+":(?!\\s*\\S+:)(.+?)(?=\\s\\S+:|$)","i"),c=a.model.query.q.match(b),d=c&&c.length>0?c[1]:"";a.model.selectedKeyword.val={act:d,dsp:d}}},z=function(){a.$broadcast("instant_search_changed",a.model.query.q)},A=_.debounce(z,200),B=function(){for(var b=[],c=x(),d=[],e=0;e<c.length;e++)d.push(w(c[e]));d.length>0&&b.push({name:"Keywords",suggestions:d}),a.model.suggestions=b,A()},C=function(){var b=[],c={name:"Search within "+a.model.selectedKeyword.field,suggestions:[]},d=F();n?g.searchFacet(a.model.selectedKeyword.field,n,d,10,a.model.selectedKeyword.val.act,!1,a.model.selectedKeyword.facetField||null).then(function(d){for(var e=d.data,f=0;f<e.length;f++)c.suggestions.push({act:e[f],dsp:e[f].val});b.push(c),a.model.suggestions=b,a.model.showSuggestions=!0,a.model.showInstantResults=!1,a.model.showDatepicker=!1},function(){console.log("Failed")}):(b.push(c),a.model.suggestions=b)},D=function(b){if(a.model.selectedKeyword){var c=new RegExp("("+a.model.selectedKeyword.keyword+")(?!\\s*\\S+:)(.+?)(?=\\s\\S+:|$)","gi");return b.replace(c,"").replace(/  +/g," ")}return b},E=function(){var b=u(),c=a.model.selectedKeyword.keyword,d=a.model.query.q,e=b?d.indexOf(b):0;d=d.slice(0,e)+c+":"+d.slice(e+b.length),a.model.query.q=d},F=function(){for(var b={val:D(a.model.query.q),filters:[]},c=0;c<a.model.filters.length;c++)b.filters.push(a.model.filters[c]);var d=h.convertQueryToHttpParams(b);return d};if(d.hasOwnProperty("autoSearch")&&d.autoSearch>0)var G=_.debounce(a.search,d.autoSearch);var H=function(){f(function(){m.focus()},0)};a.searchInputChanged=function(){r(),a.model.selectedKeyword?(y(),C()):(B(),a.model.showSuggestions=!0,a.model.showDatepicker=!1,d.hasOwnProperty("autoSearch")&&d.autoSearch>0&&G()),0==a.model.query.q.length&&(a.model.showInstantResults=!1)},a.selectSuggestion=function(b){b.keyword&&(b.val="",a.model.selectedKeyword=b,E(),"date"==b.type?(a.model.showDatepicker=!0,a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.highlightedListItem=null):(a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.showDatepicker=!1,a.model.highlightedListItem=null,a.searchInputChanged())),b.keyword||b.field!=a.model.selectedKeyword.field||(a.model.selectedKeyword.val={dsp:b.val,act:b.val},a.model.filters.push(a.model.selectedKeyword),a.model.query.q=D(a.model.query.q),a.model.selectedKeyword=null,a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.showDatepicker=!1,a.model.highlightedListItem=null),H()},a.clearFilters=function(){a.model.filters=[]},a.removeFilter=function(b){a.model.filters=a.model.filters.filter(function(a){return!angular.equals(b,a)})},a.search=function(){a.model.selectedKeyword=null;var c=F();if(d.hasOwnProperty("action")&&d.action.trim().length>0){var f=e("getUrlForQuery")(c);i.url(d.action.trim()+"?"+f)}else b.setUrlParameters(c,!0);a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.showDatepicker=!1,a.model.highlightedListItem=null},a.onTimeSet=function(b){if(b){var c=a.model.selectedKeyword.dateDisplayFormat?a.model.selectedKeyword.dateDisplayFormat:"yyyy-MM-ddTHH:mm:ss",d=a.model.selectedKeyword.dateFormat?a.model.selectedKeyword.dateFormat:"yyyy-MM-ddTHH:mm:ss";a.model.selectedKeyword.val={dsp:e("date")(b,c),act:e("date")(b,d)},a.model.filters.push(a.model.selectedKeyword),a.model.query.q=D(a.model.query.q),a.model.selectedKeyword=null,a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.showDatepicker=!1,a.model.highlightedListItem=null,H()}},a.showFilters=function(b){b.stopPropagation(),a.model.showSuggestions=!0},a.clearSearch=function(){a.model.query.q=""};var I={DOWN:40,UP:38,ENTER:13,TAB:9},J=function(){var b=c.find("li"),d=b.length;a.model.highlightedListItem<d&&(a.model.highlightedListItem++,b.removeClass("selected"),angular.element(b[a.model.highlightedListItem-1]).addClass("selected"))},K=function(){if(a.model.highlightedListItem<=0)a.model.highlightedListItem=0;else{a.model.highlightedListItem--;var b=c.find("li");b.removeClass("selected"),angular.element(b[a.model.highlightedListItem-1]).addClass("selected")}};c.bind("keydown",function(b){switch(b.which){case I.DOWN:b.preventDefault(),J();break;case I.UP:b.preventDefault(),K();break;case I.ENTER:case I.TAB:if(b.preventDefault(),null===a.model.highlightedListItem&&b.which===I.ENTER)a.search();else{var d=c.find("li");angular.element(d[a.model.highlightedListItem-1]).triggerHandler("click")}}});var L=a.$on("$locationChangeSuccess",function(){o()}),M=a.$on("instant_results_loaded",function(b,c){a.model.showInstantResults=c>0&&a.model.query.q.length>0});a.$on("$destroy",function(){L(),M()})}],template:function(a,b){var c=b.hasOwnProperty("placeholder")?b.placeholder:"Search",d=b.hasOwnProperty("label")?b.label:"Search",e="";e+='<form class="tk-stl-form tk-rgrid-g tk-stl-labelled-input tk-stl-label-right tk-stl-flex-nowrap" >',e+='<div class="tk-rgrid-u-1">',e+='<div class="tk-stl-advanced-search">',e+='<div class="highlight-wrapper">',e+='<input type="text" class="input" ng-model="model.query.q" ng-change="searchInputChanged()" placeholder="'+c+'">',e+='<span class="token-count" ng-if="model.filters.length > 0" ng-click="showFilters($event)">'+"<ng-pluralize count=\"model.filters.length\" when=\"{'one': '1 Filter', 'other': '{} Filters'}\"></ng-pluralize></span>",e+='<span class="clear-search" ng-click="clearSearch()" ng-show="model.query.q.length > 0">&times;</span>';var f=b.hasOwnProperty("datepickerMinView")?"datetimepicker-config=\"{minView: '"+b.datepickerMinView+"'}\"":"";return e+="<widget:datetimepicker "+f+' data-ng-model="data.date" data-on-set-time="onTimeSet(newDate, oldDate)" class="animate-fadeInDown tk-stl-animate-fast" ng-show="model.showDatepicker"></widget:datetimepicker>',e+="</div>",e+='<div class="suggestions" ng-class="{show: model.showSuggestions}">',e+='<p class="simple-search-suggestion clickable" ng-show="model.query.q.length > 0" ng-click="search()">Search for "{{ model.query.q }}" <span class="right icon-search"></span></p>',e+='<ul ng-repeat="suggestion in model.suggestions">',e+="<legend>{{ suggestion.name }}</legend>",e+='<li ng-repeat="item in suggestion.suggestions track by $index" ng-bind-html="::item.dsp" ng-class="isSelected($index)" ng-click="selectSuggestion(item.act)"></li>',e+="</ul>",e+='<ng-transclude class="show instant-results" ng-show="model.showInstantResults"></ng-transclude>',e+='<div class="filters" ng-if="model.filters.length > 0"><ul><legend>Selected Filters <span class="clear-filters" ng-click="clearFilters()">clear filters</span></legend><li ng-repeat="filter in model.filters track by $index" ng-click="removeFilter(filter)"><div class="token"><span class="token-keyword">{{ filter.keyword || filter.field }}: </span><span class="token-value">{{ filter.val.dsp }}</span><span class="icon-cancel remove"></span></div></li></ul></div>',e+="</div>",e+="</div>",e+='</div><div class="label">',e+='<button type="button" class="tk-stl-button tk-stl-button" ng-click="search(model.query)">'+d+"</button>",e+="</div></div>"}};return a}angular.module("lightning").directive("searchTypeahead",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},replace:!0,controller:["$scope","$twigkit","$lightningLog","$timeout",function(a,b,c){a.contextPath=b.getContextPath("/"),a.showUser=!0,b.getUser().then(function(b){a.user=b},function(){a.showUser=!1,c.error("SecurityUserActions","Unable to get the user from the API, please check this web service is enabled.")}),a.showList=function(){a.show="show"==a.show?!1:"show"},a.closeList=function(){a.show=!1}}],template:function(){var a='<ul class="clearfix tk-stl-sortoptions" ng-show="showUser">';return a+="<li ng-show=\"::user.name != 'anonymous'\">",a+='<a href="javascript:void(0);" class="sortoptions-show" ng-click="showList()">',a+='<span><span><widget:icon icon="user"></widget:icon> {{::user.name}}</span><span class="caret"></span></span>',a+="</a>",a+='<div class="tk-stl-sortoptions-group {{ show }}">',a+='<ul click-outside="closeList()" outside-if-not="sortoptions-show">',a+="<li>",a+='<a ng-href="{{::contextPath}}">Home</a>',a+="</li>",a+="<li>",a+='<a ng-href="{{::contextPath}}logout/">Logout</a>',a+="</li>",a+="</ul>",a+="</div>",a+="</li>",a+="<li ng-show=\"::user.name == 'anonymous'\">",a+='<a ng-href="{{::contextPath}}login/">Login</a>',a+="</li>",a+="</ul>"}};return a}angular.module("lightning").directive("securityUserActions",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{target:"=",platform:"=",collection:"=?",topic:"=?"},controller:["$scope","$twigkit","$rootScope","$log",function(a,b,c,d){function e(){a.comment={text:null,target:a.target,collection:a.collection,topic:a.topic}}e(),a.submitComment=function(){b.postComment(a.platform,a.comment).then(function(){c.$broadcast("commentAdded_"+a.target),a.form.$setPristine(),e()},function(a){d.error(a)})}}],template:function(){var a='<form name="form" role="form" ng-submit="form.$valid && submitComment()" novalidate="" class="tk-stl-comment-form">';return a+='<div class="tk-stl-group"><textarea name="text" ng-model="comment.text" placeholder="Leave a new note..." required=""></textarea>',a+='<span ng-show="form.text.$dirty && form.text.$error.required">Please enter a comment</span></div>',a+='<div class="tk-stl-group"><button type="submit" class="tk-stl-button tk-stl-button-small" ng-disabled="!form.$valid">Post</button></div>',a+="</form>"}};return a}angular.module("lightning").directive("socialCommentForm",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{target:"=",platform:"="},controller:["$scope","$twigkit","$window","$attrs","$log",function(a,b,c,d,e){function f(){b.getComments(a.platform,a.target).then(function(b){a.comments=b.data},function(a){e.error(a)})}var g=this;a.comments=[],a.deleteLabel=null==d.deleteLabel?"Delete":d.deleteLabel,a.show=parseInt(d.show)?parseInt(d.show):2,a.limitTo=a.show,a.showMore=parseInt(d.showMore)?parseInt(d.showMore):4,a.showMoreLabel=null==d.showMoreLabel?"Show more comments":d.showMoreLabel,a.showLessLabel=null==d.showLessLabel?"Show fewer":d.showLessLabel,a.defaultDeleteMessage=d.defaultDeleteMessage||"Are you sure you want to remove this comment?",a.emptyText=null==d.emptyText?"":d.emptyText,a.showAvatars="false"==d.avatars?"tk-stl-hide-avatars":"",f(),g.getComments=f,a.deleteComment=function(d){var g=c.confirm(a.defaultDeleteMessage);g&&b.deleteComment(a.platform,d).then(function(){f()},function(a){e.error(a)})},a.showMoreComments=function(){a.limitTo+a.showMore>a.comments.length?a.limitTo=a.comments.length:a.limitTo+=a.showMore},a.showLessComments=function(){a.limitTo-a.showMore<a.show?a.limitTo=a.show:a.limitTo=a.limitTo-a.showMore},a.$on("commentAdded_"+a.target,function(){f()})}],template:function(a,b){var c='<ol class="tk-stl-comment-list" ng-class="::showAvatars">';return c+='<li ng-repeat="comment in comments | limitTo:limitTo" class="tk-stl-comment">',c+='<a class="avatar"></a>',c+='<div class="content">',c+='<a class="author">{{::comment.creator.full_name}} ',b.format=b.format||"relative",c+='<div class="metadata"><span class="date" ng-if="::comment.created">{{::comment.created | dateFormat:\''+b.format+"'}}</span></div>",c+="</a>",c+='<p class="message">{{::comment.text}}</p>',c+='<div class="actions"><a class="del" href="javascript:void(0);" ng-click="deleteComment(comment.id)">{{::deleteLabel}}</a></div>',c+="</div>",c+="</li>",c+='<li class="empty-message" ng-show="comments.length == 0">{{::emptyText}}</li>',c+='<li class="more-less-links" style="" ng-show="comments.length != 0 && comments.length > show">',c+='<a class="less-link" href="javascript:void(0);" ng-if="limitTo > show" ng-click="showLessComments()">{{::showLessLabel}} </a>',c+='<a class="more-link" href="javascript:void(0);" ng-if="limitTo < comments.length" ng-click="showMoreComments()">{{::showMoreLabel}}</a>',c+="</li>",c+="</ol>"}};return a}angular.module("lightning").directive("socialCommentList",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){var i={restrict:"E",transclude:!0,scope:{infiniteScrolling:"@"},replace:!0,require:"^^tableResultList",link:function(i,j,k,l,m){function n(){z.unbind("scroll",o),null!=w&&w.remove(),null!=x&&x.remove()}function o(){if(!i.loading&&!i.disabled){null!=x&&x.remove();var a=z[0].innerHeight,b=j[0].offsetTop+j[0].offsetHeight,c=a+(z[0].scrollY||z[0].pageYOffset),d=b-c,e=0>=d-400;if(e){i.loading=!0;var f=angular.element(j.find("tr")[0]).children().length;w=angular.element('<tfoot><tr><td colspan="'+f+'"><div class="tk-stl-circle-loader tk-stl-xs"></div></td></tr></tfoot>'),j.after(w),p()}}}function p(){i.platform=d.getPlatform(k.platform);var g=h.getQueryAsHttpParams(k.query),l=b.getParams(u,g);return void 0!=l.searchParams.p&&l.searchParams.p>v?(l.searchParams.p=l.searchParams.p+1,v=l.searchParams.p):(v+=1,l.searchParams.p=v),l.searchParams.p>i.lastPage?void i.$evalAsync(function(){w.remove(),i.loading=!1,i.disabled=!0;var a=angular.element(j.find("tr")[0]).children().length;x=angular.element('<tfoot><tr><td colspan="'+a+'" class="tk-stl-text-center"><p><strong>All results loaded</strong></p></td></tr></tfoot>'),j.after(x)}):void c.search(l.query,i.platform,l.searchParams).then(function(b){
u=!0;for(var c=0;c<b.data.results.length;c++){if(t){var d=i.$new(!0);d.result=b.data.results[c].result;var g=a.render(m,j,d);y.push({elem:g,scope:d})}i.response.results.push(b.data.results[c])}i.lastPage=b.data.hits.act[1]/b.data.query.rpp,b.data.hits.act[1]%b.data.query.rpp>0&&(i.lastPage+=1),i.lastPage=Math.floor(i.lastPage),f.$broadcast("update_last_result",{newResults:b.data.results.length,newTotal:b.data.hits.act[1]}),i.loading=!1,w.remove(),e(function(){q()},0)},function(){u=!0,i.loading=!1,w.remove()})}function q(){if("true"==i.infiniteScrolling&&null!=i.query){var a=document.body.scrollHeight>window.outerHeight,b=document.body.currentStyle||window.getComputedStyle(document.body,"");a="visible"==b.overflow||"visible"==b.overflowY||a&&"auto"==b.overflow||a&&"auto"==b.overflowY,a||p()}}function r(){if(v=1,i.disabled=!1,0!=i.response.hits.act[1]&&(i.lastPage=i.response.hits.act[1]/i.response.query.rpp,i.response.hits.act[1]%i.response.query.rpp>0&&(i.lastPage+=1),i.lastPage=Math.floor(i.lastPage)),a.remove(y,function(){y=[]}),t){j.empty();var b;for(b=0;b<i.response.results.length;b++){var c=i.$new(!0);c.result=i.response.results[b].result;var d=a.render(m,j,c);y.push({elem:d,scope:c})}}}var s,t,u,v,w,x,y=[],z=angular.element(g);if(null!=l){if(s=l.getResponseName(),t=a.hasChildren(m),null!=s)i.response=b.getResponse(s),i.$on(s+"_updated",function(a,b){i.response=b,null!=i.response&&r()});else{var A=l.getResults();null!=A&&(i.response=b.createResponseFromResults(A)),i.$on("table_results_updated",function(){var a=l.getResults();null!=a?i.response=b.createResponseFromResults(a):i.response=b.createResponseFromResults([]),null!=i.response&&r()})}null!=i.response&&r()}"true"==i.infiniteScrolling&&null!=k.query&&(z.bind("scroll",o),i.$on("$destroy",function(){n()}))},template:function(){return"<tbody></tbody>"}};return i}angular.module("lightning").directive("tableBody",a),a.$inject=["$util","ResponseService","$twigkit","PlatformService","$timeout","$rootScope","$window","QueryService"]}(),function(){"use strict";function a(a,b,c){var d={restrict:"E",scope:{url:"@",target:"@",defaultValue:"@"},transclude:!0,replace:!0,link:function(d,e,f){function g(a){var b=e[0].cellIndex;if(null!=a[0].parentElement&&(a=angular.element(a[0].parentElement),null!=a)){var c=a.find("thead");if(1!=c.length)g(a);else{var f=angular.element(c[0]).children()[0],h=angular.element(angular.element(angular.element(f).children([0])));d.dataTitle=angular.element(h)[b].innerText}}}d.$watch("$parent.result",function(b){if(b){if(d.result=b,null!=f.name){if(d.displayValues=[void 0],null!=d.result.fields[f.name]&&null!=d.result.fields[f.name].val&&d.result.fields[f.name].val.length>0&&(d.displayValues=d.result.fields[f.name].val),1==d.displayValues.length&&null!=f.separator){var c;c=null==d.displayValues[0].dsp?d.displayValues[0].split(f.separator):d.displayValues[0].dsp.split(f.separator);var h=a("actualValue")(d.displayValues[0]);d.displayValues=[],angular.forEach(c,function(a){d.displayValues.push({act:h,dsp:a})})}var i=angular.copy(d.displayValues);d.displayValues=[],angular.forEach(i,function(b,c){if(void 0==b&&null==d.defaultValue);else if(-1!=f.show&&c>=f.show);else{var e={};e.act="string"==typeof b?b:a("actualValue")(b),e.dsp="string"==typeof b?b:a("displayValue")(b),e.ngDsp=e.dsp,null!=d.defaultValue&&(null==e.dsp||angular.isString(e.dsp)&&""==e.dsp.trim())&&(e.ngDsp=d.defaultValue),f.dateFormat?e.ngDsp=a("dateFormat")(e.dsp,f.dateFormat):f.numberFormat&&(e.ngDsp=a("numberFormat")(e.dsp,f.numberFormat)),d.displayValues[c]=e}})}else d.displayValues=[""];f.urlField&&d.result.fields[f.urlField]&&(d.urlField=d.result.fields[f.urlField],d.urlField=a("actualValue")(d.urlField.val)),g(e)}}),d.addFilter=function(b){c.addFilterToUrl(f.name,a("actualValue")(b),b.ngDsp,!0,!1)},d.changePage=function(){b.path(f.action)},d.changePageAndFilter=function(d){c.addFilterToUrl(f.name,a("actualValue")(d),d.ngDsp,!1,!1),b.path(f.action)}},template:function(a,b){var c='<td data-title="{{dataTitle}}">';return c+='<p ng-repeat="value in displayValues">',b.url?(c+='<a ng-href="{{::url}}" href="javascript:void(0);"',null!=b.target&&(c+='target="{{::target}}"'),c+=">"):b.query&&b.action?c+='<a href="javascript:void(0);" ng-click="changePageAndFilter(value)">':b.action?c+='<a href="javascript:void(0);" ng-click="changePage()">':b.query?c+='<a href="javascript:void(0);" ng-click="addFilter(value)">':b.urlField&&(c+='<a href="{{::urlField}}"',null!=b.target&&(c+='target="{{::target}}"'),c+=">"),null!=b.prefix&&(c+='<span class="prefix">'+b.prefix+"</span>"),c+="{{::value.ngDsp}}",null!=b.suffix&&(c+='<span class="prefix">'+b.suffix+"</span>"),c+='<span class="pl025em" ng-transclude></span>',(b.urlField||b.url||b.query)&&(c+="</a>"),c+="</p>",c+="</td>"}};return d}angular.module("lightning").directive("tableCell",a),a.$inject=["$filter","$location","$lightningUrl"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,template:function(){return"<thead><tr ng-transclude></tr></thead>"}};return a}angular.module("lightning").directive("tableHeader",a)}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{label:"@"},transclude:!0,replace:!0,link:function(b,c,d){function e(){var c=a.getUrlParameter("s","");b.selectedSort=c.length>1?c.slice(1,c.length):null,b.selectedSort=b.selectedSort==d.name,b.selectedOrder=c.length>1?c.slice(0,1):null}null==b.label&&(b.label=d.name),e(),b.$on("paramChange",function(a,b){"s"==b&&e()}),b.sort=function(){a.setUrlParameter("p",1);var c="+"==b.selectedOrder?"-":"+";a.setUrlParameter("s",c+""+d.name,!0)}},template:function(a,b){return"true"==b.sort&&null!=b.name?"<th ng-click=\"sort()\" class=\"sortable\" ng-class=\"{'sort-asc': selectedSort && selectedOrder == '+', 'sort-desc': selectedSort && selectedOrder == '-'}\"><ng-transclude>{{label}}</ng-transclude></th>":"<th><ng-transclude>{{label}}</ng-transclude></th>"}};return b}angular.module("lightning").directive("tableHeaderCell",a),a.$inject=["$lightningUrl"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:{results:"=?"},controller:["$scope","$attrs",function(a,b){function c(){return b.response}function d(){return a.results}var e=this;e.getResponseName=c,e.getResults=d,a.$watch("results",function(){a.$broadcast("table_results_updated")})}],template:function(){return'<div class="tbl-wrapper"><table ng-transclude></table></div>'}};return a}angular.module("lightning").directive("tableResultList",a)}(),function(){"use strict";function a(a){var b={restrict:"E",transclude:!0,replace:!0,scope:{},link:function(b,c,d,e,f){c.on("$destroy",function(){b.$destroy()}),b.result=void 0==b.result?b.$parent.result:b.result,a.render(f,c,b)},template:function(){return"<tr></tr>"}};return b}angular.module("lightning").directive("tableRow",a),a.$inject=["$util"]}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{},controller:["$scope","$localStorage","$attrs","$log",function(a,b,c,d){a.togglePane=function(a){var b=angular.element(document.querySelector("#"+c.panes)),e=b.children()[a];if(null==e)return void d.warn("Can't find pane number "+(a+1)+" for "+c.panes);e=angular.element(e);var f=e.controller("togglePane");return null==f?void d.warn("Can't find pane number "+(a+1)+" for "+c.panes):void f.togglePane()},a.isActive=function(a){var b=angular.element(document.querySelector("#"+c.panes)),e=b.children()[a];if(null==e)return void d.warn("Can't find pane number "+(a+1)+" for "+c.panes);e=angular.element(e);var f=e.controller("togglePane");if(null==f)return void d.warn("Can't find pane number "+(a+1)+" for "+c.panes);var g=f.getShow();return g?"active":""}}],template:function(a,b){var c=b.labels.split(","),d='<ul class="tk-toggle-panes-controls">';return angular.forEach(c,function(a,b){d+="<li>",d+='<a href="javascript:void(0);" ng-click="togglePane('+b+')" ng-class="isActive('+b+')">'+a.trim()+"</a>",d+="</li>"}),d+="</ul>"}};return a}angular.module("lightning").directive("toggleControls",a)}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{},transclude:!0,controller:["$scope","$element","$localStorage","$attrs","$timeout",function(a,b,c,d,e){function f(){a.show=!a.show;var b=c.togglePanes||{};if(0==a.panesModel.allowMultiple)b[a.panesModel.id]={active:1==a.show?a.panesModel.key:null},c.togglePanes=b,k.hideChildren(a.panesModel.key);else{if(1==a.show)null!=b[a.panesModel.id]&&angular.isArray(b[a.panesModel.id].active)?b[a.panesModel.id].active.push(a.panesModel.key):b[a.panesModel.id]={active:[a.panesModel.key]};else if(null!=b[a.panesModel.id]&&angular.isArray(b[a.panesModel.id].active)){var d=b[a.panesModel.id].active.indexOf(a.panesModel.key);-1!=d&&b[a.panesModel.id].active.splice(d,1)}c.togglePanes=b}e(function(){a.$broadcast("highchartsng.reflow")},0)}function g(b){a.show=b}function h(){return a.show}var i=this,j=b.parent(),k=j.controller("togglePanes");a.show=!1,a.togglePane=f,i.togglePane=f,i.setToggle=g,i.getShow=h,a.setDefault=function(){a.panesModel=k.getPanesModel(angular.element(b));var e=c.togglePanes;if(e&&e[a.panesModel.id]){var f=e[a.panesModel.id];angular.isArray(f.active)?a.show=-1!=f.active.indexOf(a.panesModel.key):f.active==a.panesModel.key?a.show=!0:a.show=!1}else"true"==d.visible&&(a.show=!0)},a.setDefault()}],link:{post:function(b,c,d){var e=c.parent();d.hasDirectParent=e.controller("togglePanes"),d.hasDirectParent||a.warn(c.html()+" is not directly in a <toggle:panes>")}},template:function(){return'<div class="tk-toggle-pane" ng-transclude ng-class="{active: show}"></div>'}};return b}angular.module("lightning").directive("togglePane",a),a.$inject=["$log"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,controller:["$element","$attrs",function(a,b){function c(a){return{key:d(a),id:b.id,allowMultiple:b.allowMultiple}}function d(b){var c;return angular.forEach(a.children(),function(a,d){a.isEqualNode(b[0])&&(c=d)}),c}function e(b){angular.forEach(a.children(),function(a,c){if(b!=c){var d=angular.element(a),e=d.controller("togglePane");null!=e&&e.setToggle(!1)}})}b.allowMultiple="true"==b.allowMultiple;var f=this;f.getPanesModel=c,f.getElementNumber=d,f.hideChildren=e}],link:{pre:function(a,b,c,d,e){e(a,function(a){b.addClass("tk-toggle-panes"),b.append(a)})}}};return a}angular.module("lightning").directive("togglePanes",a)}(),function(){"use strict";function a(a,b,c,d,e){var f={restrict:"E",transclude:!0,replace:!0,link:function(f,g,h){function i(a){var b;a.srcElement?b=a.srcElement:a.target&&(b=a.target),j(b,a)}function j(a,b){null!=a&&"A"==a.nodeName?k(a,b):null!=a.parentElement&&j(a.parentElement,b)}function k(g){var i={url:g.href,label:g.innerText};if(null!=h.query&&(i.query=a.getQueryAsHttpParams(h.query)),l(g),null!=o&&(i.type=o),null!=m){var j=c.getUrlParameter("p","1");null!=i.query&&null!=i.query.p&&(j=i.query.p),i.pos=m,"1"==j?i.offset=0:null!=i.query&&null!=i.query.rpp&&(i.offset=(j-1)*i.query.rpp)}null!=f.platform&&(i.platform=f.platform.id);for(var k in h)h.hasOwnProperty(k)&&!angular.isObject(h[k])&&null!=h[k]&&k.charAt(0).match(/[a-z]/i)&&"ng"!=k.substring(0,2)&&-1==n.indexOf(k)&&(i[k]=h[k]);var p=d.getContextPath("/"),q=p+"twigkit/api/activity/clicks";b.post(q,i).then(function(){},function(a){e.error("TrackClicks","Error posting click data to server - "+a.status+" - "+a.statusText)})}function l(a){if(a.classList.contains("result")&&"LI"==a.nodeName){var b=a.parentElement.children;o=h.type||"result",m=Array.prototype.indexOf.call(b,a)-1}else null!=a.parentElement?l(a.parentElement):m=null}var m,n=["url","label","type","query","offset","pos"],o=h.type||"link";g.bind("click",function(a){i(a)}),g.on("$destroy",function(){g.unbind("click",i)})},template:function(){return"<div ng-transclude></div>"}};return f}angular.module("lightning").directive("trackClicks",a),a.$inject=["QueryService","$http","$lightningUrl","$twigkit","$lightningLog"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){var j={restrict:"E",scope:{"var":"@",host:"@",pageTitle:"@",path:"@",query:"@"},link:function(j){function k(){var a=d.get("tk.session");void 0===a&&(a=l());var b=new Date,c=new Date(b.getFullYear(),b.getMonth(),b.getDay(),b.getHours(),b.getMinutes()+5);d.put("tk.session",a,{expires:c})}function l(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,l)}function m(){n=null,null!=j.query&&(n=i.getQueryAsHttpParams(j.query)),null==n&&(n=angular.copy(a.search()));var d=f.getContextPath("/"),k=(j.host?j.host:d)+"twigkit/api/activity/queries",l={path:null!=j.path?j.path:a.path(),pageTitle:null!=j.pageTitle?j.pageTitle:g.document.title,query:n};c.post(k,l).then(function(a){n.id=a.data.id,e.setQuery(j["var"],n),b.$$childTail[j["var"]]=n},function(){h.error("TrackQuery","Unable to get id for query.")})}var n;null==j["var"]&&(j["var"]="queryToken"),m(),j.$on("reloadSearch",function(){k(),m()})}};return j}angular.module("lightning").directive("trackQuery",a),a.$inject=["$location","$rootScope","$http","$cookies","QueryIdService","$twigkit","$window","$lightningLog","QueryService"]}(),function(){"use strict";function a(){var a={restrict:"A",scope:!1,controller:["$rootScope",function(a){this.triggerEvent=function(b){a.$broadcast(b)}}],link:function(a,b,c,d){b.bind("click",function(a){a.preventDefault(),setTimeout(function(){d.triggerEvent(c.triggerEvent)},c.triggerDelay||0)})}};return a}angular.module("lightning").directive("triggerEvent",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{percentage:"="},template:function(){return'<div class="tk-stl-progress-bar"><div class="tk-stl-progress-bar-fill" style="width: {{ percentage }}%"></div></div>'}};return a}angular.module("lightning").directive("progressBar",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{percentage:"="},template:function(a,b){for(var c=b.fillClass||"",d=b.percentageClass||"",e='<div class="tk-stl-radial-progress" data-progress="{{ percentage }}"><div class="circle"><div class="mask full"><div class="fill '+c+'"></div></div><div class="mask half"><div class="fill '+c+'"></div><div class="fill fix '+c+'"></div></div><div class="shadow"></div></div><div class="inset"><div class="percentage '+d+'"><div class="numbers"><span>-</span>',f=0;100>=f;f++)e+="<span>"+f+"%</span>";return e+="</div></div></div>"}};return a}angular.module("lightning").directive("progressRadial",a)}(),function(){"use strict";function a(){var a={};a.instances={},a.add=function(b,d,e,f){if(d=d||!1,!d)return"Error: no carousel name specified";b=b||0;var g=a.instances[d]||!1;if(g)return"Error: carousel instance already exists";var h=new c(b,e,f);return a.instances[d]=h,h},a.get=function(b){var c=a.instances[b]||!1;return c?c:"Error: carousel with name '"+b+"' does not exist"},a.remove=function(b){delete a.instances[b]},a.getRandomName=function(){for(var c=b();a.instances[c];)c=b();return c};var b=function(){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";return new Array(16).join().split(",").map(function(){return a.charAt(Math.floor(Math.random()*a.length))}).join("")},c=function(a,b,c){c=c||{},"undefined"==typeof c.looping&&(c.looping=!0);var d=this;this.slidesCount=a,this.currentSlide=0,this.onSlideChangeCallbacks=[],this.toIndex=function(a,c){c=c||!1,this.currentSlide=a%this.slidesCount,angular.forEach(this.onSlideChangeCallbacks,function(a){"function"==typeof a&&a(d.currentSlide,c)}),setTimeout(function(){b.$apply()},0)},this.next=function(){var a=this.currentSlide+1,b=!1;return a>this.slidesCount-1&&(c.looping?(a=0,b="right"):a=this.slidesCount-1),this.toIndex(a,b),a},this.previous=function(){var a=this.currentSlide-1,b=!1;return 0>a&&(c.looping?(a=this.slidesCount-1,b="left"):a=0),this.toIndex(a,b),a},this.onSlideChange=function(a){return this.onSlideChangeCallbacks.push(a),this.onSlideChangeCallbacks.indexOf(a)},this.unbindOnSlideChangeCallback=function(a){"undefined"!=typeof this.onSlideChangeCallbacks[a]&&this.onSlideChangeCallbacks.splice(a,1)}};return a}function b(a,b,c,d){function e(){return"ontouchstart"in document.documentElement}var f=25;return{restrict:"AE",replace:!0,scope:{carouselWatch:"="},link:function(g,h,i){function j(){w=angular.element(u[0].outerHTML),x=angular.element(u[u.length-1].outerHTML)}function k(){w=angular.element('<slide class="empty"></slide>'),x=angular.element('<slide class="empty"></slide>')}function l(){if(u){for(var a='<div class="pagination">',c=0;c<u.length;c++)a+='<span class="dot" ng-class="{active: currentSlide == '+c+'}" ng-click="toIndex('+c+')"></span>';a+="</div>";var d=b(a),e=d(g);h.append(e)}}var m,n=!1,o=!1,p=!1,q=!1;n="undefined"!=typeof i.autoPlay&&parseInt(i.autoPlay,10)>0?parseInt(i.autoPlay,10):!1,p=i.hasOwnProperty("randomStart"),q="false"===i.loop?!1:!0;var r="false"===i.controls?!1:!0,s=i.hasOwnProperty("height")?i.height:!1,t=i.hasOwnProperty("pagination");g.currentSlide=0;var u,v,w,x,y,z,A;y=h.find("slidecontainer");var B=function(){h.addClass("tk-stl-carousel"),h.addClass(e()?"carousel-touch":"carousel-no-touch");var b=!1,c=!1;A&&(b=a.get(A).currentSlide,c=a.get(A).onSlideChangeCallbacks,a.remove(A));var d=function(){var a=angular.element(h[0].querySelectorAll(".carousel-slide-copy"));a.length>0&&a.remove()};if(d(),u=h.find("slide"),u.length>0){A=i.carouselName||a.getRandomName(),v=a.add(u.length,A,g,{looping:q}),angular.forEach(c,function(a){v.onSlideChange(a),v.unbindOnSlideChangeCallback(0)});var f=function(){d(),u=h.find("slide"),q?j():k(),w.addClass("carousel-slide-copy"),x.addClass("carousel-slide-copy"),y.append(w),y.prepend(x),y.addClass("carousel-ignore-first-slide")};f();var o=function(a,b){var c=a+1;"left"===b?c=0:"right"===b&&(c=u.length+1),s||(y.css("height","auto"),h.css("height",u[a].offsetHeight)),D(c,!0,function(){"left"===b?D(u.length,!1):"right"===b&&D(1,!1)}),C(),f()};if(v.onSlideChange(o),b!==!1&&v.currentSlide!==b&&(o(v.currentSlide,!1),v.toIndex(b)),p&&(m=Math.floor(Math.random()*v.slidesCount),v.toIndex(m),g.currentSlide=m),n&&v.slidesCount>=2&&C(),s)h.css("height",s);else{var r=angular.element(u[m||0]),B=r.find("img");B.length>0&&B.bind("load",function(){y.css("height","auto"),h.css("height",u[m||0].offsetHeight)}),y.css("height","auto"),h.css("height",u[m||0].offsetHeight)}t&&l()}y[0]&&(z=new Hammer.Manager(y[0]),z.add(new Hammer.Pan({direction:Hammer.DIRECTION_HORIZONTAL,threshold:0})),z.on("panleft panright",function(a){a.isFinal||G(a.deltaX)}))},C=function(){!n||v.slidesCount<2||(o&&d.cancel(o),o=d(function(){v.next()},n))},D=function(a,b,c){b?y.addClass("carousel-animate"):y.removeClass("carousel-animate");var d="translate(-"+100*a+"%, 0)";y.css({"-webkit-transform":d,"-moz-transform":d,"-ms-transform":d,"-o-transform":d,transform:d}),b&&y.on("transitionend oTransitionEnd webkitTransitionEnd",function(){"function"==typeof c&&c(),y.off("transitionend oTransitionEnd webkitTransitionEnd"),D(v.currentSlide+1,!1)})},E=0,F=0,G=function(a){E=a/F,E=E>1?1:-1>E?-1:E,D(v.currentSlide+1-E,!1)},H=function(){F=y[0].offsetWidth},I=function(){Math.abs(E)>f/100?(E>0?v.previous():v.next(),E=0):(E>0||0>E)&&D(v.currentSlide+1,!0,function(){E=0})},J=e()?"touchstart":"mousedown",K=e()?"touchend":"mouseup";if(c.on(J,H),c.on(K,I),h.on("mouseover",function(){o&&d.cancel(o)}),h.on("mouseout",C),g.prev=function(){v.previous(),g.currentSlide=v.currentSlide},g.next=function(){v.next(),g.currentSlide=v.currentSlide},g.toIndex=function(a){v.toIndex(a),g.currentSlide=v.currentSlide},r&&y.length>0){var L='<div class="carousel-arrow carousel-arrow-left" ng-click="prev()"><span class="icon-angle-left"></span></div>';L+='<div class="div carousel-arrow carousel-arrow-right" ng-click="next()"><span class="icon-angle-right"></span></div>';var M=b(L),N=M(g);h.append(N)}var O=d(B,0);"undefined"!=typeof i.carouselWatch&&g.$watch("carouselWatch",function(){d(B)},!0),g.$on("$destroy",function(){d.cancel(O),h.off("mouseover mouseout"),c.off(J),c.off(K),y.off("transitionend oTransitionEnd webkitTransitionEnd"),v&&(v.onSlideChangeCallbacks=[]),a.remove(A)})}}}angular.module("lightning").factory("Carousel",a).directive("widgetCarousel",["Carousel","$compile","$document","$timeout",b])}(),function(){"use strict";function a(a,b){var c={restrict:"E",replace:!0,scope:{onSet:"&"},link:function(c,d,e){function f(){var d=h,f=i;if(e.onSet)c.onSet({fromDate:d,toDate:f});else if(d&&f&&k){var g=b("dateFormat")(d,"yyyy-MM-ddTHH:mm:ss"),j=b("dateFormat")(f,"yyyy-MM-ddTHH:mm:ss");a.removeFiltersFromUrl(k),a.addRangeFilterToUrl(k,g,j,c.displayFrom,c.displayTo,!0)}}function g(){if(k){var d=a.getFiltersFromUrl(k);if(d.length>0)for(var e=0;e<d.length;e++){var f=a.stringToFilter(d[e]);f&&"range"==f.val.act.type&&(h=new Date(f.val.act.from),i=new Date(f.val.act.to),c.fromDate=h,c.displayFrom=b("dateFormat")(f.val.act.from,j),c.displayTo=b("dateFormat")(f.val.act.to,j))}}}var h,i,j=e.dateFormat||"medium",k=e.field;c.displayFrom=null,c.displayTo=null,c.fromTimeSet=function(a){h=a,c.displayFrom=b("dateFormat")(a,j),f(),c.showFromPicker=!1},c.toTimeSet=function(a){i=a,c.displayTo=b("dateFormat")(a,j),f(),c.showToPicker=!1},c.toggleFromPicker=function(){c.showToPicker=!1,c.showFromPicker=!c.showFromPicker},c.toggleToPicker=function(){c.showFromPicker=!1,c.showToPicker=!c.showToPicker},c.endDateBeforeRender=function(a,b){if(h){var c=moment(h).subtract(1,a).add(1,"minute");b.filter(function(a){return a.localDateValue()<=c.valueOf()}).forEach(function(a){a.selectable=!1})}},g(),c.$on("reloadSearch",g)},template:function(a,b){var c=b.fromPlaceholder||"From Date",d=b.toPlaceholder||"To Date",e=b.fromLabel||"From",f=b.toLabel||"To",g=b.hasOwnProperty("minView")&&b.minView?"datetimepicker-config=\"{minView: '"+b.minView+"'}\"":"",h='<div class="tk-widget-date-range"><div class="tk-from-date"><label>'+e+'</label><input type="text" ng-click="toggleFromPicker()" ng-model="displayFrom" placeholder="'+c+'"><widget:datetimepicker ng-model="fromDate" on-set-time="fromTimeSet(newDate)" ng-show="showFromPicker" '+g+'></widget:datetimepicker></div><div class="tk-to-date"><label>'+f+'</label><input type="text" ng-click="toggleToPicker()" ng-model="displayTo" placeholder="'+d+'"><widget:datetimepicker ng-model="toDate" on-set-time="toTimeSet(newDate)" ng-show="showToPicker" before-render="endDateBeforeRender($view, $dates, $leftDate, $upDate, $rightDate)" '+g+"></widget:datetimepicker></div></div>";return h}};return c}angular.module("lightning").directive("widgetDateRange",["$lightningUrl","$filter",a])}(),function(){"use strict";function a(a,b){function c(c,e,f){function g(a,b,d){if(d&&(d.stopPropagation(),d.preventDefault()),a&&b.utcDateValue>-(1/0)&&b.selectable&&v[a]){var e=v[a](b.utcDateValue),f=[];if(e.weeks)for(var g=0;g<e.weeks.length;g+=1)for(var h=e.weeks[g],i=0;i<h.dates.length;i+=1){var j=h.dates[i];f.push(j)}c.beforeRender({$view:e.currentView,$dates:e.dates||f,$leftDate:e.leftDate,$upDate:e.previousViewDate,$rightDate:e.rightDate}),c.data=e}}function h(a){for(var b=moment.utc(a).startOf("year"),c=10*parseInt(b.year()/10,10),e=moment.utc(o(a)).subtract(1,"year").startOf("year"),f=p(t.$modelValue,"YYYY"),g={currentView:"year",nextView:"year"===u.minView?"setTime":"month",previousViewDate:new d({utcDateValue:null,display:c+"-"+(c+9)}),leftDate:new d({utcDateValue:moment.utc(e).subtract(9,"year").valueOf()}),rightDate:new d({utcDateValue:moment.utc(e).add(11,"year").valueOf()}),dates:[]},h=0;12>h;h+=1){var i=moment.utc(e).add(h,"years"),j={utcDateValue:i.valueOf(),display:i.format("YYYY"),past:i.year()<c,future:i.year()>c+9,active:i.format("YYYY")===f};g.dates.push(new d(j))}return g}function i(a){for(var b=moment.utc(a).startOf("year"),c=o(a),e=p(t.$modelValue,"YYYY-MMM"),f={previousView:"year",currentView:"month",nextView:"month"===u.minView?"setTime":"day",previousViewDate:new d({utcDateValue:c.valueOf(),display:b.format("YYYY")}),leftDate:new d({utcDateValue:moment.utc(b).subtract(1,"year").valueOf()}),rightDate:new d({utcDateValue:moment.utc(b).add(1,"year").valueOf()}),dates:[]},g=0;12>g;g+=1){var h=moment.utc(b).add(g,"months"),i={utcDateValue:h.valueOf(),display:h.format("MMM"),active:h.format("YYYY-MMM")===e};f.dates.push(new d(i))}return f}function j(a){for(var b=moment.utc(a),c=moment.utc(b).startOf("month"),e=moment.utc(b).startOf("year"),f=moment.utc(b).endOf("month"),g=moment.utc(c).subtract(Math.abs(c.weekday()),"days"),h=p(t.$modelValue,"YYYY-MMM-DD"),i={previousView:"month",currentView:"day",nextView:"day"===u.minView?"setTime":"hour",previousViewDate:new d({utcDateValue:e.valueOf(),display:c.format("YYYY-MMM")}),leftDate:new d({utcDateValue:moment.utc(c).subtract(1,"months").valueOf()}),rightDate:new d({utcDateValue:moment.utc(c).add(1,"months").valueOf()}),dayNames:[],weeks:[]},j=0;7>j;j+=1)i.dayNames.push(moment.utc().weekday(j).format("dd"));for(var k=0;6>k;k+=1){for(var l={dates:[]},m=0;7>m;m+=1){var n=moment.utc(g).add(7*k+m,"days"),o={utcDateValue:n.valueOf(),display:n.format("D"),active:n.format("YYYY-MMM-DD")===h,past:n.isBefore(c),future:n.isAfter(f)};l.dates.push(new d(o))}i.weeks.push(l)}return i}function k(a){for(var b=moment.utc(a).startOf("day"),c=moment.utc(b).startOf("month"),e=p(t.$modelValue,"YYYY-MM-DD H"),f={previousView:"day",currentView:"hour",nextView:"hour"===u.minView?"setTime":"minute",previousViewDate:new d({utcDateValue:c.valueOf(),display:b.format("ll")}),leftDate:new d({utcDateValue:moment.utc(b).subtract(1,"days").valueOf()}),rightDate:new d({utcDateValue:moment.utc(b).add(1,"days").valueOf()}),dates:[]},g=0;24>g;g+=1){var h=moment.utc(b).add(g,"hours"),i={utcDateValue:h.valueOf(),display:h.format("LT"),active:h.format("YYYY-MM-DD H")===e};f.dates.push(new d(i))}return f}function l(a){for(var b=moment.utc(a).startOf("hour"),c=moment.utc(b).startOf("day"),e=p(t.$modelValue,"YYYY-MM-DD H:mm"),f={previousView:"hour",currentView:"minute",nextView:"setTime",previousViewDate:new d({utcDateValue:c.valueOf(),display:b.format("lll")}),leftDate:new d({utcDateValue:moment.utc(b).subtract(1,"hours").valueOf()}),rightDate:new d({utcDateValue:moment.utc(b).add(1,"hours").valueOf()}),dates:[]},g=60/u.minuteStep,h=0;g>h;h+=1){var i=moment.utc(b).add(h*u.minuteStep,"minute"),j={utcDateValue:i.valueOf(),display:i.format("LT"),active:i.format("YYYY-MM-DD H:mm")===e};f.dates.push(new d(j))}return f}function m(a){var b=new Date(a),d=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds());switch(u.modelType){case"Date":break;case"moment":d=moment(d);break;case"milliseconds":d=a;break;default:d=moment(d).format(u.modelType)}var e=t.$modelValue;return t.$setViewValue(d),u.dropdownSelector&&jQuery(u.dropdownSelector).dropdown("toggle"),c.onSetTime({newDate:d,oldDate:e}),v[u.startView](a)}function n(){c.changeView(u.startView,new d({utcDateValue:r(t.$viewValue)}))}function o(a){var b=10*parseInt(moment.utc(a).year()/10,10);return moment.utc(a).year(b).startOf("year")}function p(a,b){return a?q(a).format(b):""}function q(a){return moment(a,angular.isString(a)?u.parseFormat:void 0)}function r(a){var b=new Date;if(a){var c=q(a);if(!c.isValid())throw"Invalid date: "+a;b=c.toDate()}return b.getTime()-6e4*b.getTimezoneOffset()}function s(){var d={};f.datetimepickerConfig&&(d=c.$parent.$eval(f.datetimepickerConfig));var e=angular.extend({},a,d);return b.validate(e),e}var t=e.controller("ngModel"),u=s();c.screenReader=u.screenReader,c.changeView=g,t.$render=n,u.configureOn&&c.$on(u.configureOn,function(){u=s(),c.screenReader=u.screenReader,t.$render()}),u.renderOn&&c.$on(u.renderOn,t.$render);var v={year:h,month:i,day:j,hour:k,minute:l,setTime:m}}function d(){var a=new Date,b=6e4*a.getTimezoneOffset();this.utcDateValue=a.getTime(),this.selectable=!0,this.localDateValue=function(){return this.utcDateValue+b};var c=["utcDateValue","localDateValue","display","active","selectable","past","future"];for(var d in arguments[0])c.indexOf(d)>=0&&(this[d]=arguments[0][d])}var e={bindToController:!1,controller:c,controllerAs:"dateTimePickerController",replace:!0,require:"ngModel",restrict:"E",scope:{beforeRender:"&",onSetTime:"&"},template:function(){var a="";return a+='<div class="tk-stl-datetimepicker table-responsive">',a+='<table class="table table-condensed  {{ data.currentView }}-view">',a+="<thead>",a+="<tr>",a+='<th class="left"',a+='data-ng-click="changeView(data.currentView, data.leftDate, $event)"',a+='data-ng-show="data.leftDate.selectable"><i class="icon-left-dir"></i>',a+="</th>",a+='<th class="switch" colspan="5"',a+='data-ng-show="data.previousViewDate.selectable"',a+='data-ng-click="changeView(data.previousView, data.previousViewDate, $event)">{{ data.previousViewDate.display }}</th>',a+='<th class="right" data-ng-click="changeView(data.currentView, data.rightDate, $event)"',a+='data-ng-show="data.rightDate.selectable"><i class="icon-right-dir"></i>',a+="</th>",a+="</tr>",a+="<tr>",a+='<th class="dow" data-ng-repeat="day in data.dayNames">{{ day }}</th>',a+="</tr>",a+="</thead>",a+="<tbody>",a+="<tr data-ng-if=\"data.currentView !== 'day'\">",a+='<td colspan="7">',a+='<span class="{{ data.currentView }}"',a+='data-ng-repeat="dateObject in data.dates"',a+='data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}"',a+='data-ng-click="changeView(data.nextView, dateObject, $event)">{{ dateObject.display }}</span></td>',a+="</tr>",a+='<tr data-ng-if="data.currentView === \'day\'" data-ng-repeat="week in data.weeks">',a+='<td data-ng-repeat="dateObject in week.dates"',a+='data-ng-click="changeView(data.nextView, dateObject, $event)"',a+='class="day"',a+='data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}">{{ dateObject.display }}</td>',a+="</tr>",a+="</tbody>",a+="</table>",a+="</div>"}};return c.$inject=["$scope","$element","$attrs"],e}function b(){var a={configureOn:null,dropdownSelector:null,minuteStep:5,minView:"minute",modelType:"Date",parseFormat:"YYYY-MM-DDTHH:mm:ss.SSSZZ",renderOn:null,startView:"day"},b={bg:{previous:"предишна",next:"следваща"},ca:{previous:"anterior",next:"següent"},da:{previous:"forrige",next:"næste"},de:{previous:"vorige",next:"weiter"},"en-au":{previous:"previous",next:"next"},"en-gb":{previous:"previous",next:"next"},en:{previous:"previous",next:"next"},"es-us":{previous:"atrás",next:"siguiente"},es:{previous:"atrás",next:"siguiente"},fi:{previous:"edellinen",next:"seuraava"},fr:{previous:"précédent",next:"suivant"},hu:{previous:"előző",next:"következő"},it:{previous:"precedente",next:"successivo"},ja:{previous:"前へ",next:"次へ"},ml:{previous:"മുൻപുള്ളത്",next:"അടുത്തത്"},nl:{previous:"vorige",next:"volgende"},pl:{previous:"poprzednia",next:"następna"},"pt-br":{previous:"anteriores",next:"próximos"},pt:{previous:"anterior",next:"próximo"},ro:{previous:"anterior",next:"următor"},ru:{previous:"предыдущая",next:"следующая"},sk:{previous:"predošlá",next:"ďalšia"},sv:{previous:"föregående",next:"nästa"},tr:{previous:"önceki",next:"sonraki"},uk:{previous:"назад",next:"далі"},"zh-cn":{previous:"上一页",next:"下一页"},"zh-tw":{previous:"上一頁",next:"下一頁"}},c=b[moment.locale().toLowerCase()];return angular.extend({},a,{screenReader:c})}function c(a){function b(b){var c=["configureOn","dropdownSelector","minuteStep","minView","modelType","parseFormat","renderOn","startView","screenReader"];for(var d in b)if(c.indexOf(d)<0)throw"invalid option: "+d;var e=["minute","hour","day","month","year"];if(e.indexOf(b.startView)<0)throw"invalid startView value: "+b.startView;if(e.indexOf(b.minView)<0)throw"invalid minView value: "+b.minView;if(e.indexOf(b.minView)>e.indexOf(b.startView)&&(b.startView=b.minView),!angular.isNumber(b.minuteStep))throw"minuteStep must be numeric";if(b.minuteStep<=0||b.minuteStep>=60)throw"minuteStep must be greater than zero and less than 60";if(null!==b.configureOn&&!angular.isString(b.configureOn))throw"configureOn must be a string";
if(null!==b.configureOn&&b.configureOn.length<1)throw"configureOn must not be an empty string";if(null!==b.renderOn&&!angular.isString(b.renderOn))throw"renderOn must be a string";if(null!==b.renderOn&&b.renderOn.length<1)throw"renderOn must not be an empty string";if(null!==b.modelType&&!angular.isString(b.modelType))throw"modelType must be a string";if(null!==b.modelType&&b.modelType.length<1)throw"modelType must not be an empty string";if("Date"!==b.modelType&&"moment"!==b.modelType&&"milliseconds"!==b.modelType&&(b.parseFormat=b.modelType),null!==b.dropdownSelector&&!angular.isString(b.dropdownSelector))throw"dropdownSelector must be a string";null===b.dropdownSelector||"undefined"!=typeof jQuery&&"function"==typeof jQuery().dropdown||(a.error("Please DO NOT specify the dropdownSelector option unless you are using jQuery AND Bootstrap.js. Please include jQuery AND Bootstrap.js, or write code to close the dropdown in the on-set-time callback. \n\nThe dropdownSelector configuration option is being removed because it will not function properly."),delete b.dropdownSelector)}return{validate:b}}angular.module("lightning").service("dateTimePickerConfig",b).service("dateTimePickerValidator",c).directive("widgetDatetimepicker",a),a.$inject=["dateTimePickerConfig","dateTimePickerValidator"],c.$inject=["$log"]}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{files:"=",onSubmit:"&",buttonLabel:"@"},link:function(a){function b(b){for(var d=b;d<a.columns.length;d++)c(d)}function c(b){if(b>=0)for(var c=0;c<a.columns[b].length;c++)a.columns[b][c].open=!1}function d(b){if(b>=0)for(var c=0;c<a.columns[b].length;c++)a.columns[b][c].selected=!0}function e(b){if(b>=0)for(var c=0;c<a.columns[b].length;c++)a.columns[b][c].selected=!1}function f(){for(var b=[],c=0;c<a.columns.length;c++)Array.prototype.push.apply(b,g(c));return b}function g(b){var c=[];if(b>=0)for(var d=0;d<a.columns[b].length;d++)a.columns[b][d].selected===!0&&c.push(a.columns[b][d]);return c}function h(a){return a}a.buttonLabel=a.buttonLabel?a.buttonLabel:"Submit",a.columns=h(a.files),a.loadChildren=function(c,d){if(c.children){b(d),c.open=!0;var e=a.columns.slice(0,d+1);e.push(c.children),a.columns=e}},a.selectAll=function(a,b){var c=b.target;a>=0&&(c.checked?d(a):e(a))},a.submit=function(){var b=f();"function"==typeof a.onSubmit&&a.onSubmit({selected:b})}},template:function(){return'<div><div class="tk-stl-file-hierarchy"><div class="columns"><div class="column" ng-repeat="column in columns track by $index"><ul><li><span class="control">Select All</span> <input type="checkbox" ng-click="selectAll($index, $event)"></li><li ng-class="{\'active\': item.open}" ng-repeat="item in column track by $index" ng-click="loadChildren(item, $parent.$index)"><i ng-class="{ \'icon-folder-open\': item.open, \'icon-folder\': item.children }"></i> {{ item.label }}<input type="checkbox" ng-model="item.selected" ng-click="$event.stopPropagation()"></li></ul></div></div></div><button class="tk-stl-button" ng-click="submit()" ng-if="buttonLabel != \'\'">{{ buttonLabel }}</button></div>'}};return a}angular.module("lightning").directive("widgetFileHierarchy",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,template:function(a,b){return'<i class="icon-'+b.icon+'"></i>'}};return a}angular.module("lightning").directive("widgetIcon",a)}(),function(){"use strict";function a(a){var b={restrict:"E",transclude:!0,replace:!0,link:function(b,c){function d(a,d){var f=c[0].getBoundingClientRect();f.top>=0&&f.bottom<=a&&f.left>=0&&f.right<=d&&(b.visible=!0,c.css("opacity",1),e())}c.css({opacity:0,"-webkit-transition":"opacity 0.5s ease-in",transition:"opacity 0.5s ease-in"}),b.visible=!1;var e=a.bindListener(d);c.on("$destroy",function(){e()})},template:function(){return'<div><div ng-if="visible" ng-transclude></div></div>'}};return b}angular.module("lightning").directive("widgetInView",a),a.$inject=["scrollAndResizeListener"]}(),function(){"use strict";function a(a,b,e,f){var g={restrict:"E",transclude:!0,scope:{daysLeft:"@"},link:function(g,h,i){function j(){return null==c?b({method:"GET",url:l+"twigkit/api/license"}):f.resolve({data:{expiryDate:c}})}function k(a){if(g.daysLeft){var b=g.daysLeft;return g.daysLeft.indexOf("<")>-1?(b=g.daysLeft.replace("<",""),b>a):g.daysLeft.indexOf(">")>-1?(b=g.daysLeft.replace(">",""),a>b):a==g.daysLeft}return!0}var l=a.getContextPath("/"),m=j();m.then(function(a){var b=a.data.expiryDate;c=b;var f=i.dateFormat||"dd/MM/yyyy hh:mm:ss",h=new Date;g.licenseExpired=!1,b instanceof Date||(b=new Date(b));var j=d(h,b)||0;0>j&&(g.licenseExpired=!0),g.licenseDaysRemaining=j,g.licenseExpiryDate=e("date")(b,f),g.show=k(j)})},template:function(){return'<div class="tk-stl-license-expiration" ng-if="show" ng-inject>{{ licenseExpiryDate }}</div>'}};return g}angular.module("lightning").directive("widgetLicense",["$twigkit","$http","$filter","$q",a]);var b=864e5,c=null,d=function(a,c){return Math.round((c.getTime()-a.getTime())/b)}}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,controller:["$scope","$location","$attrs","$timeout",function(a,b,c,d){var e=!1,f=!1;if(c.hasOwnProperty("accessDenied")){var g=c.accessDenied.split("=");e=g.length>0?g[0]:!1,f=g.length>1?g[1]:!1}var h=b.search();e&&(f&&h[e]==f||!f&&h.hasOwnProperty(e))&&(a.error=!0,d(function(){a.errorClass="error"},200))}],template:function(a,b){b.action=b.hasOwnProperty("action")?b.action:"/j_spring_security_check",b.method=b.method||"POST",b.username=b.username||"j_username",b.password=b.password||"j_password",b.usernamePlaceholder=b.usernamePlaceholder||"Username",b.passwordPlaceholder=b.passwordPlaceholder||"Password",b.remember=b.hasOwnProperty("remember")?b.remember:"remember",b.rememberLabel=b.hasOwnProperty("rememberLabel")?b.rememberLabel:"Remember me",b.submitLabel=b.submitLabel||"Login",b.errorMessage=b.errorMessage||"Invalid username or password";var c='<form name="loginForm" ng-class="errorClass" action="'+b.action+'" method="'+b.method+'" styling="login-form" novalidate><div styling="login-form-header">';return b.hasOwnProperty("logo")&&(c+='<div styling="login-form-logo-wrapper"><div styling="login-form-logo"><img src="'+b.logo+'" ',b.hasOwnProperty("logoAlt")&&(c+='alt="'+b.logoAlt+'" '),c+="> </div> </div>"),b.hasOwnProperty("title")&&(c+="<h4>"+b.title+"</h4>"),b.hasOwnProperty("message")&&(c+="<p>"+b.message+"</p>"),c+="</div>",c+='<div styling="login-form-body">',c+='<div class="error-message" ng-if="error">'+b.errorMessage+"</div>",c+='<input type="text" ng-model="username" name="'+b.username+'" class="username" placeholder="'+b.usernamePlaceholder+'" autofocus required>',c+='<input type="password" ng-model="password" name="'+b.password+'" placeholder="'+b.passwordPlaceholder+'" class="password" required>',"false"!=b.remember&&(c+='<label for="remember" class="tk-stl-checkbox"><input id="remember" name="'+b.remember+'" type="checkbox" ng-model="remember"> '+b.rememberLabel,c+="</label>"),c+='<button type="submit" class="tk-stl-button tk-stl-width-1" ng-click="submit()" ng-disabled="loginForm.$invalid">'+b.submitLabel+"</button>",(b.hasOwnProperty("resetLink")||b.hasOwnProperty("createLink"))&&(c+='<div class="links">',b.hasOwnProperty("resetLink")&&(c+='<a href="'+b.resetLink+'">Password Reset</a>'),b.hasOwnProperty("createLink")&&(c+='<a href="'+b.createLink+'">Create Account</a>'),c+="</div>"),c+="</div></form>"}};return a}angular.module("lightning").directive("widgetLoginForm",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,controller:["$scope","$location","$attrs",function(a,b,c){var d=!1,e=!1;if(c.hasOwnProperty("accessDenied")){var f=c.accessDenied.split("=");d=f.length>0?f[0]:!1,e=f.length>1?f[1]:!1}var g=b.search();a.animate="animated animate-fadeInUp",d&&(e&&g[d]==e||!e&&g.hasOwnProperty(d))&&(a.animate=!1)}],template:function(a,b){b.action=b.hasOwnProperty("action")?b.action:"/j_spring_security_check",b.method=b.method||"POST",b.username=b.username||"j_username",b.password=b.password||"j_password",b.usernamePlaceholder=b.usernamePlaceholder||"Username",b.passwordPlaceholder=b.passwordPlaceholder||"Password",b.remember=b.hasOwnProperty("remember")?b.remember:"remember",b.rememberLabel=b.hasOwnProperty("rememberLabel")?b.rememberLabel:"Remember me",b.submitLabel=b.submitLabel||"Login",b.errorMessage=b.errorMessage||"Invalid username or password";var c='<layout:grid styling="stretch-content hero-banner"><layout:block styling="center-content" ng-class="animate"><layout:block xs="11-12" sm="3-5" md="2-5" lg="1-3" xl="1-4"><widget:login-form ';return b.hasOwnProperty("logo")&&(c+='logo="'+b.logo+'"'),b.hasOwnProperty("logoAlt")&&(c+='logo-alt="'+b.logoAlt+'"'),b.hasOwnProperty("title")&&(c+='title="'+b.title+'"'),b.hasOwnProperty("message")&&(c+='message="'+b.message+'"'),b.hasOwnProperty("action")&&(c+='action="'+b.action+'"'),b.hasOwnProperty("method")&&(c+='method="'+b.method+'"'),b.hasOwnProperty("username")&&(c+='username="'+b.username+'"'),b.hasOwnProperty("password")&&(c+='password="'+b.password+'"'),b.hasOwnProperty("usernamePlaceholder")&&(c+='username-placeholder="'+b.usernamePlaceholder+'"'),b.hasOwnProperty("passwordPlaceholder")&&(c+='password-placeholder="'+b.passwordPlaceholder+'"'),b.hasOwnProperty("remember")&&(c+='remember="'+b.remember+'"'),b.hasOwnProperty("submitLabel")&&(c+='submit-label="'+b.submitLabel+'"'),b.hasOwnProperty("accessDenied")&&(c+='access-denied="'+b.accessDenied+'"'),b.hasOwnProperty("errorMessage")&&(c+='error-message="'+b.errorMessage+'"'),b.hasOwnProperty("resetLink")&&(c+='reset-link="'+b.resetLink+'"'),b.hasOwnProperty("createLink")&&(c+='create-link="'+b.createLink+'"'),c+="></widget:login-form> </layout:block></layout:block></layout:grid>"}};return a}angular.module("lightning").directive("widgetLoginPage",a)}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{},transclude:!0,link:function(b){b.url=a.getContextPath("/")+"logout/"},template:function(){return'<a ng-href="{{url}}"><ng-transclude>Logout</ng-transclude></a>'}};return b}angular.module("lightning").directive("widgetLogout",["$twigkit",a])}(),function(){"use strict";function a(){var a={restrict:"E",scope:{id:"@",title:"@?",url:"@?"},transclude:!0,replace:!0,controller:["$scope","$attrs","$http","$document","$rootScope","$timeout","$element","ModalService",function(a,b,c,d,e,f,g,h){function i(b){return b.defaultPrevented?b:void(27==b.which&&(b.preventDefault(),e.$apply(function(){a.closeModal()})))}a.modalClass="true"==b.show?"show":"";var j=angular.element(document.getElementsByTagName("html")[0]),k="true"==b.show;a.closeModal=function(){d.off("keydown",i),j.removeClass("no-overflow"),a.modalClass="show closing",f(function(){a.modalClass="",k=!1},200)},a.preventClosing=function(a){a.stopPropagation()};var l={name:a.id,show:function(){k||(a.modalClass="show",d.on("keydown",i),j.addClass("no-overflow"),k=!0)},close:function(){a.closeModal()},unregister:function(){a.$destroy(),g.remove()}};h.register(l)}],link:{pre:function(a,b){var c=angular.element(document).find("ui-view").eq(0);c.append(angular.element(b))},post:function(a,b,c,d,e){e(function(a){b.find("section").append(a)})}},template:function(a,b){var c='<div class="tk-stl-modal-wrapper" ng-class="modalClass" ng-click="closeModal()">';return c+='<div class="tk-stl-modal '+b.modalClasses+'" ng-click="preventClosing($event)">',b.title&&(c+='<div class="tk-stl-modal-header">{{ title }} <span class="close" ng-click="closeModal()">&times;</span></div>'),c+='<section class="tk-stl-modal-content" ng-if="modalClass == \'show\'"><ng-transclude></ng-transclude></section>',c+="</div> </div>"}};return a}angular.module("lightning").directive("widgetModal",a)}(),function(){"use strict";function a(a){var b={restrict:"A",link:function(b,c,d){""!=d.widgetOpenModal&&c.bind("click",function(){a.show(d.widgetOpenModal),"$apply"!=b.$root.$$phase&&"$digest"!=b.$root.$$phase&&b.$apply()}),b.$on("$destroy",function(){a.unregister(d.widgetOpenModal)}),c.on("$destroy",function(){a.unregister(d.widgetOpenModal)})}};return b}angular.module("lightning").directive("widgetOpenModal",a),a.$inject=["ModalService"]}(),function(){"use strict";function a(a){var b={restrict:"E",transclude:!0,replace:!0,scope:{},link:function(b,c,d){function e(b){function c(){return window.self.pageYOffset?window.self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function d(b){var c;if(c=null!=b?document.getElementById(b):document.getElementsByTagName("body")[0],null==c)return a.debug("WidgetScrollTo","Unable to scroll to element as element was not found."),null;for(var d=c.offsetTop,e=c;e.offsetParent&&e.offsetParent!=document.body;)e=e.offsetParent,d+=e.offsetTop;return d}var e,f=c(),g=d(b);if(null!=g){var h=g>f?g-f:f-g;if(100>h)return void scrollTo(0,g);var i=Math.round(h/100);i>=20&&(i=20);var j=Math.round(h/25),k=g>f?f+j:f-j,l=0;if(g>f)for(e=f;g>e;e+=j)setTimeout("window.scrollTo(0, "+k+")",l*i),k+=j,k>g&&(k=g),l++;else for(e=f;e>g;e-=j)setTimeout("window.scrollTo(0, "+k+")",l*i),k-=j,g>k&&(k=g),l++}}c.bind("click",function(){e(d.scrollToId)})},template:function(){var a='<div class="tk-stl-scroll-to">';return a+="<ng-transclude>",a+='<a href="javascript:void(0);">Back to top</a>',a+="</ng-transclude>",a+="</div>"}};return b}angular.module("lightning").directive("widgetScrollTo",a),a.$inject=["$lightningLog"]}(),function(){"use strict";function a(a){return{restrict:"AC",transclude:!0,scope:{response:"="},template:'<div class="tk-stl-widget-accordion" style="margin:0 !important; padding:0 !important" ng-transclude></div>',link:function(b,c,d){function e(){var a;a=d.hasOwnProperty("height")?d.height+"px":"auto",c.css({overflow:"auto",height:f?0:a,transitionProperty:"height",transitionDuration:d.duration,transitionTimingFunction:d.easing})}d.duration=d.duration?d.duration+"s":"0.3s",d.easing=d.easing?d.easing:"ease-in-out",d.delay=d.delay||0;var f=d.hasOwnProperty("closed")?!0:!1;d.response?b.$watch("response",function(b){b&&a(function(){e()},d.delay)}):e(),b.$on("#"+d.id+"_close",function(){f=!0}),b.$on("#"+d.id+"_open",function(){f=!1})}}}function b(a,b){return{restrict:"A",link:function(c,d,e){function f(a,b){if(b){var c=angular.element(b).attr("height");if(c)return c}a.style.border="1px solid rgba(0,0,0,0)";var d=a.clientHeight;return a.style.border=0,d}var g,h,i;e.expanded=!1,d.bind("click",function(){if(g||(g=document.querySelector(e.widgetSlideToggle),i=!0),!h&&g&&(h=g.querySelector(".tk-stl-widget-accordion")),h){e.expanded=g.clientHeight>0;var c=f(h,g);if(e.expanded)g.style.height=c+"px",b(function(){g.style.height="0px"},0),d.removeClass("tk-stl-widget-toggle-open"),a.$broadcast(e.widgetSlideToggle+"_close");else{g.style.height=c+"px";var j=angular.element(g).attr("duration"),k=j?1e3*j:300;d.addClass("tk-stl-widget-toggle-open"),a.$broadcast(e.widgetSlideToggle+"_open"),b(function(){g.style.height="auto"},k)}e.expanded=!e.expanded}})}}}angular.module("lightning").directive("widgetSlideDown",["$timeout",a]).directive("widgetSlideToggle",["$rootScope","$timeout",b])}(),function(){"use strict";function a(){var a={restrict:"E",scope:{facetName:"@",facet:"=?"},require:"^?searchFacet",transclude:!0,controller:["$scope","$timeout","$element","$filter","$lightningUrl","$attrs","ResponseService","QueryService",function(a,b,c,d,e,f,g,h){function i(){if(b(function(){a.$broadcast("rzSliderForceRender")},0),null!=a.response&&(a.facet=a.response.facets[a.facetName]||a.facet),a.id=a.facetName||f.fieldName,a.facet?(null!=a.facet.filters[0]&&null!=a.facet.filters[0].val.act&&"range"==a.facet.filters[0].val.act.type||"false"==f.sort?a.filters=a.facet.filters:a.filters=a.facet.filters.sort(n),a.show=a.filters.length>1):a.show=!0,null!=a.response&&null!=a.response.query&&a.response.query.filters.length>0){a.values=angular.copy(a.response.query.filters),a.values=d("filter")(a.values,{field:a.id},!0),a.values=d("deepFilter")(a.values,"val.act.type","range")[0];var c,e;if(null!=a.values)if(a.facet){r();var g=m(a.values.val.act.from);c=-1!=a.originalSteps.indexOf(g)?a.originalSteps.indexOf(g):-1!=a.originalSteps.indexOf(g.toString())?a.originalSteps.indexOf(g.toString()):-1!=j(a.originalSteps,g,"from")?j(a.originalSteps,g,"from"):0;var h=m(a.values.val.act.to);e=-1!=a.originalSteps.indexOf(h)?a.originalSteps.indexOf(h):-1!=a.originalSteps.indexOf(h.toString())?a.originalSteps.indexOf(h.toString()):-1!=j(a.originalSteps,g,"to")?j(a.originalSteps,h,"to"):a.originalSteps.length-1,f.invertRange?(a.slider.maxValue=c,a.slider.minValue=e):(a.slider.minValue=c,a.slider.maxValue=e),a.slider.options.ceil=parseInt(a.filters.length-1)}else c=m(a.values.val.act.from),e=m(a.values.val.act.to),f.invertRange?(a.slider.maxValue=c,a.slider.minValue=e):(a.slider.minValue=c,a.slider.maxValue=e);else o()}else o()}function j(a,b,c){for(var d=0,e=a.length;e>d;d++)if(a[d][c]===b)return d;return-1}function k(a){return f.prefix+a+f.suffix}function l(a){return isNaN(a)?a:a*f.multiplier}function m(a){return isNaN(a)?a:a/f.multiplier}function n(a,b){return parseInt(d("actualValue")(a.val))<parseInt(d("actualValue")(b.val))?-1:parseInt(d("actualValue")(a.val))>parseInt(d("actualValue")(b.val))?1:0}function o(){a.facet?q():p()}function p(){a.slider.minValue=parseInt(f.min)||0,a.slider.maxValue=parseInt(f.max)||100,a.slider.options.step=parseInt(f.step)||1}function q(){a.slider.minValue=parseInt(f.min||0),a.slider.maxValue=parseInt(a.filters.length-1),a.slider.options.ceil=a.slider.maxValue,r()}function r(){a.steps=[],a.originalSteps=[],angular.forEach(a.filters,function(b){if(a.originalSteps.push(d("actualValue")(b.val)),null!=f.dateFormat){var c=d("displayValue")(b.val);"undefined"!=typeof c.indexOf?0==c.indexOf("<")?(c=c.substring(1),c=d("dateFormat")(c.trim(),f.dateFormat),c="< "+c):0==c.indexOf(">")?(c=c.substring(1),c=d("dateFormat")(c.trim(),f.dateFormat),c="> "+c):c=d("dateFormat")(c,f.dateFormat):c=d("dateFormat")(c,f.dateFormat);var e=k(c);a.steps.push(e)}else a.steps.push(k(d("displayValue")(b.val)))}),a.slider.options.stepsArray=a.steps}f.prefix=null==f.prefix?"":f.prefix,f.suffix=null==f.suffix?"":f.suffix,f.multiplier=parseInt(f.multiplier)?parseInt(f.multiplier):1,a.buttonLabel=null==f.buttonLabel?"Apply":f.buttonLabel,a.showApply=!1,f.invertRange="true"==f.invertRange,b(function(){a.$broadcast("rzSliderForceRender")}),a.slider={minValue:1,maxValue:100,options:{floor:parseInt(f.min)||0,ceil:parseInt(f.max)||100,translate:function(a){return k(a)},rightToLeft:f.invertRange}},f.response?(a.response=g.getResponse(f.response,"facets,query"),a.$on(f.response+"_updated",function(b,c){a.response=c,i()}),null!=a.response&&i()):f.fieldName&&i(),a.$on("slideEnded",function(){a.$evalAsync(function(){a.slider.showApply=!0})}),a.applyFilter=function(){if(null!=f.query){var b=h.getQuery(f.query);null!=b&&e.setUrlParameters(b,!1)}e.removeFiltersFromUrl(a.id),a.showApply=!1;var c,d,g,i;null!=a.steps&&a.steps.length>0?(c=a.originalSteps[a.slider.minValue],d=a.originalSteps[a.slider.maxValue],i=a.steps[a.slider.minValue],g=a.steps[a.slider.maxValue],null!=c.from?c=c.from:null!=c.to&&(c=c.to),null!=d.to?d=d.to:null!=d.from&&(d=d.from),c=l(c),d=l(d),f.invertRange?e.addRangeFilterToUrl(a.id,d,c,g,i,!0,!1,f.toLabel):e.addRangeFilterToUrl(a.id,c,d,i,g,!0,!1,f.toLabel)):(c=l(a.slider.minValue),d=l(a.slider.maxValue),i=k(a.slider.minValue),g=k(a.slider.maxValue),f.invertRange?e.addRangeFilterToUrl(a.id,d,c,g,i,!0,!1,f.toLabel):e.addRangeFilterToUrl(a.id,c,d,i,g,!0,!1,f.toLabel))},a.$watch(function(){return c[0].offsetTop>0&&c[0].offsetLeft>0},function(){c[0].offsetTop>0&&c[0].offsetLeft>0&&b(function(){a.$broadcast("rzSliderForceRender")})})}],link:function(a,b,c,d){null!=d&&a.$watch("facet",function(b){b&&(a.facet.filters.length>1?d.showFacet(!0):d.showFacet(!1))})},template:function(){return'<div ng-show="id != null && show"><rzslider rz-slider-model="slider.minValue" rz-slider-high="slider.maxValue" rz-slider-options="slider.options"></rzslider><br/><button class="tk-stl-button tk-stl-button-small" ng-show="slider.showApply" ng-click="applyFilter()">{{::buttonLabel}}</button></div>'}};return a}angular.module("lightning").directive("widgetSlider",a)}(),function(){"use strict";function a(a,b,c,d,e){var f={restrict:"E",scope:{label:"@",suffix:"@",originalLabel:"@",originalSuffix:"@",correctedLabel:"@",correctedSuffix:"@"},replace:!0,link:function(f,g,h){function i(a){c.error("WidgetSpellingSuggestions",a),f.hide=!0}function j(){var a=d("property")(k.messages,"type","spelling");null==a?f.hide=!0:(f.hide=!1,f.autoCorrected=1==a["auto-corrected"],f.query.val=a.query,f.url=d("getUrlForQuery")(f.query),f.messageLabel=a.label)}if(f.hide=!0,f.spelling={},f.spelling.label=null==f.label?"Did you mean: ":f.label+" ",f.spelling.suffix=null==f.suffix?"":f.suffix,f.spelling.originalLabel=null==f.originalLabel?"No results found for ":f.originalLabel+" ",f.spelling.originalSuffix=null==f.originalSuffix?".":f.originalSuffix,f.spelling.correctedLabel=null==f.correctedLabel?" Showing results for ":" "+f.correctedLabel+" ",f.spelling.correctedSuffix=null==f.correctedSuffix?".":f.correctedSuffix,null==h.response)i("No response was found on this tag, the response is required!");else if(null==h.query)i("No query was found on this tag, the query is required!");else{var k=a.getResponse(h.response);f.query=b.getQuery(h.query),null!=k&&null!=k.messages&&j(),f.$on(h.response+"_updated",function(a,c){f.query=b.getQuery(h.query),f.hide=!0,k=c,null!=k&&null!=k.messages&&j()})}f.changeUrl=function(){f.hide=!0,e.url(e.path()+"?"+f.url)}},template:function(){var a='<div styling="alertbox" ng-show="!hide" ng-cloak>';return a+='<p ng-show="autoCorrected">',a+='<span class="original-label">{{::spelling.originalLabel}}</span>',a+='<span class="original-query"> {{query.q}}</span>',a+='<span class="original-suffix">{{::spelling.originalSuffix}}</span>',a+='<span class="corrected-label">{{::spelling.correctedLabel}}</span>',a+='<span class="corrected-query"><a href="javascript:void(0);" ng-click="changeUrl()">{{messageLabel}}</a></span>',a+='<span class="corrected-suffix">{{::spelling.correctedSuffix}}</span>',a+="</p>",a+='<p ng-show="!autoCorrected">',a+='<span class="label">{{::spelling.label}}</span>',a+='<span class="suggestion"><a  href="javascript:void(0);" ng-click="changeUrl()">{{messageLabel}}</a></span>',a+='<span class="suffix">{{::spelling.suffix}}</span>',a+="</p>",a+="</div>"}};return f}angular.module("lightning").directive("widgetSpellingSuggestions",a),a.$inject=["ResponseService","QueryService","$lightningLog","$filter","$location"]}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,template:function(){return'<div class="tk-stl-circle-loader"></div>'}};return a}angular.module("lightning").directive("widgetSpinner",a)}(),function(){"use strict";function a(a,b){var c={restrict:"E",transclude:!0,scope:!0,link:function(c,d,e){if(e.hasOwnProperty("cookie")&&""!=e.cookie.trim()){var f=a.get(e.cookie);f||(c.show=!0);var g=e.event||e.cookie+"_set";c.$on(g,function(){a.put(e.cookie,!0),b(function(){c.show=!1},0)});var h=e["delete"]||e.cookie+"_delete";c.$on(h,function(){a.remove(e.cookie),b(function(){c.show=!1},0)})}},template:'<div class="tk-stl-widget-tutorial" ng-if="show" ng-transclude></div>'};return c}angular.module("lightning").directive("widgetTutorial",["$cookies","$timeout",a])}(),function(){"use strict";function a(a){return function(b){return a("actualValue")(b)}}angular.module("lightning").filter("actual",a),a.$inject=["$filter"]}(),function(){"use strict";function a(a){return function(b){if(void 0==b)return"";if("string"==typeof b){var c=a.stringToFilter(b);if(c&&c.field&&c.val&&c.val.act)return c.val.act}return null!=b.val&&(b=b.val),angular.isArray(b)&&(b=b[0]),void 0!=b.act?angular.isArray(b.act)?"Long"==b.act[0]?b.act[1]:"Date"==b.act[0]?b.act[1]:b.act[0]:b.act:b}}angular.module("lightning").filter("actualValue",["$lightningUrl",a])}(),function(){"use strict";angular.module("lightning").filter("beautify",function(){return function(a){function b(a,b,c){return a.replace(new RegExp(b,"g"),c)}a=a||"";var c=a,d=a.lastIndexOf("/");return d>=0&&(c=a.substring(d+1)),b(c,"_"," ")}})}(),function(){"use strict";function a(a){return function(b,c){return void 0==c||null==b||""==b?b:"relative"==c?a("relativeDate")(b):a("date")(b,c)}}angular.module("lightning").filter("dateFormat",a),a.$inject=["$filter"]}(),function(){"use strict";angular.module("lightning").filter("deepFilter",function(){function a(a){return a.split(".")}function b(a,b){var c=a;return _.forEach(b,function(a){return null==c[a]?c:void(c=c[a])}),c}return function(c,d,e){var f=a(d);return _.filter(c,function(a){return b(a,f)==e})}})}(),function(){"use strict";function a(a){return function(b){return a("displayValue")(b)}}angular.module("lightning").filter("display",a),a.$inject=["$filter"]}(),function(){"use strict";function a(a){return function(b){if(void 0==b)return"";if("string"==typeof b){var c=a.stringToFilter(b);if(c&&c.field&&c.val&&c.val.dsp)return c.val.dsp}return null!=b.val&&(b=b.val),angular.isArray(b)&&(b=b[0]),void 0!=b.dsp?angular.isArray(b.dsp)?"Long"==b.dsp[0]?b.dsp[1]:b.dsp[0]:b.dsp:void 0!=b.act?angular.isArray(b.act)?"Long"==b.act[0]?b.act[1]:b.act[0]:b.act:b}}angular.module("lightning").filter("displayValue",["$lightningUrl",a])}(),function(){"use strict";angular.module("lightning").filter("encodeURIComponent",function(){return window.encodeURIComponent})}(),function(){"use strict";angular.module("lightning").filter("facet",function(){return function(a,b){return a&&b&&a.facets&&void 0!=a.facets[b]?a.facets[b]:null}})}(),function(){"use strict";angular.module("lightning").filter("field",function(){return function(a,b){return void 0==a||null==a.fields||null==a.fields[b]?null:a.fields[b]}})}(),function(){"use strict";angular.module("lightning").filter("filterCount",function(){return function(a){return a&&a.count?a.count:null}})}(),function(){"use strict";angular.module("lightning").filter("filterValue",function(){return function(a,b){if(void 0==a||"object"!=typeof a||!a.filters||a.filters.constructor!=Array)return null;for(var c=0;c<a.filters.length;c++){if(a.filters[c].val==b)return a.filters[c];if("object"==typeof a.filters[c].val&&null!=a.filters[c].val&&a.filters[c].val.act==b)return a.filters[c]}return null}})}(),function(){"use strict";angular.module("lightning").filter("formatAsCssName",function(){return function(a){if(void 0==a)return"";var b=a.replace(/^[^-_a-zA-Z]+/,"").replace(/^-(?:[-0-9]+)/,"-"),c=b&&b.replace(/[^-_a-zA-Z0-9]+/g,"-");return c.toLowerCase()}})}(),function(){"use strict";function a(a){return function(b){if(!b||"object"!=typeof b)return"";var c=a.convertQueryToHttpParams(angular.copy(b)),d="";for(var e in c)if(c[e].constructor===Array)for(var f=0;f<c[e].length;f++)d+=e+"="+c[e][f]+"&";else d+=e+"="+c[e]+"&";return d=d.slice(0,-1)}}angular.module("lightning").filter("getUrlForQuery",a),a.$inject=["QueryService"]}(),function(){"use strict";function a(a,b){return function(c,d,e){c=angular.copy(c);var f=!1;if(!c||"object"!=typeof c||!d||"string"!=typeof d)return f;if(c.hasOwnProperty("f")){var g=c.f;"string"==typeof c.f&&(g=[c.f]);for(var h=0;h<g.length;h++){var i=a.filterParse(g[h]);if(i&&i.field==d&&(f=i,e&&(f=i.value==e?i:!1),f))break}}if(c.hasOwnProperty("filters"))for(var j=0;j<c.filters.length&&(c.filters[j].field!=d||(f=c.filters[j],e&&(f=b("actualValue")(c.filters[j].val)==e?c.filters[j]:!1),!f));j++);return f}}angular.module("lightning").filter("hasFilter",["$lightningUrl","$filter",a])}(),function(){"use strict";angular.module("lightning").filter("htmlToPlainText",function(){return function(a){return a?String(a).replace(/<[^>]+>/gm,""):""}})}(),function(){"use strict";angular.module("lightning").filter("maxCharacters",function(){return function(a,b){return void 0==a?"":(a=String(a),parseInt(b)?(b=parseInt(b),b>-1&&a.length>b?a.substr(0,b)+"...":a):a)}})}(),function(){"use strict";function a(a){return function(c,d){return"rounded"==d?a("roundedNumber")(c):"plain"==d?c:"formatted"==d?a("number")(c):((null==d||""==d.trim())&&(d="#,###.###"),new b(d).format(c))}}function b(a){this.prefix="",this.suffix="",this.comma=0,this.minInt=1,this.minFrac=0,this.maxFrac=0;for(var b=0;b<a.length;b++)if("#"==a.charAt(b)||"0"==a.charAt(b)){this.prefix=a.substring(0,b),a=a.substring(b);break}this.suffix=a.replace(/[#]|[0]|[,]|[.]/g,"");var c=a.replace(/[^0#,.]/g,""),d="",e="",f=c.indexOf(".");-1!=f?(d=c.substring(0,f),e=c.substring(f+1)):d=c;var g=d.lastIndexOf(",");-1!=g&&(this.comma=d.length-1-g),d=d.replace(/[,]/g,""),e=e.replace(/[,]|[.]+/g,""),this.maxFrac=e.length;var h=d.replace(/[^0]/g,"");h.length>this.minInt&&(this.minInt=h.length),h=e.replace(/[^0]/g,""),this.minFrac=h.length}angular.module("lightning").filter("numberFormat",a),a.$inject=["$filter"],b.prototype.format=function(a){var b=this.formatBack(a).toLowerCase();if(isNaN(b)||0==b.length)return a;if(o=-1!=b.indexOf("e")){var c=Number(b);if("Infinity"==c||"-Infinity"==c)return b;if(b=c+"",-1!=b.indexOf("e"))return b}var d=!1;"-"==b.charAt(0)?(d=!0,b=b.substring(1)):"+"==b.charAt(0)&&(b=b.substring(1));var e=b.indexOf("."),f="",g="";-1!=e?(f=b.substring(0,e),g=b.substring(e+1)):f=b,g=g.replace(/[.]/,"");var h=this.suffix&&"%"===this.suffix.charAt(0),i=this.minInt,j=this.minFrac,k=this.maxFrac;if(h&&(i-=2,j+=2,k+=2),g.length>k){var l=new Number("0."+g);l=0==k?Math.round(l):l.toFixed(k),g=l.toString(10).substr(2);for(var m,n=l>=1?1:0,o=f.length-1;n;){if(-1==o){f="1"+f;break}m=f.charAt(o),9==m?(m="0",n=1):(m=++m+"",n=0),f=f.substring(0,o)+m+f.substring(o+1,f.length),o--}}for(var o=g.length;j>o;o++)g+="0";for(;g.length>j&&"0"==g.charAt(g.length-1);)g=g.substring(0,g.length-1);for(var o=f.length;i>o;o++)f="0"+f;for(;f.length>i&&"0"==f.charAt(0);)f=f.substring(1);h&&(f+=g.substring(0,2),g=g.substring(2));for(var p=0,o=f.length;o>0;o--)0!=p&&p%this.comma==0&&(f=f.substring(0,o)+","+f.substring(o),p=0),p++;var q;return q=g.length>0?this.prefix+f+"."+g+this.suffix:this.prefix+f+this.suffix,d&&(q="-"+q),q},b.prototype.formatBack=function(a){if(a+="",!a)return"";if(!isNaN(a))return this.getNumericString(a);var b=a,c=!1;"-"==a.charAt(0)&&(b=b.substr(1),c=!0);var d=b.indexOf(this.prefix),e=""==this.suffix?b.length:b.indexOf(this.suffix,this.prefix.length+1);return 0==d&&e>0&&(b=b.substr(0,e),b=b.substr(this.prefix.length),b=b.replace(/,/g,""),c&&(b="-"+b),!isNaN(b))?this.getNumericString(b):a},b.prototype.getNumericString=function(a){var b=new Number(a),c=b+"";if(a.indexOf(".")>-1&&c.indexOf(".")<0){for(var d=a.indexOf(".")+1;d<a.length;d++)if("0"!==a.charAt(d))return a;return c}return a}}(),function(){"use strict";angular.module("lightning").filter("orderByValue",["$filter",function(a){return function(b,c){return b.sort(function(b,d){return b=a("displayValue")(b.val),d=a("displayValue")(d.val),c?b>d?-1:d>b?1:0:b>d?1:d>b?-1:0})}}])}(),function(){"use strict";angular.module("lightning").filter("placeholder",function(){return function(a,b){var c=null;return c=null!=a&&angular.isString(a)?a.trim():a,null!=c&&""!=c?a:void 0!=b&&null!=b?b:"Loading..."}})}(),function(){"use strict";angular.module("lightning").filter("property",function(){return function(a,b,c,d){if(null!=a&&0==a.length||null==b||null==c)return null;var e=[];return angular.forEach(a,function(a){a[b]==c&&e.push(a)}),0==e.length?null:null==d?e[0]:e[0][d]}})}(),function(){"use strict";angular.module("lightning").filter("pyramidSort",function(){return function(a,b){var c=[];for(a.sort(function(a,c){return null==b?a-c:a[b]-c[b]}),c.push(a.pop());a.length;)c[a.length%2===0?"push":"unshift"](a.pop());return c}})}(),function(){"use strict";angular.module("lightning").filter("result",function(){return function(a,b){if(b=parseInt(b)||0,void 0==a||null==a.results||a.results.length<1||a.results.length<b+1)return null;
var c=a.results[b];return null!=c.result&&(c=c.result),c}})}(),function(){"use strict";angular.module("lightning").filter("roundedNumber",function(){return function(a){if(isNaN(a))return a;if(1e3>a)return a;var b,c=["k","M","B","T","P","E","Z","Y"];b=Math.floor(Math.log(a)/Math.log(1e3));var d;return b>c.length?(d=Number((a/Math.pow(1e3,c.length)).toFixed(1)),d.toString()+c[c.length-1]):(d=Number((a/Math.pow(1e3,b)).toFixed(1)),d.toString()+c[b-1])}})}(),function(){"use strict";angular.module("lightning").filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}])}(),function(){"use strict";function a(){function a(a,b){return d[a]=b,d[a]}function b(a){return d[a]}function c(){d={}}var d={},e={setBookmark:a,getBookmark:b,clearBookmarks:c};return e}angular.module("lightning").factory("BookmarkService",a)}(),function(){"use strict";function a(a){function b(a,b,c){return c?a.sort(function(a,c){return new Date(a.result.fields[b].val[0])-new Date(c.result.fields[b].val[0])}):a.sort(function(a,c){return new Date(c.result.fields[b].val[0])-new Date(a.result.fields[b].val[0])}),a}function c(a,b,c){c||(c=d(a,b));var g=[];g.push(f(a[0],b,c));var h,i,j=0;for(h=0;h<a.length;h++){var k=new Date(a[h].result.fields[b].val[0]);i&&(e(k,i,c)?g[j].events.push(a[h]):(g.push(f(a[h],b,c)),j++)),i=k}return g}function d(a,b){var c,d,e=new Date(a[0].result.fields[b].val[0]),f=new Date(a[a.length-1].result.fields[b].val[0]);e>f?(c=f,d=e):(c=e,d=f);var g=Math.abs(d.getTime()-c.getTime()),h=Math.ceil(g/864e5);return h>365?"year":h>28?"month":h>1?"day":"hour"}function e(a,b,c){switch(c){case"year":return a.getFullYear()===b.getFullYear();case"month":return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth();case"day":return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate();case"hour":return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()&&a.getHours()===b.getHours();default:return!1}}function f(b,c,d){var e;switch(d){case"year":e="yyyy";break;case"month":e="MMM";break;case"day":e="EEE";break;case"hour":e="HH:mm:ss";break;default:e="d MM yyyy HH:mm:ss"}return{label:a("date")(b.result.fields[c].val[0],e),events:[b]}}var g={dateSortResults:b,groupByDateRanges:c};return g.determineDateGrouping=d,g.areDatesGrouped=e,g.createGroup=f,g}angular.module("lightning").factory("DateUtils",a),a.$inject=["$filter"]}(),function(){"use strict";function a(){function a(a){var c=b(a);return c.length>0?c[0]:""}function b(a){var b=[];if("string"==typeof a||"number"==typeof a)return[a];if(null!==a&&"object"==typeof a&&a.val)for(var c=0;c<a.val.length;c++)"object"==typeof a.val[c]?a.val[c].act&&a.val[c].act[1]&&b.push(a.val[c].act[1]):b.push(a.val[c]);return b}var c={getDisplayValue:a,getValues:b};return c}angular.module("lightning").factory("FieldService",a)}(),function(){"use strict";function a(){function a(a){return a.indexOf(",")>0}function b(a){var b=a.split(",");return b[0].length>0&&(b[0]=c(b[0])),b[1].length>0&&(b[1]=c(b[1])),b}function c(a){return d(a)?a=e(a):f(a)&&(a=g(a)),a}function d(a){return"true"==a.toLowerCase()||"false"==a.toLowerCase()}function e(a){return"true"==a.toLowerCase()}function f(a){return!isNaN(a)}function g(a){return Number(a)}function h(d){var e=/(-?)(~?)([A-Za-z_.][A-Za-z_0-9\-.:\/# ]*)(?:(?:\()([0-9]+)(?:\)))?(?:\[)(.*?)(?:])(?:\[['"](.*?)['"]])?(\*?)/g,f=e.exec(d),g=/(['"]?)(.*?)['"]?$/g,h=g.exec(f[5]),i=h[2];return 0==h[1].length&&(i=a(i)?b(i):c(i)),{field:f[3],exclude:"-"==f[1],optional:"~"==f[2]?"field":"*"==f[7]?"value":null,group:void 0!=f[4]?Number(f[4]):null,value:{actual:i,display:void 0!=f[6]?f[6]:""+i}}}var i={parse:h};return i}angular.module("lightning").factory("$filterService",a)}(),function(){"use strict";angular.module("lightning").factory("httpInterceptor",["$q","$rootScope",function(a,b){var c={},d=function(c){return b.$broadcast("httpInterceptorError",c),a.reject(c)};return c.responseError=d,c}])}(),function(){"use strict";function a(a,b,c){function d(c,d,e){a.search(c,d),b.$broadcast("paramChange",c),e&&b.$broadcast("reloadSearch")}function e(a,c){w(!1),angular.forEach(a,function(b,c){d(c,a[c],!1)}),c&&b.$broadcast("reloadSearch")}function f(b,c){var d=a.search()[b];return void 0==d&&void 0!=c&&(d=c),d}function g(b,c){var d=a.search()[b];if(void 0==d&&void 0!=c&&(d=c),!angular.isArray(d)){var e=[];return void 0!=d&&e.push(d),e}return d}function h(a,b){var c=g("f");a=s(a),-1==c.indexOf(a)&&(c.push(a),d("p",1),d("f",c,b))}function i(a,b,c,e,f,h,i){var j=g("f"),k=t(a,b,c,f,h,i);-1==j.indexOf(k)&&(j.push(k),d("p",1),d("f",j,e))}function j(a,b,c,d,e,f,h){var i=g("f"),j=t(a,b,c,d,f,h);-1==i.indexOf(j)&&(i.push(j),e.search("p",1),e.search("f",i))}function k(a,b,c,e,f,h,i,j,k,l,m){var n=g("f"),o=u(a,b,c,e,f,i,j,k,l,m);-1==n.indexOf(o)&&(n.push(o),d("p",1),d("f",n,h))}function l(a,b,c,e,f,h,i,j,k){var l=g("f"),m=v(a,b,c,e,h,i,j,k);-1==l.indexOf(m)&&(l.push(m),d("p",1),d("f",l,f))}function m(a,b){var c=g("f"),e=angular.copy(c),f=[];angular.forEach(e,function(b){var c=z(b);c.field!=a&&f.push(b)}),d("p",1),d("f",f,b)}function n(b,c,e){var f=g("f"),h=angular.copy(f),i=[];angular.forEach(h,function(d){var e=new RegExp(b+'\\["?\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z'),f=decodeURIComponent(a.url());f.match(e)&&(c=c.replace(/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2})(?![Zz])/g,"$&Z"));var g=new RegExp(b+'\\["?'+c+'"?\\]'),h=d.match(g);h||(g=new RegExp(b+'\\["?.+?(?="\\])"?\\]\\["?'+c+'"?\\]'),h=d.match(g)),h||i.push(d)}),d("p",1),d("f",i,e)}function o(a){var b=g("f"),c=angular.copy(b),d=[];return angular.forEach(c,function(b){var c=null!=a?b.substring(0,a.length):null;(null==a||c==a)&&d.push(b)}),d}function p(a,b,c,d,e,f){var h=g("f"),i=t(a,b,c,d,e,f);return-1!=h.indexOf(i)?!0:!1}function q(a){var b=g("f"),c=s(a);return-1!=b.indexOf(c)?!0:!1}function r(){return angular.copy(a.search())}function s(a){return a=null!=a.val&&null!=a.val.act&&null!=a.val.act.to?v(a.field,a.val.act.from,a.val.act.to,a.val.dsp,a.optional,a.val.act.fromExcluded,a.val.act.toExcluded,a.exclude):t(a.field,c("actualValue")(a.val),c("displayValue")(a.val),a.optional,a.exclude,a.match)}function t(a,b,c,d,e,f){var g="";return"field"==d?g+="~":e&&(g+="-"),b='"'+b+'"',"left_partial"==f?b="*"+b:"right_partial"==f?b+="*":"partial"==f&&(b="*"+b+"*"),g+=""+a+"["+b+']["'+c+'"]',"value"==d&&(g+="*"),g}function u(a,b,c,d,e,f,g,h,i,j){g=null==g||""==g.trim()?" - ":" "+g+" ";var k="";return 1==j&&(k+="-"),"field"==f&&(k+="~"),null==b&&(b=""),null==c&&(c=""),k+=a+(h?"(":"[")+b+","+c+(i?")":"]")+'["'+d+g+e+'"]',"value"==f&&(k+="*"),k}function v(a,b,c,d,e,f,g,h){null!=d&&"undefined"!=typeof d.trim&&(d=d.trim()),null==b&&(b=""),null==c&&(c="");var i="";return 1==h&&(i+="-"),"field"==e&&(i+="~"),i+=a+(f?"(":"[")+b+","+c+(g?")":"]")+'["'+d+'"]',"value"==e&&(i+="*"),i}function w(c){var e=a.search();angular.forEach(e,function(a,b){d(b,null)}),c&&b.$broadcast("reloadSearch")}function x(){b.$broadcast("reloadSearch")}function y(a){var b=/^([\-~]{0,2})([A-Za-z_\.][A-Za-z_0-9\-\.:\/# ]*)((?:\()([0-9]+)(?:\)))?(([\[\(]{1})([*]?["']?(\\*?.*?)["']?[*]?)([\]\)]{1}))(\[["'](.*?)["']\])?(\*)?$/,c=b.exec(a);if(c){var d={};return d.exclude=c[1]&&c[1].indexOf("-")>-1?!0:!1,d.field=c[2],d.group=c[4]?c[4]:-1,d.excludeLeftEndpoint="("==c[6]?!0:!1,d.match="exact",0==c[7].indexOf("*")&&(d.match="left_partial"),c[7].length>1&&c[7].lastIndexOf("*")==c[7].length-1&&(d.match="left_partial"==d.match?"partial":"right_partial"),d.value=c[8]||"",d.excludeRightEndpoint=")"==c[9]?!0:!1,d.displayName=c[11]||""==c[11]?c[11]:d.value,d.optional=!1,c[1]&&c[1].indexOf("~")>-1&&(d.optional="field"),void 0!=c[12]&&"*"==c[12]&&(d.optional="value"),d}return null}function z(a){var b=y(a);if(null===b)return null;var c={exclude:b.exclude,field:b.field,val:{act:null,dsp:b.displayName},grp:b.group,match:b.match,optional:b.optional},d=b.value.split(",");return 2==d.length&&(new Date(d[0])instanceof Date&&isFinite(new Date(d[0]))||!isNaN(d[0]))&&(new Date(d[1])instanceof Date&&isFinite(new Date(d[1]))||!isNaN(d[1]))?c.val.act={from:d[0],to:d[1],type:"range",fromExcluded:b.excludeLeftEndpoint,toExcluded:b.excludeRightEndpoint}:c.val.act=b.value,c}var A={setUrlParameter:d,setUrlParameters:e,getUrlParameter:f,getUrlParametersAsArray:g,addFilterObjectToUrl:h,addFilterToUrl:i,addFilterToLocationCopy:j,addRangeFilterToUrl:k,addRangeFilterDisplayToUrl:l,removeFiltersFromUrl:m,removeFilterValueFromUrl:n,getFiltersFromUrl:o,urlContainsFilter:p,urlContainsFilterFromObject:q,getAllUrlParameters:r,createFilterFromObject:s,createFilter:t,createRangeFilter:u,createRangeFilterDisplay:v,resetAllParameters:w,reloadSearch:x,filterParse:y,stringToFilter:z};return A}angular.module("lightning-locations",["lightning"]).factory("$lightningUrl",a),a.$inject=["$location","$rootScope","$filter"]}(),function(){"use strict";function a(a,b){function c(c,d){var e=b("date")(new Date,"HH:mm:ss:sss");a.debug("DEBUG: "+e+" "+c+" - "+d)}function d(c,d){var e=b("date")(new Date,"HH:mm:ss:sss");a.error("ERROR: "+e+" "+c+" - "+d)}function e(c,d){var e=b("date")(new Date,"HH:mm:ss:sss");a.warn("WARNING: "+e+" "+c+" - "+d)}var f={debug:c,error:d,warn:e};return f}angular.module("lightning").factory("$lightningLog",a),a.$inject=["$log","$filter"]}(),function(){"use strict";function a(a){function b(a){f[a.name]=a}function c(b){if(f.hasOwnProperty(b)){var c=f[b];c.unregister(),delete f[b]}else a.debug("ModalService","No modal found with the ID - "+b)}function d(b){var c=f[b];c?c.show():a.debug("ModalService","No modal found with the ID - "+b)}function e(b){var c=f[b];c?c.close():a.debug("ModalService","No modal found with the ID - "+b)}var f={},g={register:b,unregister:c,show:d,close:e};return g}angular.module("lightning").factory("ModalService",a),a.$inject=["$lightningLog"]}(),function(){"use strict";function a(a){function b(b,c){e[b]=c,a.$broadcast(b+"_updated",c)}function c(a){return void 0!=e[a]?e[a]:null}function d(){e={}}var e={},f={setPlatform:b,getPlatform:c,clearPlatforms:d};return f}angular.module("lightning").factory("PlatformService",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(a){function b(b,c){e[b]=c,a.$broadcast(b+"_updated",c)}function c(a){return void 0!=e[a]?e[a]:null}function d(){e={}}var e={},f={setQuery:b,getQuery:c,clearQueries:d};return f}angular.module("lightning").factory("QueryIdService",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(a,b,c){function d(b,c){m[b]=h(c),a.$broadcast("query_"+b+"_updated",m[b])}function e(a){return void 0!=m[a]?angular.copy(m[a]):null}function f(a,b){var c=e(a);return g(c,b)}function g(a,c){var d={};if(null!=a&&null!=a.filters&&(angular.isArray(a.filters)?angular.forEach(a.filters,function(d,e){(1!=c||c&&1!=d.hidden)&&(a.filters[e]=b.createFilterFromObject(d))}):angular.isObject(a.filters)&&(1!=c||c&&1!=a.filters.hidden)&&(a.filters=[b.createFilterFromObject(a.filters)])),null!=a&&null!=a.sorts){var e=angular.copy(a.sorts);a.sorts="",angular.forEach(e,function(b,c){var d=j(b);a.sorts+=d,c<e.length-1&&(a.sorts+=",")})}if(null!=a&&null!=a.custom&&angular.isObject(a.custom)){var f=[];angular.forEach(a.custom,function(a,b){angular.forEach(a,function(a){f.push(b+"["+a+"]")})}),a.custom=f}return angular.forEach(a,function(a,b){null!=o[b]?angular.isArray(a)?(d[o[b]]=[],angular.forEach(a,function(a){d[o[b]].push(a)})):d[o[b]]=a:"val"==b?null!=a.act?(d.mq=a.act,d.q=a.dsp):""!=a&&null!=a&&(d.q=a):angular.isArray(a)?(d[b]=[],angular.forEach(a,function(a){d[b].push(a)})):d[b]=a}),angular.isArray(d.f)&&0==d.f.length?delete d.f:void 0!=d.f&&null==d.f&&delete d.f,d}function h(a){if(null!=a.f&&(angular.isArray(a.f)?angular.forEach(a.f,function(c,d){angular.isString(c)&&(a.f[d]=b.stringToFilter(c))}):angular.isString(a.f)&&(a.f=[b.stringToFilter(a.f)])),null!=a&&null!=a.s){var c=a.s.split(",");a.s=[],angular.forEach(c,function(b){a.s.push(i(b))})}if(null!=a&&null!=a.c){var d=angular.copy(a.c),e={};if(angular.isArray(d))angular.forEach(d,function(a){var b=new RegExp("[^[]*"),c=b.exec(a),d=a.match(/\[(.*?)\]/)[1];angular.isArray(e[c])?e[c].push(d):e[c]=[d]});else{var f=new RegExp("[^[]*"),g=f.exec(d),h=d.match(/\[(.*?)\]/)[1];e[g]=[h]}a.c=e}var j={};return angular.forEach(a,function(a,b){null!=n[b]?angular.isArray(a)?(j[n[b]]=[],angular.forEach(a,function(a){j[n[b]].push(a)})):j[n[b]]=a:"q"==b||"mq"==b||(angular.isArray(a)?(j[b]=[],angular.forEach(a,function(a){j[b].push(a)})):j[b]=a)}),null!=a.q&&""!=a.q&&null!=a.mq?j.val={act:a.mq,dsp:a.q}:null!=a.mq?j.val={act:a.mq,dsp:a.mq}:null!=a.q?j.val=a.q:j.val="",null==j.filters&&(j.filters=[]),j}function i(a){var b={};return a.length>0&&(b={field:a.substring(1),order:"+"==a.substring(0,1)?"asc":"desc"}),b}function j(a){var b=("asc"==a.order?"+":"-")+a.field;return b}function k(a,d,e){var f=c("filter")(a.filters,{field:d}),g=b.createFilterFromObject(e);if(f&&f.length>0){var h=!1;if(angular.forEach(f,function(a){var c=b.createFilterFromObject(a);return g==c?(h=!0,!0):void 0}),h)return!0}return!1}function l(){m={}}var m={},n={c:"custom",f:"filters",fa:"facets",fi:"fields",p:"page",s:"sorts",v:"view",t:"type"},o=_.invert(n),p={setQuery:d,getQuery:e,getQueryAsHttpParams:f,convertHttpParamsToQuery:h,convertQueryToHttpParams:g,convertSortParamToObject:i,convertSortObjectToParam:j,queryContainsFilterForField:k,clearQueries:l};return p}angular.module("lightning").factory("QueryService",a),a.$inject=["$rootScope","$lightningUrl","$filter"]}(),function(){"use strict";function a(a,b){function c(b,c){h[b]=c,a.$broadcast(b+"_updated",c)}function d(a,b){var c;if(void 0!=h[a]&&(c=angular.copy(h[a])),null==c)return null;if(null!=b){for(var d=b.split(","),e={},f=0;f<d.length;f++){var g=d[f].trim();null!=c[g]&&(e[g]=c[g])}c=e}return c}function e(){h={}}function f(a,c){var d="",e={},f={};return e=c?c:b.getAllUrlParameters(),angular.forEach(e,function(a,b){"q"==b?d=a:f[b]=a}),{query:d,params:e,searchParams:f}}function g(a){return{hits:{act:["Long",0]},results:a}}var h={},i={setResponse:c,getResponse:d,clearResponses:e,getParams:f,createResponseFromResults:g};return i}angular.module("lightning").factory("ResponseService",a),a.$inject=["$rootScope","$lightningUrl"]}(),function(){"use strict";function a(a,b,c){function d(){var a=b[0].documentElement.clientHeight,c=b[0].documentElement.clientWidth;for(var d in h)h.hasOwnProperty(d)&&h[d](a,c)}var e,f,g=0,h={};return a.addEventListener("scroll",function(){c.cancel(e),e=c(d,0)}),a.addEventListener("resize",function(){c.cancel(f),f=c(d,0)}),{bindListener:function(a){var b=++g;return h[g]=a,function(){delete h[b]}}}}angular.module("lightning").service("scrollAndResizeListener",a),a.$inject=["$window","$document","$timeout"]}(),function(){"use strict";angular.module("lightning-services",["lightning"]).factory("$twigkit",["$http","$httpParamSerializerJQLike","PlatformService","ResponseService","$q","QueryService","$injector","$lightningLog","$lightningUrl","UserService",function(a,b,c,d,e,f,g,h,i,j){var k={};return k.getConstant=function(a,b){var c;try{c=g.get(a)}catch(d){c=b}return c},k.getContextPath=function(a){var b=k.getConstant("contextPath",a);return b==a?b:"string"!=typeof b?(h.error("$twigkit:getContextPath",'Context path must be a string! Please make sure the constant "contextPath" is declared correctly!'),a):("/"!=b.slice(-1)&&(b+="/"),b)},k.search=function(b,c,d,e){e=0!=e?!0:!1;var f=k.getContextPath("/"),g=(null!=c&&c.host?c.host:f)+"twigkit/api/core/services/platform/search/"+c.conf;return d?d.q=b:d={q:b},a({method:"GET",url:g,params:d,ignoreLoadingBar:e})},k.searchSeriesFacet=function(b,c,d,e,f){var g=k.getContextPath("/"),h=(null!=c&&c.host?c.host:g)+"twigkit/api/core/services/platform/series/"+c.conf,i=null!=b?angular.copy(b):{};return i.facets=d,null!=e&&(i.facts=e),null==i.q&&(i.q=""),i.facts=e,i.rpp=f,a({method:"GET",url:h,params:i,ignoreLoadingBar:!0})},k.searchSeriesFields=function(b,c,e,f){var g=k.getContextPath("/"),h=(null!=c&&c.host?c.host:g)+"twigkit/api/core/services/platform/series/"+c.conf,i=d.getParams(!0,b),j=angular.copy(i.searchParams);return j.fields=e,j.q=i.query,j.rpp=f,a({method:"GET",url:h,params:j,ignoreLoadingBar:!0})},k.getComments=function(b,c){var d=k.getContextPath("/"),e=(null!=b&&b.host?b.host:d)+"twigkit/api/social/comments?target="+c;return a({method:"GET",url:e,ignoreLoadingBar:!0})},k.deleteComment=function(b,c){var d=k.getContextPath("/"),e=(null!=b&&b.host?b.host:d)+"twigkit/api/social/comment/"+c;return a({method:"DELETE",url:e,ignoreLoadingBar:!0})},k.postComment=function(c,d){var e=k.getContextPath("/"),f=(null!=c&&c.host?c.host:e)+"twigkit/api/social/comment";return a({url:f,dataType:"json",method:"POST",data:b(d),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},k.getBookmarks=function(b,c){var d=k.getContextPath(""),e=d+"twigkit/api/social/bookmarks";return a({method:"GET",url:e,params:c,ignoreLoadingBar:!0})},k.postBookmark=function(c){var d=k.getContextPath(""),e=d+"twigkit/api/social/bookmark";return a({url:e,dataType:"json",method:"POST",data:b(c),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},k.deleteBookmark=function(b){var c=k.getContextPath(""),d=c+"twigkit/api/social/bookmark/"+b;return a({method:"DELETE",url:d,ignoreLoadingBar:!0})},k.getTopics=function(b){var c=k.getContextPath(""),d=c+"twigkit/api/social/topics";return a({method:"GET",url:d,params:b,ignoreLoadingBar:!0})},k.postLike=function(c,d,e,f){var g=k.getContextPath("/"),h=(null!=c&&c.host?c.host:g)+"twigkit/api/social/link",i={id:0,target:d,topic:e,collection:f};return a({url:h,dataType:"json",method:"POST",data:b(i),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},k.deleteLike=function(b,c){var d=k.getContextPath("/"),e=(null!=b&&b.host?b.host:d)+"twigkit/api/social/link/"+c;return a({method:"DELETE",url:e,ignoreLoadingBar:!0})},k.postTopic=function(c){var d=k.getContextPath(""),e=d+"twigkit/api/social/topic";return a({url:e,dataType:"json",method:"POST",data:b(c),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},k.deleteTopic=function(b){var c=k.getContextPath(""),d=c+"twigkit/api/social/topic/"+b;return a({method:"DELETE",url:d,ignoreLoadingBar:!0})},k.getSavedQueries=function(b,c){var d="twigkit/api/social/saved-queries";return a({method:"GET",url:d,ignoreLoadingBar:!0})},k.saveQuery=function(c){var d=k.getContextPath(""),e=d+"twigkit/api/social/saved-query";return a({url:e,dataType:"json",method:"POST",data:b(c),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},k.deleteSavedQuery=function(b){var c=k.getContextPath(""),d=c+"twigkit/api/social/saved-query/"+b;return a({method:"DELETE",url:d,ignoreLoadingBar:!0})},k.searchFacet=function(b,f,g,h,j,l,m){l=1==l,angular.isString(f)&&(f=c.getPlatform(f)),(null==f||null==b)&&e.reject("No platform or facet was called for this function.");var n=k.getContextPath(""),o=(null!=f&&f.host?f.host:n)+"twigkit/api/core/services/search/facet/"+b+"/in/"+f.conf;null!=m&&(o+="/on/"+m);var p={};return null!=g&&(null==g.searchParams&&(g=d.getParams(!0,g)),p=angular.copy(g.searchParams),p.q=g.query,p.p=1,p.c="facet.mincount[1]",p.f=[],angular.forEach(g.searchParams.f,function(a){(i.stringToFilter(a).field!=b||0==l)&&p.f.push(a)})),p.facetQuery=j,null!=h&&(p.rpp=h),a({method:"GET",url:o,params:p,ignoreLoadingBar:!0})},k.getUser=function(){var b=k.getContextPath(""),c=b+"twigkit/api/user",d=j.getUser(),f=e.defer();return null!=d?f.resolve(d):a({method:"GET",url:c,ignoreLoadingBar:!0}).then(function(a){j.setUser(a.data),f.resolve(a.data)},function(){f.reject("Failed to get user")}),f.promise},k}]).factory("$util",["$compile","$timeout",function(a,b){var c={};return c.params=function(a,b,c){var d=angular.copy(a);return angular.forEach(d,function(a,e){b&&b.indexOf(e)>-1&&(d[e]=a.split(",")),c&&angular.forEach(c,function(a,b){d[b]||(d[b]=a)})}),d.styling&&(d.classes="",angular.forEach(d.styling.split(" "),function(a){d.classes.length>0&&(d.classes+=" "),d.classes+="tk-"+a})),d},c.remove=function(a,c){a.length>0&&(angular.forEach(a,function(a){a&&b(function(){if(null!=a.scope){var b=a.scope;b.$destroy()}a.elem.remove()},0)}),c&&c())},c.render=function(a,b,c){var d=a(c,function(a){b.append(a)});return d},c.hasChildren=function(a){var b=!1;return a(function(a){a.length>0&&angular.forEach(a,function(a){"#text"!=a.nodeName&&"#comment"!=a.nodeName&&1!=b&&(b=!0)})}),b},c.escapeRegex=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},c.hasStyle=function(a,b){return a&&b?b.search(new RegExp("\\b"+c.escapeRegex(a)+"\\b"))>-1:!1},c}])}(),function(){"use strict";function a(a){function b(b){e=b,a.$broadcast("user_updated",e)}function c(){return null!=e?e:null}function d(){e=null}var e=null,f={setUser:b,getUser:c,clearUser:d};return f}angular.module("lightning").factory("UserService",a),a.$inject=["$rootScope"]}();